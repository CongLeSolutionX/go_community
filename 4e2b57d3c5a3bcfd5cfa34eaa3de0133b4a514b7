{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "1ecb6a99_baa90b34",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 13640
      },
      "writtenOn": "2020-10-29T08:29:22Z",
      "side": 1,
      "message": "Thanks - the diff looks good, however I\u0027ll run some benchmarks on a SiFive HFU to confirm.",
      "revId": "4e2b57d3c5a3bcfd5cfa34eaa3de0133b4a514b7",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "7cae9e3e_67bf21c0",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 13640
      },
      "writtenOn": "2020-10-29T14:07:00Z",
      "side": 1,
      "message": "The performance is similar:\n\n// SiFive HiFive Unleashed (U540 1GHz)\n// n\u003d2: duff\u003d8.0ms, loop\u003d10.6ms, inline\u003d4.9ms\n// n\u003d3: duff\u003d6.9ms, loop\u003d9.2ms, inline\u003d4.0ms\n// n\u003d4: duff\u003d6.2ms, loop\u003d8.5ms, inline\u003d3.5ms\n// n\u003d64: duff\u003d4.3ms, loop\u003d6.4ms\n// n\u003d128: duff\u003d4.2ms, loop\u003d6.3ms",
      "parentUuid": "1ecb6a99_baa90b34",
      "revId": "4e2b57d3c5a3bcfd5cfa34eaa3de0133b4a514b7",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "95bdf41a_5c4cb0f6",
        "filename": "src/cmd/compile/internal/ssa/gen/RISCV64.rules",
        "patchSetId": 4
      },
      "lineNbr": 377,
      "author": {
        "id": 13315
      },
      "writtenOn": "2020-10-29T13:49:47Z",
      "side": 1,
      "message": "What happens if it is still not aligned?",
      "range": {
        "startLine": 377,
        "startChar": 26,
        "endLine": 377,
        "endChar": 41
      },
      "revId": "4e2b57d3c5a3bcfd5cfa34eaa3de0133b4a514b7",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e7c92d9f_547453f9",
        "filename": "src/cmd/compile/internal/ssa/gen/RISCV64.rules",
        "patchSetId": 4
      },
      "lineNbr": 377,
      "author": {
        "id": 13640
      },
      "writtenOn": "2020-10-29T14:07:00Z",
      "side": 1,
      "message": "Right, we seem to be missing the t.Alignment()%2 \u003d\u003d 1 case (which is presumably 4x MOVBstore).\n\nIt may also be preferable to keep these grouped by size to make it easier to review/identify alignment handling (like MIPS64.rules).",
      "parentUuid": "95bdf41a_5c4cb0f6",
      "range": {
        "startLine": 377,
        "startChar": 26,
        "endLine": 377,
        "endChar": 41
      },
      "revId": "4e2b57d3c5a3bcfd5cfa34eaa3de0133b4a514b7",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f43e8303_a5a8d4c4",
        "filename": "src/cmd/compile/internal/ssa/gen/RISCV64.rules",
        "patchSetId": 4
      },
      "lineNbr": 377,
      "author": {
        "id": 36043
      },
      "writtenOn": "2020-10-29T14:40:00Z",
      "side": 1,
      "message": "I\u0027ve implemented only three simple cases that one misaligned access can be replaced by two aligned accesses.\n\nI can implement more cases (e.g. one misaligned access replaced by up to 4 aligned accesses) but for the first time I\u0027ve decided to leave things simple therefore such a modest code.\n\nAs for grouping, I\u0027ve no my own preferences so It\u0027s your choice.",
      "parentUuid": "e7c92d9f_547453f9",
      "range": {
        "startLine": 377,
        "startChar": 26,
        "endLine": 377,
        "endChar": 41
      },
      "revId": "4e2b57d3c5a3bcfd5cfa34eaa3de0133b4a514b7",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "77bef1b0_5df5f037",
        "filename": "src/cmd/compile/internal/ssa/gen/RISCV64.rules",
        "patchSetId": 4
      },
      "lineNbr": 377,
      "author": {
        "id": 36043
      },
      "writtenOn": "2020-10-29T14:48:08Z",
      "side": 1,
      "message": "\u003e What happens if it is still not aligned?\n\nIt generates aligned loop. The loop for sure executes much faster than emulating every misaligned access at OS level. But the loop costs a code size.",
      "parentUuid": "f43e8303_a5a8d4c4",
      "range": {
        "startLine": 377,
        "startChar": 26,
        "endLine": 377,
        "endChar": 41
      },
      "revId": "4e2b57d3c5a3bcfd5cfa34eaa3de0133b4a514b7",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f7f20a57_94af79c7",
        "filename": "src/cmd/compile/internal/ssa/gen/RISCV64.rules",
        "patchSetId": 4
      },
      "lineNbr": 377,
      "author": {
        "id": 36043
      },
      "writtenOn": "2020-10-29T15:26:21Z",
      "side": 1,
      "message": "By the way, It seems the current compiler avoids generating misaligned accesses at all so it can be difficult to test and handling unaligned accesses has no practical significance yet.\n\nI use riscv64 port on Kendryte K210. There is no OS nor any misaligned access emulation in the runtime. Until now I\u0027ve never observed any traps caused by unaligned access other than the ones from the runtime.memmove.",
      "parentUuid": "77bef1b0_5df5f037",
      "range": {
        "startLine": 377,
        "startChar": 26,
        "endLine": 377,
        "endChar": 41
      },
      "revId": "4e2b57d3c5a3bcfd5cfa34eaa3de0133b4a514b7",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a99d0612_d64517c3",
        "filename": "src/cmd/compile/internal/ssa/gen/RISCV64.rules",
        "patchSetId": 4
      },
      "lineNbr": 377,
      "author": {
        "id": 36043
      },
      "writtenOn": "2020-10-30T11:17:57Z",
      "side": 1,
      "message": "\u003e it can be difficult to test\n\nIt\u0027s easy with help of the unsafe package. My mistake.",
      "parentUuid": "f7f20a57_94af79c7",
      "range": {
        "startLine": 377,
        "startChar": 26,
        "endLine": 377,
        "endChar": 41
      },
      "revId": "4e2b57d3c5a3bcfd5cfa34eaa3de0133b4a514b7",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a0843ba8_86dce239",
        "filename": "src/cmd/compile/internal/ssa/gen/RISCV64.rules",
        "patchSetId": 4
      },
      "lineNbr": 441,
      "author": {
        "id": 13315
      },
      "writtenOn": "2020-10-29T13:49:47Z",
      "side": 1,
      "message": "Same question here.",
      "range": {
        "startLine": 441,
        "startChar": 31,
        "endLine": 441,
        "endChar": 50
      },
      "revId": "4e2b57d3c5a3bcfd5cfa34eaa3de0133b4a514b7",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    }
  ]
}