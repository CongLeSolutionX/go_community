{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "8f2da24c_84332000",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 5206
      },
      "writtenOn": "2024-10-26T00:07:12Z",
      "side": 1,
      "message": "Thanks for working on this.",
      "revId": "41863f20dca68e0e80b59f3a86b09523012bd40f",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "25c0721d_8b90f38c",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 34725
      },
      "writtenOn": "2024-10-26T01:42:47Z",
      "side": 1,
      "message": "Thanks!",
      "revId": "41863f20dca68e0e80b59f3a86b09523012bd40f",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0bee3fa7_7464a9b9",
        "filename": "src/internal/poll/sendfile_unix.go",
        "patchSetId": 4
      },
      "lineNbr": 15,
      "author": {
        "id": 5206
      },
      "writtenOn": "2024-10-26T00:07:12Z",
      "side": 1,
      "message": "Let\u0027s document this a bit more.  In particular document that size \u003d\u003d 0 means the reset of the file after the current position, and documented the handled result.",
      "revId": "41863f20dca68e0e80b59f3a86b09523012bd40f",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "6bac34d6_f7c12c4d",
        "filename": "src/internal/poll/sendfile_unix.go",
        "patchSetId": 4
      },
      "lineNbr": 15,
      "author": {
        "id": 5305
      },
      "writtenOn": "2024-10-28T19:24:15Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "0bee3fa7_7464a9b9",
      "revId": "41863f20dca68e0e80b59f3a86b09523012bd40f",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d5d6de83_9eee7d6e",
        "filename": "src/internal/poll/sendfile_unix.go",
        "patchSetId": 4
      },
      "lineNbr": 97,
      "author": {
        "id": 5206
      },
      "writtenOn": "2024-10-26T00:07:12Z",
      "side": 1,
      "message": "Should this check n \u003e 0 rather than written \u003e 0 ?",
      "revId": "41863f20dca68e0e80b59f3a86b09523012bd40f",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "211b8756_b5be0bd1",
        "filename": "src/internal/poll/sendfile_unix.go",
        "patchSetId": 4
      },
      "lineNbr": 97,
      "author": {
        "id": 34725
      },
      "writtenOn": "2024-10-26T01:42:47Z",
      "side": 1,
      "message": "At this point, `written` has been added by `n` (when it\u0027s positive), which could work practically, but it would be intuitive to use `n` here. That being said, I don\u0027t think we should treat the case of (-1, EINVAL) as a successful call, this could happen when last call succeeds and this one fails in theory, it might not never happen, but checking `n` should work on all cases and it seems to be safer, `n` is therefore a better choice here.",
      "parentUuid": "d5d6de83_9eee7d6e",
      "revId": "41863f20dca68e0e80b59f3a86b09523012bd40f",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "cd9a7438_81ace980",
        "filename": "src/internal/poll/sendfile_unix.go",
        "patchSetId": 4
      },
      "lineNbr": 97,
      "author": {
        "id": 5305
      },
      "writtenOn": "2024-10-28T19:24:15Z",
      "side": 1,
      "message": "Changed (and moved to sendfileChunk).\n\nOn most platforms when size\u003d\u003d0 we call sendfile until it returns 0. Checking for n \u003e 0 here would therefore be a problem, *but* on Solaris when size\u003d\u003d0 we look up the actual file size, so it isn\u0027t a problem.\n\nAdded a comment to SendFile above to record this fact, since it\u0027s subtle.",
      "parentUuid": "211b8756_b5be0bd1",
      "revId": "41863f20dca68e0e80b59f3a86b09523012bd40f",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "09f3d053_fac2a455",
        "filename": "src/internal/poll/sendfile_unix.go",
        "patchSetId": 4
      },
      "lineNbr": 113,
      "author": {
        "id": 34725
      },
      "writtenOn": "2024-10-26T01:42:47Z",
      "side": 1,
      "message": "Has this ever happened on any other platforms besides macOS? If not, I think it deserves a comment clarifying it.",
      "revId": "41863f20dca68e0e80b59f3a86b09523012bd40f",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "3d2b5b0a_d323bc45",
        "filename": "src/internal/poll/sendfile_unix.go",
        "patchSetId": 4
      },
      "lineNbr": 113,
      "author": {
        "id": 5305
      },
      "writtenOn": "2024-10-28T19:24:15Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "09f3d053_fac2a455",
      "revId": "41863f20dca68e0e80b59f3a86b09523012bd40f",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5ca30598_483febff",
        "filename": "src/internal/poll/sendfile_unix.go",
        "patchSetId": 4
      },
      "lineNbr": 119,
      "author": {
        "id": 34725
      },
      "writtenOn": "2024-10-26T01:42:47Z",
      "side": 1,
      "message": "May as well throw one more retryable error -- `EBUSY` here for *BSD.",
      "revId": "41863f20dca68e0e80b59f3a86b09523012bd40f",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "6edad70b_5e2843a5",
        "filename": "src/internal/poll/sendfile_unix.go",
        "patchSetId": 4
      },
      "lineNbr": 119,
      "author": {
        "id": 5305
      },
      "writtenOn": "2024-10-28T19:24:15Z",
      "side": 1,
      "message": "Looking at the EBUSY documentation (https://man.freebsd.org/cgi/man.cgi?sendfile(2)), I\u0027m not sure that\u0027s right. We should only see EBUSY if we specify SF_NODISKIO (which we don\u0027t), and when receiving it we\u0027re advised to retry \"after a short period\" which seems different than busy-looping.\n\nIf we want to add it, let\u0027s do so as a separate CL.",
      "parentUuid": "5ca30598_483febff",
      "revId": "41863f20dca68e0e80b59f3a86b09523012bd40f",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "bfdaf126_afa8c31d",
        "filename": "src/internal/poll/sendfile_unix.go",
        "patchSetId": 4
      },
      "lineNbr": 123,
      "author": {
        "id": 5206
      },
      "writtenOn": "2024-10-26T00:07:12Z",
      "side": 1,
      "message": "Not sure what it means to say that we should end the loop when there is no error returned from sendfile.  That case is handled above and in any case we should only return when all bytes are written.",
      "revId": "41863f20dca68e0e80b59f3a86b09523012bd40f",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "53363d94_be50242c",
        "filename": "src/internal/poll/sendfile_unix.go",
        "patchSetId": 4
      },
      "lineNbr": 123,
      "author": {
        "id": 34725
      },
      "writtenOn": "2024-10-26T01:42:47Z",
      "side": 1,
      "message": "This is a old comment, some of which no longer applies here. Just remove the \"there is no error returned from sendfile(2) or\" part and it will good to go.",
      "parentUuid": "bfdaf126_afa8c31d",
      "revId": "41863f20dca68e0e80b59f3a86b09523012bd40f",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "2a4bbb25_2b12bb81",
        "filename": "src/internal/poll/sendfile_unix.go",
        "patchSetId": 4
      },
      "lineNbr": 123,
      "author": {
        "id": 5305
      },
      "writtenOn": "2024-10-28T19:24:15Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "53363d94_be50242c",
      "revId": "41863f20dca68e0e80b59f3a86b09523012bd40f",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "291a8382_8f0f82cc",
        "filename": "src/internal/poll/sendfile_unix.go",
        "patchSetId": 4
      },
      "lineNbr": 127,
      "author": {
        "id": 5206
      },
      "writtenOn": "2024-10-26T00:07:12Z",
      "side": 1,
      "message": "I think this is a little more confusing than strictly necessary.  The only way we can get to this point is err \u003d\u003d syscall.EAGAIN.  Let\u0027s either rework this so that there is no err \u003d\u003d syscall.EAGAIN case above (i.e., change \"else {\" to \"else if err !\u003d syscall.EAGAIN {\" and move the EAGAIN case after the if) or let\u0027s move this code into the EAGAIN case and leave a panic(\"unreachable\") here.",
      "revId": "41863f20dca68e0e80b59f3a86b09523012bd40f",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "cc4a1780_7cd8656b",
        "filename": "src/internal/poll/sendfile_unix.go",
        "patchSetId": 4
      },
      "lineNbr": 127,
      "author": {
        "id": 5305
      },
      "writtenOn": "2024-10-28T19:24:15Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "291a8382_8f0f82cc",
      "revId": "41863f20dca68e0e80b59f3a86b09523012bd40f",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9e4a80c2_6362a693",
        "filename": "src/internal/poll/sendfile_unix.go",
        "patchSetId": 4
      },
      "lineNbr": 138,
      "author": {
        "id": 5206
      },
      "writtenOn": "2024-10-26T00:07:12Z",
      "side": 1,
      "message": "Maybe add a comment that offset is always nil here.",
      "revId": "41863f20dca68e0e80b59f3a86b09523012bd40f",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "09c58aed_30bb3db6",
        "filename": "src/internal/poll/sendfile_unix.go",
        "patchSetId": 4
      },
      "lineNbr": 138,
      "author": {
        "id": 5305
      },
      "writtenOn": "2024-10-28T19:24:15Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "9e4a80c2_6362a693",
      "revId": "41863f20dca68e0e80b59f3a86b09523012bd40f",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    }
  ]
}