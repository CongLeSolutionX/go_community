{
  "comments": [
    {
      "key": {
        "uuid": "6ecf4445_b1bfb2a5",
        "filename": "src/encoding/gob/decode.go",
        "patchSetId": 2
      },
      "lineNbr": 567,
      "author": {
        "id": 5015
      },
      "writtenOn": "2017-04-09T23:03:07Z",
      "side": 1,
      "message": "This behavior, if true, is undocumented. Who says to double the number? In fact, where is it written how to set the hint? As far as I can tell, no one does, and that should be fixed before we write code to honor the behavior.\n\nNot your fault at all, but please file an issue to resolve that before we proceed with this.",
      "revId": "1c26e254df5e466dd77c65882066afedee30013f",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a9bd395d_44beb0e2",
        "filename": "src/encoding/gob/decode.go",
        "patchSetId": 2
      },
      "lineNbr": 567,
      "author": {
        "id": 17532
      },
      "writtenOn": "2017-04-09T23:15:29Z",
      "side": 1,
      "message": "I decided to double the size to make sure we won\u0027t over the \u0027tooBig\u0027 limit. A hashmap most likely has some overhead for storing the data and since it\u0027s not predictable, I decide to multiple the key and elem sizes by two as a heuristic. I am not very tied to this, but I would like to protect against that.\n\nAs for the steps here: is your suggestion to file a bug for documentation about how to use reflect.MakeMapWithSize? I looked at https://golang.org/ref/spec#Map_types and I don\u0027t see any information about how to use capacity.",
      "parentUuid": "6ecf4445_b1bfb2a5",
      "revId": "1c26e254df5e466dd77c65882066afedee30013f",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0fb97f30_a13c6a61",
        "filename": "src/encoding/gob/decode.go",
        "patchSetId": 2
      },
      "lineNbr": 567,
      "author": {
        "id": 5056
      },
      "writtenOn": "2017-04-10T17:09:42Z",
      "side": 1,
      "message": "Sorry, but no. Please use _only_:\n\nif value.IsNil() {\n    value.Set(reflect.MakeMapWithSize(mtyp, int(n)))\n}\n\nOtherwise it\u0027s not a hint.",
      "parentUuid": "a9bd395d_44beb0e2",
      "revId": "1c26e254df5e466dd77c65882066afedee30013f",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "194e98f0_3025fc82",
        "filename": "src/encoding/gob/decode.go",
        "patchSetId": 2
      },
      "lineNbr": 567,
      "author": {
        "id": 5056
      },
      "writtenOn": "2017-04-10T20:13:51Z",
      "side": 1,
      "message": "We will come back with a spec change #19903 but the expectation for user code is that you pass the actual N that you plan to insert, not second-guess the runtime. So please just use the one line here and then assume the runtime will do a good job. If it doesn\u0027t do a good job, that can be a bug against the runtime, not gob.",
      "parentUuid": "0fb97f30_a13c6a61",
      "revId": "1c26e254df5e466dd77c65882066afedee30013f",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705",
      "unresolved": true
    }
  ]
}