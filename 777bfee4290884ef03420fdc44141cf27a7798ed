{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "50cc6c69_543688c9",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 5200
      },
      "writtenOn": "2024-10-02T15:46:01Z",
      "side": 1,
      "message": "Code looks ok, but I\u0027m not seeing the same performance improvements you did.\n\ngoos: darwin\ngoarch: arm64\npkg: runtime\ncpu: Apple M2 Ultra\n                │     base     │              experiment              │\n                │    sec/op    │    sec/op     vs base                │\nMemclr/5-24       2.174n ±  2%   2.131n ±  3%        ~ (p\u003d0.127 n\u003d10)\nMemclr/16-24      2.160n ±  2%   2.119n ±  2%   -1.90% (p\u003d0.012 n\u003d10)\nMemclr/64-24      2.177n ±  2%   2.164n ±  2%        ~ (p\u003d0.148 n\u003d10)\nMemclr/256-24     62.46n ± 25%   67.44n ± 21%        ~ (p\u003d0.669 n\u003d10)\nMemclr/4096-24    207.6n ±  1%   207.5n ±  0%        ~ (p\u003d0.724 n\u003d10)\nMemclr/65536-24   532.2n ±  3%   525.9n ±  2%        ~ (p\u003d0.739 n\u003d10)\nMemclr/1M-24      8.280µ ±  1%   8.530µ ±  2%   +3.02% (p\u003d0.001 n\u003d10)\nMemclr/4M-24      33.43µ ±  3%   33.97µ ±  2%        ~ (p\u003d0.165 n\u003d10)\nMemclr/8M-24      67.83µ ±  3%   68.58µ ±  2%        ~ (p\u003d0.631 n\u003d10)\nMemclr/16M-24     134.6µ ±  1%   135.4µ ±  1%        ~ (p\u003d0.256 n\u003d10)\nMemclr/64M-24     546.7µ ±  3%   549.4µ ±  3%        ~ (p\u003d0.393 n\u003d10)",
      "revId": "777bfee4290884ef03420fdc44141cf27a7798ed",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2a899ae3_3b483257",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 51184
      },
      "writtenOn": "2024-10-02T19:52:46Z",
      "side": 1,
      "message": "Thank you for checking it!\n\nI noticed that your result for the Memclr/256 case had a relatively high deviation, which may hide optimizations effect.\nAccording to the ARM optimization guides, recommendations for branch target \u0026 loops alignments on some CPU cores can be 16-bytes, while on others - it can be 32-bytes (E.g. Cortex-A75 vs Cortex-A76). \nMy experiments on different ARM CPUs have confirmed that one CPU performs better with 16-bytes alignment, another one shows even better results with 32-bytes alignment, and a third CPU has no tangible gains with both alignments.\n\nAccording to Apple Silicon CPU Optimization Guide, section 4.4.3 Branch Target Alignment: \"Because of the alignment capabilities, software alignment of branch targets is generallyunnecessary and sometimes detrimental.\"\nThis explains the results you have obtained.\n\nI have checked the results once again on currently available ARM system (Raspberri Pi5, BCM2712, Cortex-A76):\ngoos: linux\ngoarch: arm64\npkg: runtime\n               │    base      │                opt                   │\n               │    sec/op    │    sec/op     vs base                │\nMemclr/5-4       3.361n ±  0%   3.366n ±  1%        ~ (p\u003d0.092 n\u003d10)\nMemclr/16-4      2.704n ± 24%   2.780n ± 35%   +2.77% (p\u003d0.011 n\u003d10)\nMemclr/64-4      4.586n ±  0%   4.180n ±  2%   -8.85% (p\u003d0.000 n\u003d10)\nMemclr/256-4     8.341n ±  2%   7.506n ±  0%  -10.01% (p\u003d0.000 n\u003d10)\nMemclr/4096-4    57.48n ±  0%   57.43n ±  1%        ~ (p\u003d0.382 n\u003d10)\nMemclr/65536-4   860.6n ±  0%   860.2n ±  0%        ~ (p\u003d0.362 n\u003d10)\nMemclr/1M-4      22.65µ ±  6%   21.58µ ±  3%        ~ (p\u003d0.190 n\u003d10)\nMemclr/4M-4      214.3µ ±  2%   211.3µ ±  2%        ~ (p\u003d0.190 n\u003d10)\nMemclr/8M-4      575.5µ ±  1%   569.1µ ±  1%   -1.12% (p\u003d0.035 n\u003d10)\nMemclr/16M-4     1.297m ±  0%   1.307m ±  0%   +0.74% (p\u003d0.002 n\u003d10)\nMemclr/64M-4     5.667m ±  0%   5.657m ±  0%        ~ (p\u003d0.075 n\u003d10)\ngeomean          1.705µ         1.668µ         -2.15%\n\nAlso, I checked result for single CPU core (limited with taskset):\ngoos: linux\ngoarch: arm64\npkg: runtime\n             │   base1      │               opt1                  │\n             │    sec/op    │   sec/op     vs base                │\nMemclr/5       3.361n ±  2%   3.361n ± 0%        ~ (p\u003d0.834 n\u003d10)\nMemclr/16      2.712n ± 32%   2.735n ± 0%        ~ (p\u003d0.109 n\u003d10)\nMemclr/64      4.588n ±  0%   4.178n ± 0%   -8.94% (p\u003d0.000 n\u003d10)\nMemclr/256     8.342n ±  0%   7.507n ± 0%  -10.01% (p\u003d0.000 n\u003d10)\nMemclr/4096    56.90n ±  0%   56.90n ± 0%        ~ (p\u003d0.668 n\u003d10)\nMemclr/65536   860.2n ±  0%   858.9n ± 0%        ~ (p\u003d0.086 n\u003d10)\nMemclr/1M      22.30µ ±  2%   21.57µ ± 3%   -3.28% (p\u003d0.000 n\u003d10)\nMemclr/4M      209.9µ ±  5%   202.1µ ± 2%   -3.69% (p\u003d0.003 n\u003d10)\nMemclr/8M      569.9µ ±  1%   571.8µ ± 1%        ~ (p\u003d0.280 n\u003d10)\nMemclr/16M     1.299m ±  1%   1.297m ± 0%        ~ (p\u003d0.190 n\u003d10)\nMemclr/64M     5.665m ±  0%   5.673m ± 0%   +0.14% (p\u003d0.035 n\u003d10)\ngeomean        1.697µ         1.657µ        -2.33%",
      "parentUuid": "50cc6c69_543688c9",
      "revId": "777bfee4290884ef03420fdc44141cf27a7798ed",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "0ff5d449_d0380b7c",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 51184
      },
      "writtenOn": "2024-10-03T19:57:53Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "2a899ae3_3b483257",
      "revId": "777bfee4290884ef03420fdc44141cf27a7798ed",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    }
  ],
  "submitRequirementResults": [
    {
      "submitRequirement": {
        "name": "Code-Review",
        "description": {
          "value": "At least one Code-Review+2 is required. Self review is not allowed."
        },
        "applicabilityExpression": {},
        "submittabilityExpression": {
          "expressionString": "label:Code-Review\u003dMAX,user\u003dnon_uploader"
        },
        "overrideExpression": {},
        "allowOverrideInChildProjects": true
      },
      "applicabilityExpressionResult": {},
      "submittabilityExpressionResult": {
        "value": {"expression":{"expressionString":"label:Code-Review=MAX,user=non_uploader"},"status":"PASS","errorMessage":{"value":null},"passingAtoms":["label:Code-Review=MAX,user=non_uploader"],"failingAtoms":[]}
      },
      "overrideExpressionResult": {},
      "patchSetCommitId": "777bfee4290884ef03420fdc44141cf27a7798ed",
      "legacy": {
        "value": false
      },
      "forced": {},
      "hidden": {}
    },
    {
      "submitRequirement": {
        "name": "Do-Not-Review",
        "description": {
          "value": "Changes that have DO NOT REVIEW in their commit message are not submittable."
        },
        "applicabilityExpression": {
          "value": {
            "expressionString": "message:\"^.*(D|d)(O|o) (N|n)(O|o)(T|t) (R|r)(E|e)(V|v)(I|i)(E|e)(W|w).*\""
          }
        },
        "submittabilityExpression": {
          "expressionString": "is:false"
        },
        "overrideExpression": {},
        "allowOverrideInChildProjects": false
      },
      "applicabilityExpressionResult": {
        "value": {"expression":{"expressionString":"message:\"^.*(D|d)(O|o) (N|n)(O|o)(T|t) (R|r)(E|e)(V|v)(I|i)(E|e)(W|w).*\""},"status":"FAIL","errorMessage":{"value":null},"passingAtoms":[],"failingAtoms":["message:\"^.*(D|d)(O|o) (N|n)(O|o)(T|t) (R|r)(E|e)(V|v)(I|i)(E|e)(W|w).*\""]}
      },
      "submittabilityExpressionResult": {
        "value": {"expression":{"expressionString":"is:false"},"status":"NOT_EVALUATED","errorMessage":{"value":null},"passingAtoms":[],"failingAtoms":[]}
      },
      "overrideExpressionResult": {},
      "patchSetCommitId": "777bfee4290884ef03420fdc44141cf27a7798ed",
      "legacy": {
        "value": false
      },
      "forced": {},
      "hidden": {}
    },
    {
      "submitRequirement": {
        "name": "Do-Not-Submit",
        "description": {
          "value": "Changes that have DO NOT SUBMIT in their commit message are not submittable."
        },
        "applicabilityExpression": {
          "value": {
            "expressionString": "message:\"^.*(D|d)(O|o) (N|n)(O|o)(T|t) (S|s)(U|u)(B|b)(M|m)(I|i)(T|t).*\""
          }
        },
        "submittabilityExpression": {
          "expressionString": "is:false"
        },
        "overrideExpression": {},
        "allowOverrideInChildProjects": false
      },
      "applicabilityExpressionResult": {
        "value": {"expression":{"expressionString":"message:\"^.*(D|d)(O|o) (N|n)(O|o)(T|t) (S|s)(U|u)(B|b)(M|m)(I|i)(T|t).*\""},"status":"FAIL","errorMessage":{"value":null},"passingAtoms":[],"failingAtoms":["message:\"^.*(D|d)(O|o) (N|n)(O|o)(T|t) (S|s)(U|u)(B|b)(M|m)(I|i)(T|t).*\""]}
      },
      "submittabilityExpressionResult": {
        "value": {"expression":{"expressionString":"is:false"},"status":"NOT_EVALUATED","errorMessage":{"value":null},"passingAtoms":[],"failingAtoms":[]}
      },
      "overrideExpressionResult": {},
      "patchSetCommitId": "777bfee4290884ef03420fdc44141cf27a7798ed",
      "legacy": {
        "value": false
      },
      "forced": {},
      "hidden": {}
    },
    {
      "submitRequirement": {
        "name": "Legacy-TryBots-Pass",
        "description": {
          "value": "Legacy TryBots must pass if requested, unless TryBot-Bypass+1 is set."
        },
        "applicabilityExpression": {
          "value": {
            "expressionString": "label:Run-TryBot\u003dMAX"
          }
        },
        "submittabilityExpression": {
          "expressionString": "label:TryBot-Result\u003dMAX"
        },
        "overrideExpression": {
          "value": {
            "expressionString": "label:TryBot-Bypass\u003dMAX"
          }
        },
        "allowOverrideInChildProjects": true
      },
      "applicabilityExpressionResult": {
        "value": {"expression":{"expressionString":"label:Run-TryBot=MAX"},"status":"FAIL","errorMessage":{"value":null},"passingAtoms":[],"failingAtoms":["label:Run-TryBot=MAX"]}
      },
      "submittabilityExpressionResult": {
        "value": {"expression":{"expressionString":"label:TryBot-Result=MAX"},"status":"NOT_EVALUATED","errorMessage":{"value":null},"passingAtoms":[],"failingAtoms":[]}
      },
      "overrideExpressionResult": {
        "value": {"expression":{"expressionString":"label:TryBot-Bypass=MAX"},"status":"NOT_EVALUATED","errorMessage":{"value":null},"passingAtoms":[],"failingAtoms":[]}
      },
      "patchSetCommitId": "777bfee4290884ef03420fdc44141cf27a7798ed",
      "legacy": {
        "value": false
      },
      "forced": {},
      "hidden": {}
    },
    {
      "submitRequirement": {
        "name": "Matching-Subject-Prefix",
        "description": {
          "value": "Changes on release branches must have a matching [release-branch.go1.nn] subject prefix."
        },
        "applicabilityExpression": {
          "value": {
            "expressionString": "branch:\"^refs/heads/release-branch.+\" -prefixsubject:\"[release-branch\""
          }
        },
        "submittabilityExpression": {
          "expressionString": "is:false"
        },
        "overrideExpression": {},
        "allowOverrideInChildProjects": true
      },
      "applicabilityExpressionResult": {
        "value": {"expression":{"expressionString":"branch:\"^refs/heads/release-branch.+\" -prefixsubject:\"[release-branch\""},"status":"FAIL","errorMessage":{"value":null},"passingAtoms":[],"failingAtoms":["branch:\"^refs/heads/release-branch.+\"","prefixsubject:\"[release-branch\""]}
      },
      "submittabilityExpressionResult": {
        "value": {"expression":{"expressionString":"is:false"},"status":"NOT_EVALUATED","errorMessage":{"value":null},"passingAtoms":[],"failingAtoms":[]}
      },
      "overrideExpressionResult": {},
      "patchSetCommitId": "777bfee4290884ef03420fdc44141cf27a7798ed",
      "legacy": {
        "value": false
      },
      "forced": {},
      "hidden": {}
    },
    {
      "submitRequirement": {
        "name": "No-Holds",
        "description": {
          "value": "Changes with a Hold+1 vote are not submittable."
        },
        "applicabilityExpression": {
          "value": {
            "expressionString": "label:Hold\u003d1"
          }
        },
        "submittabilityExpression": {
          "expressionString": "is:false"
        },
        "overrideExpression": {},
        "allowOverrideInChildProjects": false
      },
      "applicabilityExpressionResult": {
        "value": {"expression":{"expressionString":"label:Hold=1"},"status":"FAIL","errorMessage":{"value":null},"passingAtoms":[],"failingAtoms":["label:Hold=1"]}
      },
      "submittabilityExpressionResult": {
        "value": {"expression":{"expressionString":"is:false"},"status":"NOT_EVALUATED","errorMessage":{"value":null},"passingAtoms":[],"failingAtoms":[]}
      },
      "overrideExpressionResult": {},
      "patchSetCommitId": "777bfee4290884ef03420fdc44141cf27a7798ed",
      "legacy": {
        "value": false
      },
      "forced": {},
      "hidden": {}
    },
    {
      "submitRequirement": {
        "name": "No-Signed-off-by-Footer",
        "description": {
          "value": "Changes with a Signed-off-by footer are not submittable. See https://go.dev/wiki/CommitMessage."
        },
        "applicabilityExpression": {
          "value": {
            "expressionString": "hasfooter:Signed-off-by"
          }
        },
        "submittabilityExpression": {
          "expressionString": "is:false"
        },
        "overrideExpression": {},
        "allowOverrideInChildProjects": false
      },
      "applicabilityExpressionResult": {
        "value": {"expression":{"expressionString":"hasfooter:Signed-off-by"},"status":"FAIL","errorMessage":{"value":null},"passingAtoms":[],"failingAtoms":["hasfooter:Signed-off-by"]}
      },
      "submittabilityExpressionResult": {
        "value": {"expression":{"expressionString":"is:false"},"status":"NOT_EVALUATED","errorMessage":{"value":null},"passingAtoms":[],"failingAtoms":[]}
      },
      "overrideExpressionResult": {},
      "patchSetCommitId": "777bfee4290884ef03420fdc44141cf27a7798ed",
      "legacy": {
        "value": false
      },
      "forced": {},
      "hidden": {}
    },
    {
      "submitRequirement": {
        "name": "No-Unresolved-Comments",
        "description": {
          "value": "Changes that have unresolved comments are not submittable, unless overriden by adding the hashtag allow-unresolved-comments."
        },
        "applicabilityExpression": {},
        "submittabilityExpression": {
          "expressionString": "-has:unresolved"
        },
        "overrideExpression": {
          "value": {
            "expressionString": "hashtag:allow-unresolved-comments"
          }
        },
        "allowOverrideInChildProjects": false
      },
      "applicabilityExpressionResult": {},
      "submittabilityExpressionResult": {
        "value": {"expression":{"expressionString":"-has:unresolved"},"status":"PASS","errorMessage":{"value":null},"passingAtoms":[],"failingAtoms":["has:unresolved"]}
      },
      "overrideExpressionResult": {
        "value": {"expression":{"expressionString":"hashtag:allow-unresolved-comments"},"status":"FAIL","errorMessage":{"value":null},"passingAtoms":[],"failingAtoms":["hashtag:allow-unresolved-comments"]}
      },
      "patchSetCommitId": "777bfee4290884ef03420fdc44141cf27a7798ed",
      "legacy": {
        "value": false
      },
      "forced": {},
      "hidden": {}
    },
    {
      "submitRequirement": {
        "name": "No-Wait-Release",
        "description": {
          "value": "Changes with the hashtag wait-release cannot be submitted."
        },
        "applicabilityExpression": {
          "value": {
            "expressionString": "hashtag:wait-release"
          }
        },
        "submittabilityExpression": {
          "expressionString": "is:false"
        },
        "overrideExpression": {},
        "allowOverrideInChildProjects": true
      },
      "applicabilityExpressionResult": {
        "value": {"expression":{"expressionString":"hashtag:wait-release"},"status":"FAIL","errorMessage":{"value":null},"passingAtoms":[],"failingAtoms":["hashtag:wait-release"]}
      },
      "submittabilityExpressionResult": {
        "value": {"expression":{"expressionString":"is:false"},"status":"NOT_EVALUATED","errorMessage":{"value":null},"passingAtoms":[],"failingAtoms":[]}
      },
      "overrideExpressionResult": {},
      "patchSetCommitId": "777bfee4290884ef03420fdc44141cf27a7798ed",
      "legacy": {
        "value": false
      },
      "forced": {},
      "hidden": {}
    },
    {
      "submitRequirement": {
        "name": "Review-Enforcement",
        "description": {
          "value": "Two Google employees must approve the change. Uploading the change or voting positively on Code-Review count as approval. Using a trusted device is required, see go/gerrit-onboarding#review-enforcement."
        },
        "applicabilityExpression": {
          "value": {
            "expressionString": "is:review-enforced_gerrit"
          }
        },
        "submittabilityExpression": {
          "expressionString": "is:review-enforcement-satisfied_gerrit"
        },
        "overrideExpression": {},
        "allowOverrideInChildProjects": false
      },
      "applicabilityExpressionResult": {
        "value": {"expression":{"expressionString":"is:review-enforced_gerrit"},"status":"PASS","errorMessage":{"value":null},"passingAtoms":["is:review-enforced_gerrit"],"failingAtoms":[]}
      },
      "submittabilityExpressionResult": {
        "value": {"expression":{"expressionString":"is:review-enforcement-satisfied_gerrit"},"status":"PASS","errorMessage":{"value":null},"passingAtoms":["is:review-enforcement-satisfied_gerrit"],"failingAtoms":[]}
      },
      "overrideExpressionResult": {},
      "patchSetCommitId": "777bfee4290884ef03420fdc44141cf27a7798ed",
      "legacy": {
        "value": false
      },
      "forced": {},
      "hidden": {}
    },
    {
      "submitRequirement": {
        "name": "TryBots-Pass",
        "description": {
          "value": "Changes must pass LUCI TryBots unless TryBot-Bypass+1 is set. Vote Commit-Queue+1 to trigger TryBots."
        },
        "applicabilityExpression": {
          "value": {
            "expressionString": "-branch:refs/meta/config"
          }
        },
        "submittabilityExpression": {
          "expressionString": "label:LUCI-TryBot-Result\u003dMAX"
        },
        "overrideExpression": {
          "value": {
            "expressionString": "label:TryBot-Bypass\u003dMAX"
          }
        },
        "allowOverrideInChildProjects": true
      },
      "applicabilityExpressionResult": {
        "value": {"expression":{"expressionString":"-branch:refs/meta/config"},"status":"PASS","errorMessage":{"value":null},"passingAtoms":[],"failingAtoms":["branch:refs/meta/config"]}
      },
      "submittabilityExpressionResult": {
        "value": {"expression":{"expressionString":"label:LUCI-TryBot-Result=MAX"},"status":"PASS","errorMessage":{"value":null},"passingAtoms":["label:LUCI-TryBot-Result=MAX"],"failingAtoms":[]}
      },
      "overrideExpressionResult": {
        "value": {"expression":{"expressionString":"label:TryBot-Bypass=MAX"},"status":"FAIL","errorMessage":{"value":null},"passingAtoms":[],"failingAtoms":["label:TryBot-Bypass=MAX"]}
      },
      "patchSetCommitId": "777bfee4290884ef03420fdc44141cf27a7798ed",
      "legacy": {
        "value": false
      },
      "forced": {},
      "hidden": {}
    }
  ]
}