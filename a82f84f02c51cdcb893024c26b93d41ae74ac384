{
  "comments": [
    {
      "key": {
        "uuid": "1654530d_9af11d60",
        "filename": "src/bytes/bytes_test.go",
        "patchSetId": 4
      },
      "lineNbr": 359,
      "author": {
        "id": 5065
      },
      "writtenOn": "2016-09-06T16:26:41Z",
      "side": 1,
      "message": "I don\u0027t like the look of that []byte(string) conversion (which used to be an allocation!) in a test about not having allocation. At best it\u0027s misleading.\n\nLets move that []byte outside the func, so the test is more clear:\n\n    haystack :\u003d []byte(\"test世界\")\n    allocs :\u003d testing.AllocsPerRun(1000, func() {\n          if i :\u003d IndexRune(haystack, \u0027s\u0027); i !\u003d 2 {\n                t.Fatalf(\"\u0027s\u0027 at %d; want 2\", i)\n          }\n          if IndexRune(haystack, \u0027世\u0027) !\u003d 4 {\n                t.Fatalf(\"\u0027世\u0027 at %d; want 4\", i)\n          }\n    })\n\n(And use the result of IndexRune so it\u0027s not optimized away in the future)",
      "revId": "a82f84f02c51cdcb893024c26b93d41ae74ac384",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705",
      "unresolved": false
    }
  ]
}