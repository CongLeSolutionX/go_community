{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "5c80006e_66a6fbff",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 13,
      "author": {
        "id": 31647
      },
      "writtenOn": "2024-08-16T17:14:39Z",
      "side": 1,
      "message": "I don\u0027t think this is accurate: we could make the changes in x/tools first.: I don\u0027t think the compiler ever reads export data written by x/tools, and since there is no writer of the indexed format in the compiler, tools cannot read indexed data from the compiler!",
      "range": {
        "startLine": 12,
        "startChar": 0,
        "endLine": 13,
        "endChar": 35
      },
      "revId": "2fc727e75dd2acaa7d8997315ba9d2f870439d89",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "f16ad6c1_25ae4042",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 13,
      "author": {
        "id": 44473
      },
      "writtenOn": "2024-08-16T21:51:44Z",
      "side": 1,
      "message": "I removed the offending comment. It is not very helpful to future readers anyways.\n\nThe concern isn\u0027t the compiler, it is the go/ stdlib packages like go/types. I am still looking into this, and I have made some minor progress.\n\nWith this CL, the test TestWriteTypeParameterizedAliases in the file internal/gcimporter/iexport_test.go  in the CL https://go.dev/cl/606335 for x/tools passes.\n\nThis proves that the iimport.go code in go/internal/ is not dead and x/tools + a theoretical user rely on it. However, a user would need to break API encapsulation twice to do exactly what I did:\n(1) write an undocumented magic file header, and\n(2) use x/tools/internal.\nI can\u0027t imagine we promise either step should work. There might be other paths to get the equivalent though.\n\nNone of this contradicts your core claim that no tools actually do this so we are fine :)\n\nNeeds more thought.",
      "parentUuid": "5c80006e_66a6fbff",
      "range": {
        "startLine": 12,
        "startChar": 0,
        "endLine": 13,
        "endChar": 35
      },
      "revId": "2fc727e75dd2acaa7d8997315ba9d2f870439d89",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8b7d60c6_4027063d",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 31647
      },
      "writtenOn": "2024-08-16T14:14:22Z",
      "side": 1,
      "message": "Sorry, I don\u0027t understand this change. Why does the compiler need an indexed importer? I thought we were deleting all but the unified import / export.",
      "revId": "2fc727e75dd2acaa7d8997315ba9d2f870439d89",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a28145d3_3e8177bb",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 44473
      },
      "writtenOn": "2024-08-16T16:55:37Z",
      "side": 1,
      "message": "\u003e Why does the compiler need an indexed importer?\n\ntl;dr it unblocks progress on other things.\n\nAs nice as it would be to eliminate tech debt today, it is not needed to wrap up https://go.dev/issue/68778. ATM I am racing against the next x/tools release in early September, that is in order to give ~2 week-1 month of presubmit trybot testing with type parameterized aliases always on, so that the goexperiment can switch its default during the middle of the thaw. We can clean up tech debt later.\n\nTo eliminate either we need to prove they are dead or if alive file a proposal to deprecate.\n\n`src/cmd/compile/internal/importer/iimport.go` seems dead and can probably go. \n\n`src/go/internal/gcimporter/iimport.go` requires more investigation. It may be possible to point go/types of a new tool to parse an index file created by an older compiler. So more investigation and maybe a proposal. Ongoing.\n\nSo why not delete `src/cmd/compile/internal/importer/iimport.go` today? Basically it is easier on me to keep the 3 copies in sync.",
      "parentUuid": "8b7d60c6_4027063d",
      "revId": "2fc727e75dd2acaa7d8997315ba9d2f870439d89",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "0a1dc264_fe7e912e",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 31647
      },
      "writtenOn": "2024-08-16T17:14:39Z",
      "side": 1,
      "message": "Ack, SGTM. Thanks for the explanation.\n\nChange LGTM.",
      "parentUuid": "a28145d3_3e8177bb",
      "revId": "2fc727e75dd2acaa7d8997315ba9d2f870439d89",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    }
  ]
}