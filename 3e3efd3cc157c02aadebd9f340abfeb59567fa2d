{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "d056936b_d0b8cc1c",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 5070
      },
      "writtenOn": "2021-03-05T22:06:36Z",
      "side": 1,
      "message": "Thank you for fixing this.\n\nLGTM but one suggestion.\n\nAlex",
      "revId": "3e3efd3cc157c02aadebd9f340abfeb59567fa2d",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6eec234a_85868da9",
        "filename": "src/runtime/rt0_windows_amd64.s",
        "patchSetId": 2
      },
      "lineNbr": 20,
      "author": {
        "id": 5070
      },
      "writtenOn": "2021-03-05T22:06:36Z",
      "side": 1,
      "message": "Should we do\n\nANDQ    $~15, SP        // alignment as per Windows requirement\n\nsimilar to runtime.usleep2 to make this work regardless of what our current stack is?",
      "revId": "3e3efd3cc157c02aadebd9f340abfeb59567fa2d",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c40b3a26_99ef42c0",
        "filename": "src/runtime/rt0_windows_amd64.s",
        "patchSetId": 2
      },
      "lineNbr": 20,
      "author": {
        "id": 50463
      },
      "writtenOn": "2021-03-08T03:22:40Z",
      "side": 1,
      "message": "The runtime.usleep2 case is calling Windows API from g0 (go stack). While _rt0_amd64_windows_lib is put into init array, like __attribute__((constructor)), and called by C runtime, I don\u0027t think we need to re-align the stack.",
      "parentUuid": "6eec234a_85868da9",
      "revId": "3e3efd3cc157c02aadebd9f340abfeb59567fa2d",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "068a9c89_c183edba",
        "filename": "src/runtime/rt0_windows_amd64.s",
        "patchSetId": 2
      },
      "lineNbr": 20,
      "author": {
        "id": 5070
      },
      "writtenOn": "2021-03-09T09:34:39Z",
      "side": 1,
      "message": "I just looked at git history of this source file. And the change was introduced by\n\nhttps://go-review.googlesource.com/c/go/+/168351\n\nThe change was to\n\n// Leave space for four pointers on the stack as required\n// by the Windows amd64 calling convention.\n\nand you want to remove their change.\n\nI suspect you will revert their fix, and break their program.\n\nSo, please, leave everything as is, and just add alignment that you require.\n\nBasically do what I suggested at\n\nhttps://github.com/golang/go/issues/41075#issuecomment-691435028\n\nThank you.",
      "parentUuid": "c40b3a26_99ef42c0",
      "revId": "3e3efd3cc157c02aadebd9f340abfeb59567fa2d",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a5337aaa_14eb1758",
        "filename": "src/runtime/rt0_windows_amd64.s",
        "patchSetId": 2
      },
      "lineNbr": 20,
      "author": {
        "id": 50463
      },
      "writtenOn": "2021-03-09T10:00:11Z",
      "side": 1,
      "message": "I have learned CL 168351 carefully before submitting my change.\n\nThe change introduced in CL 168351 increased frame size from 0x28 to 0x48 to reserve a scratch area of 4 GPRs at the top of the stack frame, which is required by ABI.\n\nYou can find documentation about this homing area at https://docs.microsoft.com/en-us/cpp/build/stack-usage#stack-allocation, and its design purpose at https://devblogs.microsoft.com/oldnewthing/20160623-00/?p\u003d93735.\n\nMy change reduced frame size from 0x48 to 0x20 by removing redundant register save/restore. The scratch area is still reserved and conformant to ABI. That\u0027s why I kept the two-line comment there. And I don\u0027t think my change will break their program.\n\nThank you.",
      "parentUuid": "068a9c89_c183edba",
      "revId": "3e3efd3cc157c02aadebd9f340abfeb59567fa2d",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    }
  ]
}