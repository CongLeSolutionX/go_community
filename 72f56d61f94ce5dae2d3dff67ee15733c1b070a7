{
  "comments": [
    {
      "key": {
        "uuid": "e152a0c5_83c59e2a",
        "filename": "src/net/http/server.go",
        "patchSetId": 1
      },
      "lineNbr": 919,
      "author": {
        "id": 10820
      },
      "writtenOn": "2016-10-26T00:12:09Z",
      "side": 1,
      "message": "This will ~always be true unless you use the same time.Now() for hdrDeadline and wholeReqDeadline.",
      "revId": "72f56d61f94ce5dae2d3dff67ee15733c1b070a7",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c17d9c54_82895a09",
        "filename": "src/net/http/server.go",
        "patchSetId": 1
      },
      "lineNbr": 919,
      "author": {
        "id": 5065
      },
      "writtenOn": "2016-10-26T00:40:32Z",
      "side": 1,
      "message": "Good catch. Done.",
      "parentUuid": "e152a0c5_83c59e2a",
      "revId": "72f56d61f94ce5dae2d3dff67ee15733c1b070a7",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e152a0c5_e3c0121c",
        "filename": "src/net/http/server.go",
        "patchSetId": 1
      },
      "lineNbr": 1730,
      "author": {
        "id": 10820
      },
      "writtenOn": "2016-10-26T00:12:09Z",
      "side": 1,
      "message": "Won\u0027t this override the idle timeout set above, at line 1725? I think the test is working because readRequest sets the timeout via ReadHeaderTimeout or ReadTimeout when the loop continues. The timeout semantics are a bit murky. For http (not https), we have this timeline:\n\n1. TCP connection setup\n\n2. First byte of the request header\n3. Last byte of the request header\n4. Last byte of the request body\n\n5. First byte of the next request header\n6. Last byte of the next request header\n7. Last byte of the next request body\n\netc.\n\nI think ReadHeaderTimeout should be 1-\u003e3 and 5-\u003e6, while IdleTimeout is 4-\u003e5. Does that sound right? I don\u0027t think that is what\u0027s implemented.",
      "revId": "72f56d61f94ce5dae2d3dff67ee15733c1b070a7",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c17d9c54_a2965e27",
        "filename": "src/net/http/server.go",
        "patchSetId": 1
      },
      "lineNbr": 1730,
      "author": {
        "id": 5065
      },
      "writtenOn": "2016-10-26T00:40:32Z",
      "side": 1,
      "message": "No. Line 1725\u0027s timeout only is meant to apply to the peek on line 1726.",
      "parentUuid": "e152a0c5_e3c0121c",
      "revId": "72f56d61f94ce5dae2d3dff67ee15733c1b070a7",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e152a0c5_43b006c5",
        "filename": "src/net/http/server.go",
        "patchSetId": 1
      },
      "lineNbr": 1730,
      "author": {
        "id": 10820
      },
      "writtenOn": "2016-10-26T00:41:14Z",
      "side": 1,
      "message": "Simpler:\n\n1. TCP connection setup\n\n2. First byte of the request header\n3. Last byte of the request header\n4. Last byte of the request body\n5. Last byte of the response body sent\n\n6. First byte of the next request header\n7. Last byte of the next request header\n8. Last byte of the next request body\n9. Last byte of the next response body sent\n\netc.\n\nReadHeaderTimeout \u003d 2-\u003e3, 6-\u003e7\nReadTimeout \u003d 2-\u003e4, 6-\u003e8\nIdleTimeout \u003d 1-\u003e2, 5-\u003e6",
      "parentUuid": "e152a0c5_e3c0121c",
      "revId": "72f56d61f94ce5dae2d3dff67ee15733c1b070a7",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c1e11c42_22a86e60",
        "filename": "src/net/http/server.go",
        "patchSetId": 1
      },
      "lineNbr": 1730,
      "author": {
        "id": 10820
      },
      "writtenOn": "2016-10-26T00:42:08Z",
      "side": 1,
      "message": "Ah so that does implement what I expected. Got it, thanks!",
      "parentUuid": "e152a0c5_43b006c5",
      "revId": "72f56d61f94ce5dae2d3dff67ee15733c1b070a7",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c17d9c54_42a83261",
        "filename": "src/net/http/server.go",
        "patchSetId": 1
      },
      "lineNbr": 1730,
      "author": {
        "id": 5065
      },
      "writtenOn": "2016-10-26T00:42:29Z",
      "side": 1,
      "message": "Yes to all of that, except for IdleTimeout is only 5-\u003e6, not 1-\u003e2.\n\nThere is no IdleTimeout for the first request.",
      "parentUuid": "e152a0c5_43b006c5",
      "revId": "72f56d61f94ce5dae2d3dff67ee15733c1b070a7",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705",
      "unresolved": false
    }
  ]
}