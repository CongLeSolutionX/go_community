{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "9c60f2b7_60d5d612",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 5056
      },
      "writtenOn": "2021-04-16T18:11:31Z",
      "side": 1,
      "message": "Will upload shortly.\n",
      "revId": "741a72f635cd741e8ab4d9445e3f7eb7b61670f6",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "248c0c73_ab255a48",
        "filename": "src/cmd/compile/internal/ssa/rewrite386.go",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 5167
      },
      "writtenOn": "2021-04-16T17:26:02Z",
      "side": 1,
      "message": "I think you clobbered the generated rewrite*.go files. You need to change objabi -\u003e buildcfg in gen/*.rules, update gen/*.go for the imports, and rerun gen/*.go.",
      "revId": "741a72f635cd741e8ab4d9445e3f7eb7b61670f6",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "70056339_dda1b6a7",
        "filename": "src/cmd/compile/internal/ssa/rewrite386.go",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 5056
      },
      "writtenOn": "2021-04-16T18:11:31Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "248c0c73_ab255a48",
      "revId": "741a72f635cd741e8ab4d9445e3f7eb7b61670f6",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a89f69fe_a08c4da3",
        "filename": "src/cmd/dist/buildruntime.go",
        "patchSetId": 2
      },
      "lineNbr": 49,
      "author": {
        "id": 5167
      },
      "writtenOn": "2021-04-16T17:39:18Z",
      "side": 1,
      "message": "Missing defaultGO_LDSO. I\u0027m not sure this comment really has much value, though, and it seems like it\u0027s asking to get out of sync with the code.",
      "revId": "741a72f635cd741e8ab4d9445e3f7eb7b61670f6",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "734a7fcf_c329f70f",
        "filename": "src/cmd/dist/buildruntime.go",
        "patchSetId": 2
      },
      "lineNbr": 49,
      "author": {
        "id": 5056
      },
      "writtenOn": "2021-04-16T18:11:31Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "a89f69fe_a08c4da3",
      "revId": "741a72f635cd741e8ab4d9445e3f7eb7b61670f6",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0a637a6e_2555d203",
        "filename": "src/cmd/go/main.go",
        "patchSetId": 2
      },
      "lineNbr": 148,
      "author": {
        "id": 5167
      },
      "writtenOn": "2021-04-16T17:39:18Z",
      "side": 1,
      "message": "buildcfg.Check could take the command name as an argument and then you could use it here.",
      "revId": "741a72f635cd741e8ab4d9445e3f7eb7b61670f6",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "d42f945f_21f6e320",
        "filename": "src/cmd/go/main.go",
        "patchSetId": 2
      },
      "lineNbr": 148,
      "author": {
        "id": 5056
      },
      "writtenOn": "2021-04-16T18:11:31Z",
      "side": 1,
      "message": "buildcfg.Check does the same thing in this case, but I wrote it this way just so that any future changes to go command error messages know to edit this code.\nbuildcfg.Check is just a nicety for other programs.",
      "parentUuid": "0a637a6e_2555d203",
      "revId": "741a72f635cd741e8ab4d9445e3f7eb7b61670f6",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1458cc39_a9e99d8e",
        "filename": "src/internal/buildcfg/cfg.go",
        "patchSetId": 2
      },
      "lineNbr": 41,
      "author": {
        "id": 5167
      },
      "writtenOn": "2021-04-16T17:39:18Z",
      "side": 1,
      "message": "It seems like it would be really easy to forget to call this. Like, I\u0027m not at all sure we\u0027re currently checking Error in all of the necessary binaries. Though I\u0027m not sure what the right answer is. We changed GOEXPERIMENT to a function. Maybe we should change all of these to functions?",
      "revId": "741a72f635cd741e8ab4d9445e3f7eb7b61670f6",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ed2898d4_7ac6604c",
        "filename": "src/internal/buildcfg/cfg.go",
        "patchSetId": 2
      },
      "lineNbr": 41,
      "author": {
        "id": 5056
      },
      "writtenOn": "2021-04-16T18:11:31Z",
      "side": 1,
      "message": "We don\u0027t have that many binaries: cmd/go alone would take care of open source use,\nand doing cmd/asm, cmd/compile, and cmd/link takes care of non-standard builds\nlike bazel.\n\nI\u0027m confused what other binaries you are considering.\n\nIt\u0027s difficult to change these to functions because they are used to initialize globals in other programs. There\u0027d be a ton more error checking.",
      "parentUuid": "1458cc39_a9e99d8e",
      "revId": "741a72f635cd741e8ab4d9445e3f7eb7b61670f6",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8fe7a69a_20ad8e9a",
        "filename": "src/internal/buildcfg/cfg.go",
        "patchSetId": 2
      },
      "lineNbr": 41,
      "author": {
        "id": 5167
      },
      "writtenOn": "2021-04-16T18:50:07Z",
      "side": 1,
      "message": "I guess I\u0027m not quite sure where the line is. Does any binary that uses GOARM/GOMIPS/etc have to make sure it calls Check (or checks Error)? For example, does cmd/cgo have to call Check because it uses GOMIPS, or do we lean on the assumption that it will only be invoked by a build system that also checks? Perhaps I\u0027d just like to see the comment on Error or Check give guidance on where it should be called. (FTR, cmd/cgo is the only thing I found that references one of these globals without checking the error.)\n\n\u003e It\u0027s difficult to change these to functions because they are used to initialize globals in other programs. There\u0027d be a ton more error checking.\n\nMaybe this is too gross, but I was thinking that as functions they would log.Fatal (like before). Making them functions would simply delay that check until when and if they were actually used. You\u0027d probably still parse and initialize everything at buildcfg init time, and the functions would check the error and return the pre-parsed value.",
      "parentUuid": "ed2898d4_7ac6604c",
      "revId": "741a72f635cd741e8ab4d9445e3f7eb7b61670f6",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "60c404f3_3bf4f912",
        "filename": "src/internal/buildcfg/cfg.go",
        "patchSetId": 2
      },
      "lineNbr": 70,
      "author": {
        "id": 5167
      },
      "writtenOn": "2021-04-16T17:39:18Z",
      "side": 1,
      "message": "Could crash with out of bounds. I\u0027m not sure there\u0027s much value in trying to come up with an answer if it\u0027s not one we recognize.",
      "revId": "741a72f635cd741e8ab4d9445e3f7eb7b61670f6",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "3e22b241_c9658a23",
        "filename": "src/internal/buildcfg/cfg.go",
        "patchSetId": 2
      },
      "lineNbr": 70,
      "author": {
        "id": 5056
      },
      "writtenOn": "2021-04-16T18:11:31Z",
      "side": 1,
      "message": "No, def is either defaultGOARM or \"7\".",
      "parentUuid": "60c404f3_3bf4f912",
      "revId": "741a72f635cd741e8ab4d9445e3f7eb7b61670f6",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2d18abbd_dd61ce65",
        "filename": "src/internal/buildcfg/cfg.go",
        "patchSetId": 2
      },
      "lineNbr": 99,
      "author": {
        "id": 5167
      },
      "writtenOn": "2021-04-16T17:39:18Z",
      "side": 1,
      "message": "Could crash with out of bounds",
      "revId": "741a72f635cd741e8ab4d9445e3f7eb7b61670f6",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "5267fea2_18b97481",
        "filename": "src/internal/buildcfg/cfg.go",
        "patchSetId": 2
      },
      "lineNbr": 99,
      "author": {
        "id": 5056
      },
      "writtenOn": "2021-04-16T18:11:31Z",
      "side": 1,
      "message": "Same: defaultGOPPC64 should be \"power8\" or \"power9\".",
      "parentUuid": "2d18abbd_dd61ce65",
      "revId": "741a72f635cd741e8ab4d9445e3f7eb7b61670f6",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f039857a_6b2297ac",
        "filename": "src/internal/goexperiment/flags.go",
        "patchSetId": 2
      },
      "lineNbr": 42,
      "author": {
        "id": 5167
      },
      "writtenOn": "2021-04-16T17:39:18Z",
      "side": 1,
      "message": "buildcfg?",
      "range": {
        "startLine": 42,
        "startChar": 39,
        "endLine": 42,
        "endChar": 45
      },
      "revId": "741a72f635cd741e8ab4d9445e3f7eb7b61670f6",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "6d88f7b6_7d7f4676",
        "filename": "src/internal/goexperiment/flags.go",
        "patchSetId": 2
      },
      "lineNbr": 42,
      "author": {
        "id": 5056
      },
      "writtenOn": "2021-04-16T18:11:31Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "f039857a_6b2297ac",
      "range": {
        "startLine": 42,
        "startChar": 39,
        "endLine": 42,
        "endChar": 45
      },
      "revId": "741a72f635cd741e8ab4d9445e3f7eb7b61670f6",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    }
  ]
}