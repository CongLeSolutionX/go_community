{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "689ffd08_2d34c593",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 33992
      },
      "writtenOn": "2021-02-15T15:02:21Z",
      "side": 1,
      "message": "I\u0027m not very experienced with the HTTP/1.1 spec, so feel free to correct me.\n\nAfter looking into the RFC, and how other popular tools (cURL, Firefox, Chrome) are handling Referer headers, I tried to replicate the behavior of _not_ overriding the header with the last request\u0027s URL, but respecting its value if it is set.\n\nI understand the spec is a little vague, but it does mention the following at https://tools.ietf.org/html/rfc7231#section-5.5.2\n\n\u003e An intermediary SHOULD NOT modify or delete the Referer header field when the field value shares the same scheme and host as the request target.\n\nAnother solution would be to implement this weaker check for lastReq\u0027s and newReq\u0027s scheme and host, but the aforementioned tools maintain the header even when redirecting to different domains.",
      "revId": "1147a51741a60d86377d7ac3e343fcc28196bf53",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "7a0620d8_5ec6f138",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 33992
      },
      "writtenOn": "2021-04-11T21:58:03Z",
      "side": 1,
      "message": "Sorry for the ping, but could I get a review on this when there\u0027s some time? Thanks a lot in advance!",
      "revId": "1147a51741a60d86377d7ac3e343fcc28196bf53",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c8b68ad1_a894d4d0",
        "filename": "src/net/http/client.go",
        "patchSetId": 1
      },
      "lineNbr": 145,
      "author": {
        "id": 5065
      },
      "writtenOn": "2021-04-16T16:16:51Z",
      "side": 1,
      "message": "document lastRef?\n\nBut is this really \"last\"? It\u0027s more \"explicit Referer\" from the original HTTP request the user sent out, right? Is it ever the case that lastRef is non-empty and not the original explicit referer that was set from the user\u0027s http.Request?",
      "revId": "1147a51741a60d86377d7ac3e343fcc28196bf53",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "588a9446_eb6de5c3",
        "filename": "src/net/http/client.go",
        "patchSetId": 1
      },
      "lineNbr": 145,
      "author": {
        "id": 33992
      },
      "writtenOn": "2021-04-17T19:45:08Z",
      "side": 1,
      "message": "If you mean a part of the redirect chain \u0027hijacking/modifying\u0027 the Referer header, I\u0027ve never seen that happen. So \u0027explicit\u0027 is a better name indeed.\n\nI\u0027ve changed the variable name and updated the docstring to provide some clarity, please let me know what you think!",
      "parentUuid": "c8b68ad1_a894d4d0",
      "revId": "1147a51741a60d86377d7ac3e343fcc28196bf53",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "eb3eb965_6eb87f3a",
        "filename": "src/net/http/client_test.go",
        "patchSetId": 1
      },
      "lineNbr": 1413,
      "author": {
        "id": 5065
      },
      "writtenOn": "2021-04-16T16:16:51Z",
      "side": 1,
      "message": "The unkeyed structs with all the same types were borderline dubious before but with 4 unkeyed strings in a row, this gets a little hard to read \u0026 easy to transpose things.\n\nType to add field names to these and omit lastRef when it\u0027s empty.",
      "revId": "1147a51741a60d86377d7ac3e343fcc28196bf53",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "be2c6d19_b62a8efa",
        "filename": "src/net/http/client_test.go",
        "patchSetId": 1
      },
      "lineNbr": 1413,
      "author": {
        "id": 33992
      },
      "writtenOn": "2021-04-17T19:45:08Z",
      "side": 1,
      "message": "You\u0027re right; done. I didn\u0027t omit the `want` field so it\u0027s more obvious what the test result should be.",
      "parentUuid": "eb3eb965_6eb87f3a",
      "revId": "1147a51741a60d86377d7ac3e343fcc28196bf53",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    }
  ]
}