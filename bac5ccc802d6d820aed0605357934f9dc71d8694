{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "4b075f02_d8ca9e5c",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 16006
      },
      "writtenOn": "2021-05-21T09:47:22Z",
      "side": 1,
      "message": "internal/cpu doesnt need to support all features that the chips support. It only needs to support the cpu features that are used in the go standard library and runtime. Since it is an internal package there is no code outside the standard library than can access",
      "revId": "bac5ccc802d6d820aed0605357934f9dc71d8694",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0c8b4a9e_15f1f87d",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 5976
      },
      "writtenOn": "2021-05-21T09:47:54Z",
      "side": 1,
      "message": "TryBots beginning. Status page: https://farmer.golang.org/try?commit\u003dbac5ccc8",
      "tag": "autogenerated:trybots~beginning",
      "revId": "bac5ccc802d6d820aed0605357934f9dc71d8694",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ade20428_72919582",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 5976
      },
      "writtenOn": "2021-05-21T09:50:46Z",
      "side": 1,
      "message": "Build is still in progress... Status page: https://farmer.golang.org/try?commit\u003dbac5ccc8\nFailed on misc-compile-darwinarm64: https://storage.googleapis.com/go-build-log/bac5ccc8/misc-compile-darwinarm64_7b08d206.log\nOther builds still in progress; subsequent failure notices suppressed until final report.\n\nConsult https://build.golang.org/ to see whether they are new failures. Keep in mind that TryBots currently test *exactly* your git commit, without rebasing. If your commit\u0027s git parent is old, the failure might\u0027ve already been fixed.\n",
      "parentUuid": "0c8b4a9e_15f1f87d",
      "tag": "autogenerated:trybots~progress",
      "revId": "bac5ccc802d6d820aed0605357934f9dc71d8694",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "036510d8_85961304",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 5976
      },
      "writtenOn": "2021-05-21T09:59:41Z",
      "side": 1,
      "message": "1 of 25 TryBots failed.\nFailed on misc-compile-darwinarm64: https://storage.googleapis.com/go-build-log/bac5ccc8/misc-compile-darwinarm64_7b08d206.log\n\nConsult https://build.golang.org/ to see whether they are new failures. Keep in mind that TryBots currently test *exactly* your git commit, without rebasing. If your commit\u0027s git parent is old, the failure might\u0027ve already been fixed.\n\n",
      "parentUuid": "0c8b4a9e_15f1f87d",
      "tag": "autogenerated:trybots~failed",
      "revId": "bac5ccc802d6d820aed0605357934f9dc71d8694",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "9e11690b_7f84a392",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 36548
      },
      "writtenOn": "2021-06-28T06:02:25Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "036510d8_85961304",
      "revId": "bac5ccc802d6d820aed0605357934f9dc71d8694",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "04279841_39175c38",
        "filename": "src/internal/cpu/cpu_arm64_darwin.go",
        "patchSetId": 1
      },
      "lineNbr": 22,
      "author": {
        "id": 16006
      },
      "writtenOn": "2021-05-21T09:47:22Z",
      "side": 1,
      "message": "Does this compile?\n\nThere doesnt seem to be an ARM64.HasSHA3 https://github.com/golang/go/blob/831573cd21e65c37b4e1bf5d44dc23b125084b7a/src/internal/cpu/cpu.go#L58\n\ninternal/cpu only supports the cpu features that are needed by the go standard library and runtime. Features that are supported by the cpu but not used dont need to be added.\n\nIf there is a CL inflight that will use SHA3 in runtime or go standard library please reference this in the commit message.\n\nIf this needs to be added in the future it should be:\nARM64.HasSHA3 \u003d sysctlEnabled([]byte(hw.optional.armv8_2_sha3\\x00\"))",
      "range": {
        "startLine": 22,
        "startChar": 1,
        "endLine": 22,
        "endChar": 21
      },
      "revId": "bac5ccc802d6d820aed0605357934f9dc71d8694",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9d98a323_e697226f",
        "filename": "src/internal/cpu/cpu_arm64_darwin.go",
        "patchSetId": 1
      },
      "lineNbr": 22,
      "author": {
        "id": 16006
      },
      "writtenOn": "2021-05-21T09:56:16Z",
      "side": 1,
      "message": "Doesnt compile:\n\ninternal/cpu/cpu_arm64_darwin.go:22:7: ARM64.HasSHA3 undefined (type struct { _ CacheLinePad; HasAES bool; HasPMULL bool; HasSHA1 bool; HasSHA2 bool; HasCRC32 bool; HasATOMICS bool; HasCPUID bool; IsNeoverseN1 bool; IsZeus bool; _ CacheLinePad } has no field or method HasSHA3)\n\nas there is no declaration and use of the feature yet.\n\nAs said we can add it if there is code in runtime/std library that will use it, but I could not find a cl inflight that would use it.\n\nThere is something to be said for documenting more explicitly in internal/cpu/cpu.go that only features that are used need to be supported and not all features the cpus support.",
      "parentUuid": "04279841_39175c38",
      "range": {
        "startLine": 22,
        "startChar": 1,
        "endLine": 22,
        "endChar": 21
      },
      "revId": "bac5ccc802d6d820aed0605357934f9dc71d8694",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a63416c9_41c092ca",
        "filename": "src/internal/cpu/cpu_arm64_darwin.go",
        "patchSetId": 1
      },
      "lineNbr": 22,
      "author": {
        "id": 36548
      },
      "writtenOn": "2021-06-28T06:02:25Z",
      "side": 1,
      "message": "Sorry for answering late. I added `HasSHA3`, since I opened this [PR](https://go-review.googlesource.com/c/crypto/+/318869) in golang/crypto. This PR implemented SHA3 in assembly on ARM64, but SHA3 NEON intrinsics are supported since \"ARMv8.2\". Therefore, not using `HasSHA3`, may cause problems in this PR.\n\nBTW I have added one line more to describe what kinds of features should be added.",
      "parentUuid": "9d98a323_e697226f",
      "range": {
        "startLine": 22,
        "startChar": 1,
        "endLine": 22,
        "endChar": 21
      },
      "revId": "bac5ccc802d6d820aed0605357934f9dc71d8694",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "07366108_dcb1343a",
        "filename": "src/internal/cpu/cpu_arm64_darwin.go",
        "patchSetId": 1
      },
      "lineNbr": 22,
      "author": {
        "id": 16006
      },
      "writtenOn": "2021-06-28T09:16:13Z",
      "side": 1,
      "message": "That CL does not use internal/cpu and packages outside the std library like in golang/crypto cant use internal/cpu generally. I dont see how this CL can change behaviour related to the above CL if there is no code is in the std library that will check for it being enabled or disabled.",
      "parentUuid": "a63416c9_41c092ca",
      "range": {
        "startLine": 22,
        "startChar": 1,
        "endLine": 22,
        "endChar": 21
      },
      "revId": "bac5ccc802d6d820aed0605357934f9dc71d8694",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    }
  ]
}