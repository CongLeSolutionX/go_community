{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "d209023c_c9963131",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 13
      },
      "lineNbr": 0,
      "author": {
        "id": 5976
      },
      "writtenOn": "2023-03-31T18:20:57Z",
      "side": 1,
      "message": "TryBots beginning. Status page: https://farmer.golang.org/try?commit\u003d149b881f\n",
      "tag": "autogenerated:trybots~beginning",
      "revId": "149b881fbfbad96b2474966a2e88a5d2f7151218",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "a48b745e_89c2594f",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 13
      },
      "lineNbr": 0,
      "author": {
        "id": 5976
      },
      "writtenOn": "2023-03-31T18:29:46Z",
      "side": 1,
      "message": "TryBots are happy.\n\n",
      "parentUuid": "d209023c_c9963131",
      "tag": "autogenerated:trybots~happy",
      "revId": "149b881fbfbad96b2474966a2e88a5d2f7151218",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "d2effea6_cdd91c96",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 13
      },
      "lineNbr": 0,
      "author": {
        "id": 28787
      },
      "writtenOn": "2023-04-01T00:35:46Z",
      "side": 1,
      "message": "There are two places where we need to check that the quic_transport_parameters is not set when not using QUIC.",
      "revId": "149b881fbfbad96b2474966a2e88a5d2f7151218",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e3b84b00_f3692432",
        "filename": "src/crypto/tls/conn.go",
        "patchSetId": 13
      },
      "lineNbr": 1157,
      "author": {
        "id": 28787
      },
      "writtenOn": "2023-03-31T23:52:40Z",
      "side": 1,
      "message": "When using QUIC, clients MUST NOT send the EndOfEarlyData message, see section 8.3 of RFC 9001. It wouldn\u0027t hurt to check that here and return an error (alertUnexpectedMessage).",
      "revId": "149b881fbfbad96b2474966a2e88a5d2f7151218",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "2cd75e8b_b2defaab",
        "filename": "src/crypto/tls/conn.go",
        "patchSetId": 13
      },
      "lineNbr": 1157,
      "author": {
        "id": 5305
      },
      "writtenOn": "2023-04-07T18:46:29Z",
      "side": 1,
      "message": "We\u0027ll always return alertUnexpectedMessage if we receive EndOfEarlyData, since there\u0027s no support for early data at the moment.\n\nWhenever crypto/tls gains support for early data, the path which processes EndOfEarlyData can verify that the connection isn\u0027t a QUIC one.",
      "parentUuid": "e3b84b00_f3692432",
      "revId": "149b881fbfbad96b2474966a2e88a5d2f7151218",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "927dc582_3ac9b664",
        "filename": "src/crypto/tls/conn.go",
        "patchSetId": 13
      },
      "lineNbr": 1314,
      "author": {
        "id": 28787
      },
      "writtenOn": "2023-04-01T00:03:36Z",
      "side": 1,
      "message": "According to section 6 of RFC 9001, this needs to result in an unexpected_message alert when using QUIC.",
      "revId": "149b881fbfbad96b2474966a2e88a5d2f7151218",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "badc35d2_92333d5e",
        "filename": "src/crypto/tls/conn.go",
        "patchSetId": 13
      },
      "lineNbr": 1314,
      "author": {
        "id": 5305
      },
      "writtenOn": "2023-04-07T18:46:29Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "927dc582_3ac9b664",
      "revId": "149b881fbfbad96b2474966a2e88a5d2f7151218",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ab79d1cf_d55cd5b7",
        "filename": "src/crypto/tls/handshake_client_tls13.go",
        "patchSetId": 13
      },
      "lineNbr": 453,
      "author": {
        "id": 28787
      },
      "writtenOn": "2023-04-01T00:35:46Z",
      "side": 1,
      "message": "Section 8.2 of RFC 9001 requires sending an unsupported_extension alert if the quic_transport_parameters extension is set and QUIC is not used.",
      "revId": "149b881fbfbad96b2474966a2e88a5d2f7151218",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "86067122_9ac0b043",
        "filename": "src/crypto/tls/handshake_client_tls13.go",
        "patchSetId": 13
      },
      "lineNbr": 453,
      "author": {
        "id": 5305
      },
      "writtenOn": "2023-04-07T18:46:29Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "ab79d1cf_d55cd5b7",
      "revId": "149b881fbfbad96b2474966a2e88a5d2f7151218",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a499fa8f_a50c5aa3",
        "filename": "src/crypto/tls/handshake_client_tls13.go",
        "patchSetId": 13
      },
      "lineNbr": 453,
      "author": {
        "id": 28787
      },
      "writtenOn": "2023-04-08T09:28:27Z",
      "side": 1,
      "message": "Sending an alertMissingExtension here was correct. Returning a descriptive error is a worthwhile change.\n\nI believe this would be correct:\n\n```\nif c.quic !\u003d nil {\n\t\tif encryptedExtensions.quicTransportParameters \u003d\u003d nil {\n\t\t\t// RFC 9001 Section 8.2.\n\t\t\tc.sendAlert(alertMissingExtension)\n\t\t\treturn errors.New(\"tls: server did not send a quic_transport_parameters extension\")\n\t\t}\n\t\t...\n```\n\nHowever, the thing I was pointing out is that we need to send a unsupported_extension alert when QUIC is **not** used, by adding:\n\n```\nif c.quic \u003d\u003d nil \u0026\u0026 encryptedExtensions.quicTransportParameters !\u003d nil {\n    c.sendAlert(alertUnsupportedExtension)\n    return errors.New(\"tls: server sent quic_transport_parameters on a non-QUIC connection\")\n}\n```",
      "parentUuid": "86067122_9ac0b043",
      "revId": "149b881fbfbad96b2474966a2e88a5d2f7151218",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6069f145_0076b494",
        "filename": "src/crypto/tls/handshake_server_tls13.go",
        "patchSetId": 13
      },
      "lineNbr": 238,
      "author": {
        "id": 28787
      },
      "writtenOn": "2023-04-01T00:35:46Z",
      "side": 1,
      "message": "Section 8.2 of RFC 9001 requires sending an unsupported_extension alert if the quic_transport_parameters extension is set and QUIC is not used.",
      "revId": "149b881fbfbad96b2474966a2e88a5d2f7151218",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "e2e20746_e71f990b",
        "filename": "src/crypto/tls/handshake_server_tls13.go",
        "patchSetId": 13
      },
      "lineNbr": 238,
      "author": {
        "id": 5305
      },
      "writtenOn": "2023-04-07T18:46:29Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "6069f145_0076b494",
      "revId": "149b881fbfbad96b2474966a2e88a5d2f7151218",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ab8f677f_7b8f558d",
        "filename": "src/crypto/tls/handshake_server_tls13.go",
        "patchSetId": 13
      },
      "lineNbr": 238,
      "author": {
        "id": 28787
      },
      "writtenOn": "2023-04-08T09:28:27Z",
      "side": 1,
      "message": "Same here.",
      "parentUuid": "e2e20746_e71f990b",
      "revId": "149b881fbfbad96b2474966a2e88a5d2f7151218",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    }
  ]
}