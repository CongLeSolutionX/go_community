{
  "comments": [
    {
      "key": {
        "uuid": "c326369c_f0c56ddd",
        "filename": "src/cmd/go/build.go",
        "patchSetId": 20
      },
      "lineNbr": 418,
      "author": {
        "id": 5206
      },
      "writtenOn": "2015-04-11T00:28:18Z",
      "side": 1,
      "message": "Those examples look reasonable, but the next step would seem to be\n\n-buildmode\u003dshared gopkg.in/tomb.v2 -\u003e libgopkgdotin-tomb-v2.so\n\nand this is not so good.\n\nIt seems to me that we can have a better default when building a single package.\nE.g., if we are building gopkg.in/tomb.v2, perhaps we could install the .so file next to the .a file.\nAnd if we are building DIR/..., perhaps we could install the .so file in DIR.",
      "revId": "d2aa46c7a46c0ab77fe667d28865fac4295d01d6",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "50e84e65_880b1b5d",
        "filename": "src/cmd/go/build.go",
        "patchSetId": 20
      },
      "lineNbr": 418,
      "author": {
        "id": 5153
      },
      "writtenOn": "2015-04-13T16:44:03Z",
      "side": 1,
      "message": "Yes, certainly in this scheme things get pretty ugly.  But unless I\u0027m misremembering how these things work, you more or less have to have most of the importpath in the filename of the library because otherwise you risk collisions -- if you have bar/libfoo.so and baz/libfoo.so you can\u0027t easily link to both.\n\nOh I guess you can have full paths in DT_NEEDED. But that would make it hard to have a debian package that creates a shared library and also something that links against it... unless you also play games with -Wl,-soname\u003d.  Hm hm.",
      "parentUuid": "c326369c_f0c56ddd",
      "revId": "d2aa46c7a46c0ab77fe667d28865fac4295d01d6",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b0242aae_16b3bd7b",
        "filename": "src/cmd/go/build.go",
        "patchSetId": 20
      },
      "lineNbr": 418,
      "author": {
        "id": 5206
      },
      "writtenOn": "2015-04-13T19:20:57Z",
      "side": 1,
      "message": "I see what you mean--you want the DT_NEEDED strings to be unique.  I was thinking that we can generate multiple DT_RPATH entries, but we will still have collision problems.  Bother.\n\nGiven that we need unique import paths, I would advocate not trying to do clever things like change \".\" to \"dot\".  And don\u0027t aim for pretty names.  What do you think of something more like this:\n\n1) Drop a trailing \"/...\"; that doesn\u0027t affect the import path in a relevant way.\n\n2) Join arguments with \u0027,\u0027.\n\n3) Change \u0027/\u0027 to \u0027-\u0027.\n\n4) Keep every other character unchanged.",
      "parentUuid": "50e84e65_880b1b5d",
      "revId": "d2aa46c7a46c0ab77fe667d28865fac4295d01d6",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "50e84e65_28764f84",
        "filename": "src/cmd/go/build.go",
        "patchSetId": 20
      },
      "lineNbr": 418,
      "author": {
        "id": 5153
      },
      "writtenOn": "2015-04-13T19:58:52Z",
      "side": 1,
      "message": "Yes, that works.  I guess the characters that can be present in an import path are already limited enough to avoid pathological nonsense (e.g. no newlines).",
      "parentUuid": "b0242aae_16b3bd7b",
      "revId": "d2aa46c7a46c0ab77fe667d28865fac4295d01d6",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c326369c_509641c9",
        "filename": "src/cmd/go/build.go",
        "patchSetId": 20
      },
      "lineNbr": 480,
      "author": {
        "id": 5206
      },
      "writtenOn": "2015-04-11T00:28:18Z",
      "side": 1,
      "message": "Pretty minor, but there is no reason to call libname twice.",
      "revId": "d2aa46c7a46c0ab77fe667d28865fac4295d01d6",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "50e84e65_8832fb20",
        "filename": "src/cmd/go/build.go",
        "patchSetId": 20
      },
      "lineNbr": 480,
      "author": {
        "id": 5153
      },
      "writtenOn": "2015-04-13T16:44:03Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "c326369c_509641c9",
      "revId": "d2aa46c7a46c0ab77fe667d28865fac4295d01d6",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705",
      "unresolved": false
    }
  ]
}