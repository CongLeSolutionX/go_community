{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "a70f0edd_2cdcf77f",
        "filename": "src/runtime/sys_linux_ppc64x.s",
        "patchSetId": 30
      },
      "lineNbr": 806,
      "author": {
        "id": 36863
      },
      "writtenOn": "2024-09-26T13:25:55Z",
      "side": 1,
      "message": "The old syscall ABI passed success or failure via the cr7 so bit.\n\n\nThe new syscall ABI returns a value in R3, with a value 0 \u003e x \u003e -4096 being an error. I think the vdso does likewise.\n\nShould this be something like:\n\n```\nMOVD $-4095, R4\nCMPU R3, R4\nBLT out\n```",
      "revId": "7fa1ed95b8237092db27fbb1a7848a0877f5a117",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "244d40a1_c44a4f98",
        "filename": "src/runtime/sys_linux_ppc64x.s",
        "patchSetId": 30
      },
      "lineNbr": 806,
      "author": {
        "id": 20556
      },
      "writtenOn": "2024-09-26T13:53:46Z",
      "side": 1,
      "message": "That is not correct. https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/tree/arch/powerpc/kernel/vdso/getrandom.S\n\nThe code in this patch corresponds with the code in the kernel there. If you want to change that, send a patch to lkml.",
      "parentUuid": "a70f0edd_2cdcf77f",
      "revId": "7fa1ed95b8237092db27fbb1a7848a0877f5a117",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "f75b69d4_caab0738",
        "filename": "src/runtime/sys_linux_ppc64x.s",
        "patchSetId": 30
      },
      "lineNbr": 806,
      "author": {
        "id": 20556
      },
      "writtenOn": "2024-09-26T13:57:46Z",
      "side": 1,
      "message": "Apparently I can get rid of the alignment too. I\u0027ll do that.",
      "parentUuid": "244d40a1_c44a4f98",
      "revId": "7fa1ed95b8237092db27fbb1a7848a0877f5a117",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "08ab9765_47e6684a",
        "filename": "src/runtime/sys_linux_ppc64x.s",
        "patchSetId": 30
      },
      "lineNbr": 806,
      "author": {
        "id": 36863
      },
      "writtenOn": "2024-09-26T15:40:58Z",
      "side": 1,
      "message": "Ah, subtle. Thanks for clarifying. You could simplify the ugly BC opcode with `BVC out`. It\u0027s named oddly in go for historical reasons.",
      "parentUuid": "f75b69d4_caab0738",
      "revId": "7fa1ed95b8237092db27fbb1a7848a0877f5a117",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "5087ea69_583d899a",
        "filename": "src/runtime/sys_linux_ppc64x.s",
        "patchSetId": 30
      },
      "lineNbr": 806,
      "author": {
        "id": 20556
      },
      "writtenOn": "2024-09-26T17:04:40Z",
      "side": 1,
      "message": "Oh thanks, that\u0027s what it\u0027s called. Done.\n\nAnd I removed the alignment, since the vDSO trampoline already does that, which means I could remove the R1 saving to R15 too.",
      "parentUuid": "08ab9765_47e6684a",
      "revId": "7fa1ed95b8237092db27fbb1a7848a0877f5a117",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "d5bbf9da_33b2b4ce",
        "filename": "src/runtime/sys_linux_ppc64x.s",
        "patchSetId": 30
      },
      "lineNbr": 806,
      "author": {
        "id": 36863
      },
      "writtenOn": "2024-09-26T22:05:57Z",
      "side": 1,
      "message": "Can you point out where that happens? Looking at the vsyscall documentation for ppc64, it doesn\u0027t call out any requirements for stack alignment either.",
      "parentUuid": "5087ea69_583d899a",
      "revId": "7fa1ed95b8237092db27fbb1a7848a0877f5a117",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    }
  ]
}