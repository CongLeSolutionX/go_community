{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "ef234dba_08472b2d",
        "filename": "src/cmd/link/internal/ld/ld_test.go",
        "patchSetId": 1
      },
      "lineNbr": 443,
      "author": {
        "id": 13315
      },
      "writtenOn": "2024-08-26T16:15:13Z",
      "side": 1,
      "message": "As TestTrampoline (in cmd/link/link_test.go) is already enabled on loong64, is this still necessary?",
      "revId": "c415fc8c117d09c314f9d3a639c884c2b17103a8",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "d4344810_ef09d1c9",
        "filename": "src/cmd/link/internal/ld/ld_test.go",
        "patchSetId": 1
      },
      "lineNbr": 443,
      "author": {
        "id": 54318
      },
      "writtenOn": "2024-09-11T08:18:28Z",
      "side": 1,
      "message": "Hi, sorry for the late reply. \n\nThe test in cmd/link only tests whether the executable file is executed successfully, and does not confirm whether the executable file has the tramp function we need. The newly added test verifies whether the tramp is generated successfully for a specific function, so I personally think this test is necessary.",
      "parentUuid": "ef234dba_08472b2d",
      "revId": "c415fc8c117d09c314f9d3a639c884c2b17103a8",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4f46e790_3ccbbd7c",
        "filename": "src/cmd/link/internal/ld/ld_test.go",
        "patchSetId": 1
      },
      "lineNbr": 443,
      "author": {
        "id": 13315
      },
      "writtenOn": "2024-09-11T16:35:14Z",
      "side": 1,
      "message": "We probably should update TestTrampoline to check if the trampoline is actually there. Additional test like this is fine. But I think we should run it only on Loong64 (and we don\u0027t need to set the environ variables below).\n\nFor this test, I think we should write the code with multiple packages. The trampoline pass is not designed to handle a single very large package, but multiple packages that in aggregate make the binary large. (The RISCV case is different in that it\u0027s direct jump range is too short, so it has special logics for intra-package trampolines. But we should not expect intra-package trampolines on other platforms.)",
      "parentUuid": "d4344810_ef09d1c9",
      "revId": "c415fc8c117d09c314f9d3a639c884c2b17103a8",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5e494761_6f2fdd14",
        "filename": "src/cmd/link/internal/ld/ld_test.go",
        "patchSetId": 1
      },
      "lineNbr": 443,
      "author": {
        "id": 54318
      },
      "writtenOn": "2024-10-10T12:44:58Z",
      "side": 1,
      "message": "Sorry for the late reply, I just came back from vacation.\n\nThanks for the explanation. I have a question, if the trampoline process is not designed to handle a single very large package, should the source code of the test cases TestTrampoline and TestTrampolineCgo (cmd/link/link_test.go) contain at least two packages?",
      "parentUuid": "4f46e790_3ccbbd7c",
      "revId": "c415fc8c117d09c314f9d3a639c884c2b17103a8",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "912bc415_7479a15b",
        "filename": "src/cmd/link/internal/ld/ld_test.go",
        "patchSetId": 1
      },
      "lineNbr": 443,
      "author": {
        "id": 13315
      },
      "writtenOn": "2024-10-10T19:29:30Z",
      "side": 1,
      "message": "In fact they contain many packages, e.g. the main package and the runtime package. The tests use a flag (-debugtramp\u003d2) to force trampolines for calls across packages.",
      "parentUuid": "5e494761_6f2fdd14",
      "revId": "c415fc8c117d09c314f9d3a639c884c2b17103a8",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "558a53e4_6acc10b4",
        "filename": "src/cmd/link/internal/ld/ld_test.go",
        "patchSetId": 1
      },
      "lineNbr": 443,
      "author": {
        "id": 54318
      },
      "writtenOn": "2024-10-11T10:28:23Z",
      "side": 1,
      "message": "Ok, I understand, thank you.\n\nI feel that if the public test case can detect whether trampoline is really added, then this test case only for Loong64 is unnecessary.",
      "parentUuid": "912bc415_7479a15b",
      "revId": "c415fc8c117d09c314f9d3a639c884c2b17103a8",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0e4a1b45_9310a7c0",
        "filename": "src/cmd/link/internal/ld/ld_test.go",
        "patchSetId": 1
      },
      "lineNbr": 443,
      "author": {
        "id": 54318
      },
      "writtenOn": "2024-10-12T10:09:25Z",
      "side": 1,
      "message": "I added code in the public test case to check if the trampoline is actually added, is this ok?",
      "parentUuid": "558a53e4_6acc10b4",
      "revId": "c415fc8c117d09c314f9d3a639c884c2b17103a8",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    }
  ]
}