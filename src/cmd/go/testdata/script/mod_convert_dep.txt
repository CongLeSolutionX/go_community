env GO111MODULE=on

cd $WORK/test/x
go list -m all
stdout '^m$'

# test dep replacement
cd $WORK/y
go list -m all
grep 'replace z v1.0.0 => example.com v1.0.0' go.mod

-- $WORK/test/Gopkg.lock --
-- $WORK/test/x/x.go --
package x // import "m/x"

-- $WORK/y/Gopkg.lock --
[[projects]]
  name = "z"
  revision = "v1.0.0"
  source = "example.com"
-- $WORK/y/y.go --
package y // import "y"
import _ "z"
