[short] skip

env GO111MODULE=on

# The first run of a test with a fresh GOCACHE should not be cached.
# The second run should be.
env GOCACHE=$WORK/gocache
go test .
! stdout '(cached)'
go test .
stdout '(cached)'

-- go.mod --
module golang.org/issue/29111/foo

-- foo.go --
package foo

-- foo_test.go --
package foo_test

import (
	"io/ioutil"
	"path/filepath"
	"testing"
)

func TestX(t *testing.T) {
	dir, err := ioutil.TempDir("", "")
	if err != nil {
		t.Fatal(err)
	}
	defer os.RemoveAll(dir)
	err = ioutil.WriteFile(filepath.Join(dir, "x"), nil, 0666)
	if err != nil {
		t.Fatal(err)
	}
}
