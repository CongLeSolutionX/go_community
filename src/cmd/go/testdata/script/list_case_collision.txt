# Tests golang.org/issue/4773

go list -json example/a
stdout 'case-insensitive import collision'

! go build example/a
stderr 'case-insensitive import collision'

# If we're not guaranteed to have a case-sensitive file system, list files explicitly on command line.
# Otherwise, let directory read find both files.
cp example/b/file.go example/b/FILE.go  # no-op on case-insensitive filesystems
! go list example/b/file.go example/b/FILE.go
stderr 'case-insensitive file name collision'

mkdir example/a/Pkg  # no-op on case-insensitive filesystems
cp example/a/Pkg/pkg.go example/a/pkg/pkg.go  # no-op on case-insensitive filesystems
! go list example/a/pkg example/a/Pkg

-- example/a/a.go --
package p
import (
	_ "example/a/pkg"
	_ "example/a/Pkg"
)
-- example/a/pkg/pkg.go --
package pkg
-- example/b/file.go --
package b