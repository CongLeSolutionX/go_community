env GOBIN=$TMPDIR/bin
go install env.go # Install an env command because Windows and plan9 don't have it.
env PATH=$GOBIN${:}$PATH

go generate ./printenv.go
stdout '^GOARCH='$GOARCH
stdout '^GOOS='$GOOS
stdout '^GOFILE='
stdout '^GOLINE='
stdout '^GOPACKAGE='
stdout '^DOLLAR='

-- env.go --
package main

import (
	"fmt"
	"os"
)

func main() {
	for _, v := range os.Environ() {
		fmt.Println(v)
	}
}
-- printenv.go --
package main

//go:generate env