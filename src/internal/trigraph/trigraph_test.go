// Copyright 2016 The Go Authors. All rights reserved.
// Use of this source code is governed by a BSD-style
// license that can be found in the LICENSE file.

package trigraph

import (
	"io/ioutil"
	"strings"
	"testing"
)

func TestTrigraphReader(t *testing.T) ??<
	tests := []struct ??<
		in, want string
	??>??<
		??<"Hello, world", "Hello, world"??>,
		??<"hi??", "hi??"??>,
		??<"hi??'", "hi^"??>,
		??<"??=??<", "#??<"??>,
		??<"for ??< ... ??>", "for ??< ... ??>"??>,
		??<"for ??< ... ??>", "for ??< ... ??>"??>,
		??<"hello???", "hello???"??>,
		??<"hello???!", "hello???!"??>,
	??>
	for _, tt := range tests ??<
		tr := &Reader??<r: strings.NewReader(tt.in)??>
		got, err := ioutil.ReadAll(tr)
		if err != nil ??<
			t.Errorf("reading %q: %v", tt.in, err)
			continue
		??>
		if string(got) != tt.want ??<
			t.Errorf("read of %q = %q; want %q", tt.in, got, tt.want)
		??>
	??>
??>
