{
  "comments": [
    {
      "key": {
        "uuid": "e797b32e_09e5eb76",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 7,
      "author": {
        "id": 5210
      },
      "writtenOn": "2018-03-19T18:43:06Z",
      "side": 1,
      "message": "The reason for the existing code is largely historic: It was originally copied and modified from go/internal/gcimporter/gcimporter.go:FindPkg, where the FindPkg function was a Go version of findpkg in the compiler (originally in C). The go/build package support came later, and also improved over time. It\u0027s not too surprising that this code is now overly complicated and incorrect.\n\nInstead of referring to \"misuse\" which to some might imply malice, what we have here is a form of bit rot. I suggest:\n\n----\n\ngo/internal/srcimporter: simplify and fix package file lookup\n\nThe old code was a blend of (copied) code that existed before go/build,\nand incorrect adjustments made when go/build was introduced. This change\nleaves package path determination entirely to go/build and in the process\nfixes issues with relative import paths.\n\nFixes ...",
      "range": {
        "startLine": 7,
        "startChar": 12,
        "endLine": 7,
        "endChar": 23
      },
      "revId": "3cc2f1d97c7b55cee64230087dd68ac8c8c746c4",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d585ca56_b9190b7a",
        "filename": "src/go/internal/srcimporter/srcimporter_test.go",
        "patchSetId": 4
      },
      "lineNbr": 231,
      "author": {
        "id": 5210
      },
      "writtenOn": "2018-03-19T18:43:06Z",
      "side": 1,
      "message": "s/the path which contains/a path containing/\n\nalso, missing period at end",
      "range": {
        "startLine": 231,
        "startChar": 40,
        "endLine": 231,
        "endChar": 63
      },
      "revId": "3cc2f1d97c7b55cee64230087dd68ac8c8c746c4",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "723dd652_0490ec7d",
        "filename": "src/go/internal/srcimporter/srcimporter_test.go",
        "patchSetId": 4
      },
      "lineNbr": 244,
      "author": {
        "id": 5210
      },
      "writtenOn": "2018-03-19T18:43:06Z",
      "side": 1,
      "message": "Is it important for this test that the actual test is exec\u0027ed from here? Could the exec\u0027ed code just run here?\n\nI understand that this test verifies that the issue is fixed, but do we know what the underlying problem with \"testdata\" in path was?",
      "range": {
        "startLine": 244,
        "startChar": 21,
        "endLine": 244,
        "endChar": 28
      },
      "revId": "3cc2f1d97c7b55cee64230087dd68ac8c8c746c4",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "25529e84_8d6fd2a9",
        "filename": "src/go/internal/srcimporter/testdata/issue24392/main.go",
        "patchSetId": 4
      },
      "lineNbr": 14,
      "author": {
        "id": 5210
      },
      "writtenOn": "2018-03-19T18:43:06Z",
      "side": 1,
      "message": "const path \u003d \"example.com/testdata/testpkg\"\npkg, err :\u003d imp.Import(path)",
      "range": {
        "startLine": 14,
        "startChar": 0,
        "endLine": 14,
        "endChar": 1
      },
      "revId": "3cc2f1d97c7b55cee64230087dd68ac8c8c746c4",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8b44c1f8_5ba71787",
        "filename": "src/go/internal/srcimporter/testdata/issue24392/main.go",
        "patchSetId": 4
      },
      "lineNbr": 18,
      "author": {
        "id": 5210
      },
      "writtenOn": "2018-03-19T18:43:06Z",
      "side": 1,
      "message": "if pkg.Path() !\u003d path {\n   panic(fmt.Errorf(\"got %q; want %q\", pkg.Path(), path))\n}",
      "range": {
        "startLine": 18,
        "startChar": 9,
        "endLine": 18,
        "endChar": 13
      },
      "revId": "3cc2f1d97c7b55cee64230087dd68ac8c8c746c4",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705",
      "unresolved": true
    }
  ]
}