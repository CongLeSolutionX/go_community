{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "828f31a7_395b6c58",
        "filename": "src/net/ip.go",
        "patchSetId": 7
      },
      "lineNbr": 305,
      "author": {
        "id": 5206
      },
      "writtenOn": "2024-09-19T23:32:46Z",
      "side": 1,
      "message": "It seems like this will waste a bit of memory in the common case.  We should either figure out the expected memory and allocate that, or just allocate 16 bytes or so and waste memory in the less common case.",
      "revId": "4da67a92cf2b051dc47f2219845fd888406e7629",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "465aaad0_d913f601",
        "filename": "src/net/ip.go",
        "patchSetId": 7
      },
      "lineNbr": 305,
      "author": {
        "id": 64373
      },
      "writtenOn": "2024-09-20T06:39:32Z",
      "side": 1,
      "message": "Done. No change in the BenchmarkIPString.",
      "parentUuid": "828f31a7_395b6c58",
      "revId": "4da67a92cf2b051dc47f2219845fd888406e7629",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e421b14a_8a9314aa",
        "filename": "src/net/ip.go",
        "patchSetId": 7
      },
      "lineNbr": 357,
      "author": {
        "id": 5206
      },
      "writtenOn": "2024-09-19T23:32:46Z",
      "side": 1,
      "message": "Don\u0027t always allocate a large slice.",
      "revId": "4da67a92cf2b051dc47f2219845fd888406e7629",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e78b68e8_151a4f79",
        "filename": "src/net/ip.go",
        "patchSetId": 7
      },
      "lineNbr": 357,
      "author": {
        "id": 64373
      },
      "writtenOn": "2024-09-20T06:39:32Z",
      "side": 1,
      "message": "I changed the cap to 24. 16 bytes cap is satisfied with the IPv4, but the long  IPv6 address causes 2 allocations and extends the cap to 64 bytes. Since the longest textual representation of an IPv6 address\u0027s length is 39, I choose 24 as the new cap. Now in the worest case MarshalText only allocates once and the cap is 48. This wastes 8 bytes for the IPv4 but MarshalText will be no-alloc in the common cases, so I think it\u0027s fine. I also added a benchmark to measure the long IPv6 address MarshalText performance.",
      "parentUuid": "e421b14a_8a9314aa",
      "revId": "4da67a92cf2b051dc47f2219845fd888406e7629",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "e717fa73_e0c78e5c",
        "filename": "src/net/ip.go",
        "patchSetId": 7
      },
      "lineNbr": 357,
      "author": {
        "id": 64373
      },
      "writtenOn": "2024-09-21T02:59:26Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "e78b68e8_151a4f79",
      "revId": "4da67a92cf2b051dc47f2219845fd888406e7629",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    }
  ]
}