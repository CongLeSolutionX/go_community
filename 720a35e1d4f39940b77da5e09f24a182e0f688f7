{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "816d00a5_0291cd2c",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 5440
      },
      "writtenOn": "2021-06-17T03:39:29Z",
      "side": 1,
      "message": "Thanks, this is looking good. Some suggestions on how to polish the code.",
      "revId": "720a35e1d4f39940b77da5e09f24a182e0f688f7",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f58568fe_464c2ea2",
        "filename": "src/cmd/cgo/main.go",
        "patchSetId": 1
      },
      "lineNbr": 282,
      "author": {
        "id": 5440
      },
      "writtenOn": "2021-06-17T03:39:29Z",
      "side": 1,
      "message": "Change this code to:\n\n```\ninfo, err :\u003d dynimportRead(*dynimport)\nif err !\u003d nil {\n    fatalf(\"%s\", err)\n}\n\nif *dynout \u003d\u003d \"\" \u0026\u0026 *dynobjout \u003d\u003d \"\" {\n  dynimportWriteSourceFile(os.Stdout, *dynpackage, info)\n  return\n}\n\nif *dynout !\u003d \"\" {\n  f, err :\u003d os.Create(*dynout)\n  if err !\u003d nil {\n    fatalf(\"%s\", err)\n  }\n  dynimportWriteSourceFile(f, *dynpackage, info)\n  f.Close()\n}\n\nif *dynobjout !\u003d \"\" {\n  f, err :\u003d os.Create(*dynout)\n  if err !\u003d nil {\n    fatalf(\"%s\", err)\n  }\n  dynimportWriteObjectFile(f, info)\n  f.Close()\n}\n\nreturn\n```",
      "range": {
        "startLine": 269,
        "startChar": 1,
        "endLine": 282,
        "endChar": 16
      },
      "revId": "720a35e1d4f39940b77da5e09f24a182e0f688f7",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3cee2e45_491694b4",
        "filename": "src/cmd/cgo/main.go",
        "patchSetId": 1
      },
      "lineNbr": 282,
      "author": {
        "id": 5440
      },
      "writtenOn": "2021-06-17T03:42:23Z",
      "side": 1,
      "message": "\u003e if *dynobjout !\u003d \"\" {\n\u003e  f, err :\u003d os.Create(*dynout)\n\n(Sorry, typo: these should both be *dynobjout.)",
      "parentUuid": "f58568fe_464c2ea2",
      "range": {
        "startLine": 269,
        "startChar": 1,
        "endLine": 282,
        "endChar": 16
      },
      "revId": "720a35e1d4f39940b77da5e09f24a182e0f688f7",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "802e2e16_e4fd093c",
        "filename": "src/cmd/cgo/out.go",
        "patchSetId": 1
      },
      "lineNbr": 325,
      "author": {
        "id": 5440
      },
      "writtenOn": "2021-06-17T03:39:29Z",
      "side": 1,
      "message": "Turn this into an API:\n\n```\nfunc dynimportWriteSourceFile(out io.Writer, pkgName string, info *dynimportInfo) {\n  fmt.Fprintf(out, \"packge %s\\n\", pkgName)\n  if info.Linker !\u003d \"\" {\n    fmt.Fprintf(out, \"//go:cgo_dynamic_linker %q\\n\", info.Linker)\n  }\n  for _, sym :\u003d range info.Syms {\n    fmt.Fprintf(out, \"//go:cgo_dynamic_linker %s %s %q\\n\", sym.Local, sym.Remote, sym.Library)\n  }\n}\n```",
      "revId": "720a35e1d4f39940b77da5e09f24a182e0f688f7",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "75a1c42a_15daa1ce",
        "filename": "src/cmd/cgo/out.go",
        "patchSetId": 1
      },
      "lineNbr": 337,
      "author": {
        "id": 5440
      },
      "writtenOn": "2021-06-17T03:39:29Z",
      "side": 1,
      "message": "Refactor the existing obj reading+parsing code into an API like:\n\n```\ntype dynimportInfo struct {\n    Linker string\n    Syms   []dynimportSym\n}\n\ntype dynimportSym struct {\n    Local, Remote, Library string\n}\n\nfunc dynimportRead(obj string) (*dynimportInfo, error)\n```",
      "revId": "720a35e1d4f39940b77da5e09f24a182e0f688f7",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9dd46b2d_47161f10",
        "filename": "src/cmd/cgo/out.go",
        "patchSetId": 1
      },
      "lineNbr": 513,
      "author": {
        "id": 5440
      },
      "writtenOn": "2021-06-17T03:39:29Z",
      "side": 1,
      "message": "Similarly, make this into:\n\n```\nfunc dynimportWriteObjectFile(out io.Writer, info *dynimportInfo)\n```",
      "revId": "720a35e1d4f39940b77da5e09f24a182e0f688f7",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e52fc9ed_473e4488",
        "filename": "src/cmd/cgo/out.go",
        "patchSetId": 1
      },
      "lineNbr": 520,
      "author": {
        "id": 5440
      },
      "writtenOn": "2021-06-17T03:39:29Z",
      "side": 1,
      "message": "This line should be omitted. This is the magic marker used for distinguishing .a files, but we\u0027re writing out just .o files here.",
      "revId": "720a35e1d4f39940b77da5e09f24a182e0f688f7",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    }
  ]
}