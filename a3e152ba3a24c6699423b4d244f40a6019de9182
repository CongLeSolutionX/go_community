{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "d1342292_263577eb",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 7
      },
      "lineNbr": 0,
      "author": {
        "id": 63983
      },
      "writtenOn": "2023-11-16T19:30:55Z",
      "side": 1,
      "message": "Any chance I could get some reviews on this? Thanks again!",
      "revId": "a3e152ba3a24c6699423b4d244f40a6019de9182",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9f6ddbf2_64ca96a6",
        "filename": "src/runtime/internal/atomic/atomic_mips64x.s",
        "patchSetId": 7
      },
      "lineNbr": 322,
      "author": {
        "id": 5200
      },
      "writtenOn": "2024-01-30T18:46:20Z",
      "side": 1,
      "message": "Shouldn\u0027t this be -3(PC)? The other atomics here don\u0027t redo the SYNC.",
      "range": {
        "startLine": 322,
        "startChar": 9,
        "endLine": 322,
        "endChar": 11
      },
      "revId": "a3e152ba3a24c6699423b4d244f40a6019de9182",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9ebb8e4f_bd6ae17b",
        "filename": "src/runtime/internal/atomic/atomic_mips64x.s",
        "patchSetId": 7
      },
      "lineNbr": 322,
      "author": {
        "id": 63983
      },
      "writtenOn": "2024-01-30T20:43:11Z",
      "side": 1,
      "message": "Thanks Keith, that makes sense. I will update the code.",
      "parentUuid": "9f6ddbf2_64ca96a6",
      "range": {
        "startLine": 322,
        "startChar": 9,
        "endLine": 322,
        "endChar": 11
      },
      "revId": "a3e152ba3a24c6699423b4d244f40a6019de9182",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "32287435_b20e4692",
        "filename": "src/runtime/internal/atomic/atomic_mips64x.s",
        "patchSetId": 7
      },
      "lineNbr": 322,
      "author": {
        "id": 63983
      },
      "writtenOn": "2024-01-30T20:49:48Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "9ebb8e4f_bd6ae17b",
      "range": {
        "startLine": 322,
        "startChar": 9,
        "endLine": 322,
        "endChar": 11
      },
      "revId": "a3e152ba3a24c6699423b4d244f40a6019de9182",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "57eb11af_4b2c71e0",
        "filename": "src/runtime/internal/atomic/atomic_mips64x.s",
        "patchSetId": 7
      },
      "lineNbr": 322,
      "author": {
        "id": 13315
      },
      "writtenOn": "2024-02-27T17:00:36Z",
      "side": 1,
      "message": "Hmmm, the code above does jump to -4(PC) and redo the SYNC.",
      "parentUuid": "32287435_b20e4692",
      "range": {
        "startLine": 322,
        "startChar": 9,
        "endLine": 322,
        "endChar": 11
      },
      "revId": "a3e152ba3a24c6699423b4d244f40a6019de9182",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "264f45f8_873fad9c",
        "filename": "src/runtime/internal/atomic/atomic_mips64x.s",
        "patchSetId": 7
      },
      "lineNbr": 322,
      "author": {
        "id": 63983
      },
      "writtenOn": "2024-02-27T19:21:44Z",
      "side": 1,
      "message": "Hmmm, you are right Cherry. Looks like there is some inconsistency. Some places redo the sync and some do not. I think the proper implementation should redo the SYNC before attempting a store. That means the other places that don\u0027t redo the sync (for example Xadd) have to be fixed in another CL? Interesting that no one complained about this, so does redoing the SYNC even matter?",
      "parentUuid": "57eb11af_4b2c71e0",
      "range": {
        "startLine": 322,
        "startChar": 9,
        "endLine": 322,
        "endChar": 11
      },
      "revId": "a3e152ba3a24c6699423b4d244f40a6019de9182",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "d59e2dc2_72e0c529",
        "filename": "src/runtime/internal/atomic/atomic_mips64x.s",
        "patchSetId": 7
      },
      "lineNbr": 322,
      "author": {
        "id": 13315
      },
      "writtenOn": "2024-02-27T21:35:16Z",
      "side": 1,
      "message": "Interesting. Yeah, we don\u0027t redo the SYNC in some functions. My feeling is that it might be correct either way -- if the SC fails and we don\u0027t redo the SYNC, the LL might still load the stale value and the SC will fail again and it just loops more, until eventually it succeeds. Maybe this is fine. Redoing the SYNC might make it succeed quicker?\n\nI just checked the code generation for GCC (12.2). It does not redo the SYNC. So it is probably okay to not redo it.",
      "parentUuid": "264f45f8_873fad9c",
      "range": {
        "startLine": 322,
        "startChar": 9,
        "endLine": 322,
        "endChar": 11
      },
      "revId": "a3e152ba3a24c6699423b4d244f40a6019de9182",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    }
  ]
}