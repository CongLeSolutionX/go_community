{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "15eef563_add350ec",
        "filename": "src/cmd/link/internal/mips64/asm.go",
        "patchSetId": 4
      },
      "lineNbr": 346,
      "author": {
        "id": 13315
      },
      "writtenOn": "2022-08-02T23:05:24Z",
      "side": 1,
      "message": "I\u0027m not sure if this (or part of this) needs to be done in the linker. I think it is probably better to do this in the assembly code in the runtime (which the next CL adds), which are already named _trampoline.\n\nThose functions are always called from asmcgocall, which is called via R25, so you can assume R25 has the right value on entry. This is better than getting the it from a BAL instruction. Also, the assembly function can just make the call via R25 itself, so it doesn\u0027t need the linker rewrite.\n\nI\u0027m not sure about the GP register part. I don\u0027t think the ABI requires R28 to be a certain value at call entry. So I don\u0027t know why this code sets R28. Even if it does, it probably can be done in the assembly code as well (with necessary relocations that the linker applies).\n\nAlso, maybe not use the system register name. Names like R25 and R23 are pretty clear.",
      "revId": "4b81ce97c1360f84679ddf4df3bd4c1c8277fa77",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    }
  ]
}