{
  "comments": [
    {
      "key": {
        "uuid": "2b20f290_185e4919",
        "filename": "/COMMIT_MSG",
        "patchSetId": 10
      },
      "lineNbr": 10,
      "author": {
        "id": 5167
      },
      "writtenOn": "2016-04-11T22:41:59Z",
      "side": 1,
      "message": "\"need to be\"?",
      "revId": "2c94718e123f73dcc4bb767d80f22d277993c8eb",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0b4eceab_bcfd4181",
        "filename": "src/runtime/malloc.go",
        "patchSetId": 10
      },
      "lineNbr": 100,
      "author": {
        "id": 5167
      },
      "writtenOn": "2016-04-11T22:41:59Z",
      "side": 1,
      "message": "That\u0027s not actually true. Multi-page spans can hold more than one object. Perhaps,\n\n// By construction, single page spans of the smallest object class\n// have the most objects per span.\n\nMaybe add a check to initSizes that makes sure this is actually true? Something like\n\nfor i, size :\u003d range class_to_size {\n  if class_to_allocnpages[i] * pageSize / size \u003e maxObjsPerSpan {\n    throw(...)\n  }\n}\n\nright after the sizeclass !\u003d _NumSizeClasses check?",
      "revId": "2c94718e123f73dcc4bb767d80f22d277993c8eb",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "081fb456_68956b5d",
        "filename": "src/runtime/malloc.go",
        "patchSetId": 10
      },
      "lineNbr": 100,
      "author": {
        "id": 5186
      },
      "writtenOn": "2016-04-18T14:42:02Z",
      "side": 1,
      "message": "Done and a check that size !\u003d 0 when i !\u003d 0 was also added to your suggested code in msize.go",
      "parentUuid": "0b4eceab_bcfd4181",
      "revId": "2c94718e123f73dcc4bb767d80f22d277993c8eb",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0b4eceab_9cfa0585",
        "filename": "src/runtime/mheap.go",
        "patchSetId": 10
      },
      "lineNbr": 122,
      "author": {
        "id": 5167
      },
      "writtenOn": "2016-04-11T22:41:59Z",
      "side": 1,
      "message": "Perhaps // list of free objects for _MSpanInUse",
      "revId": "2c94718e123f73dcc4bb767d80f22d277993c8eb",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "081fb456_08cdd783",
        "filename": "src/runtime/mheap.go",
        "patchSetId": 10
      },
      "lineNbr": 122,
      "author": {
        "id": 5186
      },
      "writtenOn": "2016-04-18T14:42:02Z",
      "side": 1,
      "message": "Done but this field is deleted in a later CL.",
      "parentUuid": "0b4eceab_9cfa0585",
      "revId": "2c94718e123f73dcc4bb767d80f22d277993c8eb",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0b4eceab_fcf7c99a",
        "filename": "src/runtime/mheap.go",
        "patchSetId": 10
      },
      "lineNbr": 123,
      "author": {
        "id": 5167
      },
      "writtenOn": "2016-04-11T22:41:59Z",
      "side": 1,
      "message": "and // list of free stacks for _MSpanStack\n\nDo we actually need both, or was this just for sanity? (If we don\u0027t need both, add a TODO. There\u0027s some cost to making mspan bigger, so we shouldn\u0027t without good reason.)",
      "revId": "2c94718e123f73dcc4bb767d80f22d277993c8eb",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "081fb456_489aaf8d",
        "filename": "src/runtime/mheap.go",
        "patchSetId": 10
      },
      "lineNbr": 123,
      "author": {
        "id": 5186
      },
      "writtenOn": "2016-04-18T14:42:02Z",
      "side": 1,
      "message": "We don\u0027t need both. I split them out in this CL since in a later CL freelist is going to be deleted as we go to the sweep free allocation scheme. stackfreelist seems more descriptive than just using freelist.",
      "parentUuid": "0b4eceab_fcf7c99a",
      "revId": "2c94718e123f73dcc4bb767d80f22d277993c8eb",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0b4eceab_dcf48d99",
        "filename": "src/runtime/mheap.go",
        "patchSetId": 10
      },
      "lineNbr": 134,
      "author": {
        "id": 5167
      },
      "writtenOn": "2016-04-11T22:41:59Z",
      "side": 1,
      "message": "\"typically\"? What\u0027s the non-typical case? Perhaps this should be merged with the first sentence in this comment to make a precise statement about what freeindex means.",
      "revId": "2c94718e123f73dcc4bb767d80f22d277993c8eb",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "081fb456_28b893e5",
        "filename": "src/runtime/mheap.go",
        "patchSetId": 10
      },
      "lineNbr": 134,
      "author": {
        "id": 5186
      },
      "writtenOn": "2016-04-18T14:42:02Z",
      "side": 1,
      "message": "Comment fixed to reflect that where freeindex is set is a performance consideration.\nDone",
      "parentUuid": "0b4eceab_dcf48d99",
      "revId": "2c94718e123f73dcc4bb767d80f22d277993c8eb",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0b4eceab_3c35b12a",
        "filename": "src/runtime/mheap.go",
        "patchSetId": 10
      },
      "lineNbr": 137,
      "author": {
        "id": 5167
      },
      "writtenOn": "2016-04-11T22:41:59Z",
      "side": 1,
      "message": "Perhaps \"starts at address\"",
      "revId": "2c94718e123f73dcc4bb767d80f22d277993c8eb",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "081fb456_48b3cf0d",
        "filename": "src/runtime/mheap.go",
        "patchSetId": 10
      },
      "lineNbr": 137,
      "author": {
        "id": 5186
      },
      "writtenOn": "2016-04-18T14:42:02Z",
      "side": 1,
      "message": "\u003e Perhaps \"starts at address\"",
      "parentUuid": "0b4eceab_3c35b12a",
      "revId": "2c94718e123f73dcc4bb767d80f22d277993c8eb",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0b4eceab_1c3a751a",
        "filename": "src/runtime/mheap.go",
        "patchSetId": 10
      },
      "lineNbr": 141,
      "author": {
        "id": 5167
      },
      "writtenOn": "2016-04-11T22:41:59Z",
      "side": 1,
      "message": "Is there a reason to have this field in every span, rather than just having a table indexed by size class? (You don\u0027t have to change it in this CL, but add a TODO.)",
      "revId": "2c94718e123f73dcc4bb767d80f22d277993c8eb",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "081fb456_68be8bd7",
        "filename": "src/runtime/mheap.go",
        "patchSetId": 10
      },
      "lineNbr": 141,
      "author": {
        "id": 5186
      },
      "writtenOn": "2016-04-18T14:42:02Z",
      "side": 1,
      "message": "SOA vs. AOS TODO comment added. My sense is that we will end\nup with a hybrid but I don\u0027t know until I measure it.",
      "parentUuid": "0b4eceab_1c3a751a",
      "revId": "2c94718e123f73dcc4bb767d80f22d277993c8eb",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "081fb456_a8c38355",
        "filename": "src/runtime/mheap.go",
        "patchSetId": 10
      },
      "lineNbr": 141,
      "author": {
        "id": 5167
      },
      "writtenOn": "2016-04-18T14:56:19Z",
      "side": 1,
      "message": "What I\u0027m suggesting is not SOA vs AOS. It\u0027s asymptotically smaller, since it would be indexed by span.sizeclass, not by the span index.",
      "parentUuid": "081fb456_68be8bd7",
      "revId": "2c94718e123f73dcc4bb767d80f22d277993c8eb",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705",
      "unresolved": false
    }
  ]
}