{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "5f881fc4_e59a12a4",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 9210
      },
      "writtenOn": "2024-11-14T21:56:09Z",
      "side": 1,
      "message": "PS4 failed with what looks like #70288, which was fixed on tip. PS5 is a rebase, but failed with what looks like #58570. I\u0027ll re-run the bots.",
      "revId": "937d8295a87aa14492df900f1319ffdd635d3209",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "cb9f5594_a3ddc123",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 25391
      },
      "writtenOn": "2024-11-15T15:44:32Z",
      "side": 1,
      "message": "I have unlock2Wake a thorough read, and it makes sense to me. thanks!",
      "revId": "937d8295a87aa14492df900f1319ffdd635d3209",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6fba59fc_ecc15bba",
        "filename": "src/runtime/lock_spinbit.go",
        "patchSetId": 5
      },
      "lineNbr": 33,
      "author": {
        "id": 25391
      },
      "writtenOn": "2024-11-15T15:44:32Z",
      "side": 1,
      "message": "here and next to \"Bit 9\": perhaps mention the name of the constant below?",
      "range": {
        "startLine": 33,
        "startChar": 9,
        "endLine": 33,
        "endChar": 10
      },
      "revId": "937d8295a87aa14492df900f1319ffdd635d3209",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "83c4d826_b70b376b",
        "filename": "src/runtime/lock_spinbit.go",
        "patchSetId": 5
      },
      "lineNbr": 33,
      "author": {
        "id": 9210
      },
      "writtenOn": "2024-11-15T17:17:44Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "6fba59fc_ecc15bba",
      "range": {
        "startLine": 33,
        "startChar": 9,
        "endLine": 33,
        "endChar": 10
      },
      "revId": "937d8295a87aa14492df900f1319ffdd635d3209",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "36292e42_c9833fb5",
        "filename": "src/runtime/lock_spinbit.go",
        "patchSetId": 5
      },
      "lineNbr": 336,
      "author": {
        "id": 25391
      },
      "writtenOn": "2024-11-15T15:44:32Z",
      "side": 1,
      "message": "it occurs to me that this list could be doubly-linked, and I feel like maybe we even talked about it, but I don\u0027t remember why it isn\u0027t. does that just substantially complicate the implementation?",
      "range": {
        "startLine": 335,
        "startChar": 58,
        "endLine": 336,
        "endChar": 39
      },
      "revId": "937d8295a87aa14492df900f1319ffdd635d3209",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "f7aadb61_a601349c",
        "filename": "src/runtime/lock_spinbit.go",
        "patchSetId": 5
      },
      "lineNbr": 336,
      "author": {
        "id": 9210
      },
      "writtenOn": "2024-11-15T17:17:44Z",
      "side": 1,
      "message": "I\u0027ve drafted versions of a fix for #68578 that double-link the list. There\u0027s some overhead to updating the list invariants. The CLs that use double-linking have had unimpressive performance, though maybe for other reasons. (Some left Ms in the list until they\u0027d acquired the lock, which meant updating the list to remove themselves while holding the mutex.)\n\nThis code runs while holding `mutexStackLocked` _only_, after releasing the mutex itself. And it only runs on `1/mutexTailWakePeriod` of the calls (1/16th today). So I think there\u0027s room for running some extra code (such as to update the double-linking invariants).\n\nI\u0027ve left it out because it doesn\u0027t (yet) seem like necessary complexity. Would you like me to send a follow-up CL to add it? What would allow measuring with the perf_vs_parent builders and also an easier revert of that component if anything goes wrong.",
      "parentUuid": "36292e42_c9833fb5",
      "range": {
        "startLine": 335,
        "startChar": 58,
        "endLine": 336,
        "endChar": 39
      },
      "revId": "937d8295a87aa14492df900f1319ffdd635d3209",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    }
  ]
}