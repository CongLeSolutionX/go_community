{
  "comments": [
    {
      "key": {
        "uuid": "da60b7ef_c43653c9",
        "filename": "src/cmd/go/internal/work/build.go",
        "patchSetId": 1
      },
      "lineNbr": 396,
      "author": {
        "id": 33992
      },
      "writtenOn": "2020-09-10T12:36:16Z",
      "side": 1,
      "message": "The error that\u0027s referenced in the parent PR _is not_ coming from `runBuild` here but from `copyFile`\nhttps://github.com/golang/go/blob/3f568625980f6e23a603cfd1cb4fcd2bf5c895d7/src/cmd/go/internal/work/exec.go#L1671. \n\nI\u0027d recommend that we start a discussion on the parent issue first, and understand what\u0027s really happening here. This will allow to propose a solid solution, along with the relevant tests to avoid future regressions.",
      "revId": "41d0816cb5645ef9c49941d6a227c66a8ba9cfcd",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bf2ea498_a2abb4a6",
        "filename": "src/cmd/go/internal/work/build.go",
        "patchSetId": 1
      },
      "lineNbr": 396,
      "author": {
        "id": 36908
      },
      "writtenOn": "2020-09-10T12:52:03Z",
      "side": 1,
      "message": "Sure.",
      "parentUuid": "da60b7ef_c43653c9",
      "revId": "41d0816cb5645ef9c49941d6a227c66a8ba9cfcd",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "daa25a30_4b8abd10",
        "filename": "src/cmd/go/internal/work/build.go",
        "patchSetId": 1
      },
      "lineNbr": 396,
      "author": {
        "id": 36908
      },
      "writtenOn": "2020-09-10T13:11:28Z",
      "side": 1,
      "message": "`runBuild` will consider the output is a file not a directory. https://github.com/golang/go/blob/07d19b2597af253ed78ef43ba6e7a49db9a8f4ba/src/cmd/go/internal/work/build.go#L394\n\n`BuildInstallFunc` will create the directory because the output name contains directory. https://github.com/golang/go/blob/07d19b2597af253ed78ef43ba6e7a49db9a8f4ba/src/cmd/go/internal/work/exec.go#L1554\n\nThe error message is coming from `copyFile` since it expects output is not a directory (created in BuildInstallFunc).\n\nSo I add the behavior of `runBuild`, consider an inexistent directory is a directory to fix the problem.",
      "parentUuid": "bf2ea498_a2abb4a6",
      "revId": "41d0816cb5645ef9c49941d6a227c66a8ba9cfcd",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705",
      "unresolved": true
    }
  ]
}