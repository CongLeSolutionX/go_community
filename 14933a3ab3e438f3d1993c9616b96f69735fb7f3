{
  "comments": [
    {
      "key": {
        "uuid": "4afdce9c_c42d524b",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 15,
      "author": {
        "id": 7860
      },
      "writtenOn": "2017-03-08T14:06:48Z",
      "side": 1,
      "message": "*synchronous",
      "range": {
        "startLine": 15,
        "startChar": 33,
        "endLine": 15,
        "endChar": 43
      },
      "revId": "14933a3ab3e438f3d1993c9616b96f69735fb7f3",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "cd823c5f_930df973",
        "filename": "src/syscall/net.go",
        "patchSetId": 1
      },
      "lineNbr": 9,
      "author": {
        "id": 5206
      },
      "writtenOn": "2017-03-08T15:06:21Z",
      "side": 1,
      "message": "What is IONotification for?  What could the function possibly do with it?",
      "revId": "14933a3ab3e438f3d1993c9616b96f69735fb7f3",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3ff2c02f_ae395db6",
        "filename": "src/syscall/net.go",
        "patchSetId": 1
      },
      "lineNbr": 9,
      "author": {
        "id": 5076
      },
      "writtenOn": "2017-03-08T16:40:09Z",
      "side": 1,
      "message": "i\u0027m not a windows user, but as far as i understand the runtime-integrated network poller for windows in internal/poll and runtime packages may use io completion port (iocp) or registered io (rio) for io multiplexing (the existing implementation uses only iocp.) looks like both mechanisms are asynch io and need to interact with a user-defined io function to notify the result of io request to the user-defined function and to allow the user-defined function to manipulate, mainly canceling, io request.\n\nionotification can be used to exchange such stuff btw user-defined functions and the runtime-integrated network poller.",
      "parentUuid": "cd823c5f_930df973",
      "revId": "14933a3ab3e438f3d1993c9616b96f69735fb7f3",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "dc4fc413_ebda43cc",
        "filename": "src/syscall/net.go",
        "patchSetId": 1
      },
      "lineNbr": 9,
      "author": {
        "id": 5056
      },
      "writtenOn": "2017-03-08T16:56:22Z",
      "side": 1,
      "message": "Can you point to code in x/net that needs this, so I can understand the context better?",
      "parentUuid": "3ff2c02f_ae395db6",
      "revId": "14933a3ab3e438f3d1993c9616b96f69735fb7f3",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3fdbacb4_1e70edfe",
        "filename": "src/syscall/net.go",
        "patchSetId": 1
      },
      "lineNbr": 9,
      "author": {
        "id": 5076
      },
      "writtenOn": "2017-03-08T17:06:22Z",
      "side": 1,
      "message": "i guess that the point you are looking for is: https://go-review.googlesource.com/c/37038/12/src/internal/poll/fd_windows.go#829",
      "parentUuid": "dc4fc413_ebda43cc",
      "revId": "14933a3ab3e438f3d1993c9616b96f69735fb7f3",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d69fb074_441bc19b",
        "filename": "src/syscall/net.go",
        "patchSetId": 1
      },
      "lineNbr": 9,
      "author": {
        "id": 5056
      },
      "writtenOn": "2017-03-08T17:24:45Z",
      "side": 1,
      "message": "I\u0027m looking for something in x/net already that needs these completion things. \n\nYou pointed instead to a pending CL, one that I don\u0027t understand and am trying to eliminate the need for.",
      "parentUuid": "3fdbacb4_1e70edfe",
      "revId": "14933a3ab3e438f3d1993c9616b96f69735fb7f3",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7fc6a992_0917d2e8",
        "filename": "src/syscall/net.go",
        "patchSetId": 1
      },
      "lineNbr": 9,
      "author": {
        "id": 5076
      },
      "writtenOn": "2017-03-08T17:45:10Z",
      "side": 1,
      "message": "there\u0027s no iocp or rio thing in x/net, because x/net{ipv4,ipv6} doesn\u0027t support windows due to the lack of support for readmsg and file methods of conn and file{conn,packetconn} functions in the net package of the standard library.\n\ni\u0027m still not sure what you are looking for.",
      "parentUuid": "d69fb074_441bc19b",
      "revId": "14933a3ab3e438f3d1993c9616b96f69735fb7f3",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9eb4944a_2be5c100",
        "filename": "src/syscall/net.go",
        "patchSetId": 1
      },
      "lineNbr": 9,
      "author": {
        "id": 5056
      },
      "writtenOn": "2017-03-08T17:50:31Z",
      "side": 1,
      "message": "What I\u0027m looking for is an example of a Read or Write function and how it would use the IONotification.",
      "parentUuid": "7fc6a992_0917d2e8",
      "revId": "14933a3ab3e438f3d1993c9616b96f69735fb7f3",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c6b9c89c_f07ab07e",
        "filename": "src/syscall/net.go",
        "patchSetId": 1
      },
      "lineNbr": 9,
      "author": {
        "id": 5076
      },
      "writtenOn": "2017-03-08T18:30:46Z",
      "side": 1,
      "message": "Then, I think we need help from Windows expert. /cc Mr. Brainman\n\nMr. Brainman:\n\nThis change tries to declare an interface that can make user-defined IO functions work together with the runtime-integrated network poller. On Unix variants (and probably on Plan 9), IO multiplexing is basically blocking/non-blocking synch. IO, so any IO handoff stuff is not required. On Windows, as far as I understand, we need to use async. IO, known as IOCP or RIO, for IO multiplexing, but we are not sure about the detail of such mechanisms.\n\nCan you please help us to understand what we should do for Windows?\n\nMr. Cox:\n\nYou ignored my mention to https://github.com/golang/go/blob/master/src/internal/poll/fd_windows.go#L156 but I still think it could help to understand or suppose that how user-defined IO functions interact w/ the runtime-integrated network poller.",
      "parentUuid": "9eb4944a_2be5c100",
      "revId": "14933a3ab3e438f3d1993c9616b96f69735fb7f3",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "490cf769_fd9ffed6",
        "filename": "src/syscall/net.go",
        "patchSetId": 1
      },
      "lineNbr": 9,
      "author": {
        "id": 5206
      },
      "writtenOn": "2017-03-08T19:04:04Z",
      "side": 1,
      "message": "There is no need for an IONotification to support Windows.  The Windows code is more complex than the Unix code, but it fundamentally works the same way: the function you pass to RawConn.Read or RawConn.Write is equivalent to the function that the code in internal/poll/fd_windows.go passes to rsrv.ExecIO.  That function doesn\u0027t need an IONotification.",
      "parentUuid": "c6b9c89c_f07ab07e",
      "revId": "14933a3ab3e438f3d1993c9616b96f69735fb7f3",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "08f3f1b4_c476c37a",
        "filename": "src/syscall/net.go",
        "patchSetId": 1
      },
      "lineNbr": 9,
      "author": {
        "id": 5056
      },
      "writtenOn": "2017-03-08T19:23:43Z",
      "side": 1,
      "message": "Mikio, you\u0027re right that I misread the internal/poll link at first. Given what Ian said, though, it sounds like we can drop IONotification from this interface. Let\u0027s do that and try to do the Windows support without it, and we can always come back and change it later in the cycle.",
      "parentUuid": "490cf769_fd9ffed6",
      "revId": "14933a3ab3e438f3d1993c9616b96f69735fb7f3",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "44a2f66a_ee1d9cb8",
        "filename": "src/syscall/net.go",
        "patchSetId": 1
      },
      "lineNbr": 9,
      "author": {
        "id": 5070
      },
      "writtenOn": "2017-03-08T22:37:47Z",
      "side": 1,
      "message": "I agree with what Ian and Russ said. You should go with what you need to solve problems you have. We will deal with future problems when they come.",
      "parentUuid": "08f3f1b4_c476c37a",
      "revId": "14933a3ab3e438f3d1993c9616b96f69735fb7f3",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "746c8a03_6a22f7b3",
        "filename": "src/syscall/net.go",
        "patchSetId": 1
      },
      "lineNbr": 9,
      "author": {
        "id": 5076
      },
      "writtenOn": "2017-03-09T01:59:27Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "44a2f66a_ee1d9cb8",
      "revId": "14933a3ab3e438f3d1993c9616b96f69735fb7f3",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "546057b0_979f1fa1",
        "filename": "src/syscall/net.go",
        "patchSetId": 1
      },
      "lineNbr": 12,
      "author": {
        "id": 5056
      },
      "writtenOn": "2017-03-08T19:23:43Z",
      "side": 1,
      "message": "I wonder if SetReadDeadline and SetWriteDeadline belong here.",
      "revId": "14933a3ab3e438f3d1993c9616b96f69735fb7f3",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "029d7f36_a719852c",
        "filename": "src/syscall/net.go",
        "patchSetId": 1
      },
      "lineNbr": 12,
      "author": {
        "id": 5076
      },
      "writtenOn": "2017-03-09T01:59:27Z",
      "side": 1,
      "message": "I personally don\u0027t want to mandate a RawConn implementation to have IO deadline control, because I imagine that I probably want only goroutine yielding and IO event notification stuff when I have to use some fancy networking hardware stuff.",
      "parentUuid": "546057b0_979f1fa1",
      "revId": "14933a3ab3e438f3d1993c9616b96f69735fb7f3",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705",
      "unresolved": true
    }
  ]
}