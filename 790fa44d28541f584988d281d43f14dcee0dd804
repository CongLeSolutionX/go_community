{
  "comments": [
    {
      "key": {
        "uuid": "9b41e813_f3978ec6",
        "filename": "src/html/template/content.go",
        "patchSetId": 4
      },
      "lineNbr": 93,
      "author": {
        "id": 17511
      },
      "writtenOn": "2017-11-22T15:29:05Z",
      "side": 1,
      "message": "Is this definitely needed?",
      "range": {
        "startLine": 93,
        "startChar": 14,
        "endLine": 93,
        "endChar": 0
      },
      "revId": "790fa44d28541f584988d281d43f14dcee0dd804",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7192fb13_c535b70f",
        "filename": "src/html/template/content.go",
        "patchSetId": 4
      },
      "lineNbr": 93,
      "author": {
        "id": 23250
      },
      "writtenOn": "2017-11-22T20:26:53Z",
      "side": 1,
      "message": "The srcset attribute does not necessarily include delimitter space. In fact, the following attribute values ​​are reasonable.\n\n  \u003cimg src\u003d\"bar.jpg\" alt\u003d\"yay\" srcset\u003d\"foo.jpg\"\u003e\n\nIn order to deal with such a special case, I think that this is necessary.",
      "parentUuid": "9b41e813_f3978ec6",
      "range": {
        "startLine": 93,
        "startChar": 14,
        "endLine": 93,
        "endChar": 0
      },
      "revId": "790fa44d28541f584988d281d43f14dcee0dd804",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7edcb76f_0d2675e1",
        "filename": "src/html/template/url.go",
        "patchSetId": 4
      },
      "lineNbr": 135,
      "author": {
        "id": 17511
      },
      "writtenOn": "2017-11-22T15:29:05Z",
      "side": 1,
      "message": "Should this find regions separated by characters and url process each separately?\n\nThis seems like it will probably not do the right thing for an input like\n\nabout:invalid# , javascript:alert(1)",
      "range": {
        "startLine": 135,
        "startChar": 8,
        "endLine": 135,
        "endChar": 20
      },
      "revId": "790fa44d28541f584988d281d43f14dcee0dd804",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7b335ac7_28723b9c",
        "filename": "src/html/template/url.go",
        "patchSetId": 4
      },
      "lineNbr": 135,
      "author": {
        "id": 23250
      },
      "writtenOn": "2017-11-22T20:26:53Z",
      "side": 1,
      "message": "I don\u0027t think the url processes should be executed separately. \nBoth are based on safe URLs. (It is written also in Srcset type comment)\nThe current behavior would be correct with this test cases.\n\n1. Without double quote:\n\n  \u003cimg srcset\u003d{{.}}\u003e with `about:invalid# , javascript:alert(1)`\n\nTo\n\n  \u003cimg srcset\u003dabout:invalid#\u0026#32;,\u0026#32;javascript:alert(1)\u003e\n\n2. With double quote:\n\n  \u003cimg srcset\u003d{{.}}\u003e with `about:invalid# , javascript:alert(1)`\n\nTo\n\n  \u003cimg srcset\u003dabout:invalid# , javascript:alert(1)\u003e\n\nAny cases would be valid according to the w3c specification and its validator.\n\nP.S.\n\nBtw, I think this line can be replaced with urlEscaper(args...). I\u0027m going to fix it.",
      "parentUuid": "7edcb76f_0d2675e1",
      "range": {
        "startLine": 135,
        "startChar": 8,
        "endLine": 135,
        "endChar": 20
      },
      "revId": "790fa44d28541f584988d281d43f14dcee0dd804",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d73cd335_6bde6121",
        "filename": "src/html/template/url.go",
        "patchSetId": 4
      },
      "lineNbr": 135,
      "author": {
        "id": 17511
      },
      "writtenOn": "2017-12-01T21:29:41Z",
      "side": 1,
      "message": "If we wouldn\u0027t allow a javascript: URL at the beginning we shouldn\u0027t allow it in second place in a comma separated list.",
      "parentUuid": "7b335ac7_28723b9c",
      "range": {
        "startLine": 135,
        "startChar": 8,
        "endLine": 135,
        "endChar": 20
      },
      "revId": "790fa44d28541f584988d281d43f14dcee0dd804",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5549a006_14cc8a2a",
        "filename": "src/html/template/url.go",
        "patchSetId": 4
      },
      "lineNbr": 135,
      "author": {
        "id": 23250
      },
      "writtenOn": "2017-12-02T17:16:12Z",
      "side": 1,
      "message": "How do you think restrictions should be added?\nShould javascript: scheme be skipped on this func?",
      "parentUuid": "d73cd335_6bde6121",
      "range": {
        "startLine": 135,
        "startChar": 8,
        "endLine": 135,
        "endChar": 20
      },
      "revId": "790fa44d28541f584988d281d43f14dcee0dd804",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "80607677_523f2b7a",
        "filename": "src/html/template/url.go",
        "patchSetId": 4
      },
      "lineNbr": 135,
      "author": {
        "id": 17511
      },
      "writtenOn": "2017-12-05T14:20:47Z",
      "side": 1,
      "message": "I think we should consistently filter URLs.  URLs in media srcs do not cause XSS in modern browsers (usually) but I don\u0027t know about older browsers and changing a srcset with a single URL to a src should not cause a change in behavior.\n\nhttps://github.com/golang/go/issues/17441#issuecomment-349316862 has a patch that shows how we could use the existing code to filter and normalize URLs in a srcset value.\n\nI can try to attach it as a patchset to this review if you\u0027d like or you can incorporate it on your end.",
      "parentUuid": "5549a006_14cc8a2a",
      "range": {
        "startLine": 135,
        "startChar": 8,
        "endLine": 135,
        "endChar": 20
      },
      "revId": "790fa44d28541f584988d281d43f14dcee0dd804",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "04b17508_b029ce11",
        "filename": "src/html/template/url.go",
        "patchSetId": 4
      },
      "lineNbr": 135,
      "author": {
        "id": 23250
      },
      "writtenOn": "2017-12-05T17:26:12Z",
      "side": 1,
      "message": "I have tried to attach your patch, but couldn\u0027t. So I have fix a few syntax error and algorithm.\nThe behavior of srcset test is modified if url is not safe.\nCould you review the current patch set?",
      "parentUuid": "80607677_523f2b7a",
      "range": {
        "startLine": 135,
        "startChar": 8,
        "endLine": 135,
        "endChar": 20
      },
      "revId": "790fa44d28541f584988d281d43f14dcee0dd804",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705",
      "unresolved": true
    }
  ]
}