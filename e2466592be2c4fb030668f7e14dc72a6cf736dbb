{
  "comments": [
    {
      "key": {
        "uuid": "fb3ac2df_a7825844",
        "filename": "src/runtime/syscall_windows.go",
        "patchSetId": 3
      },
      "lineNbr": 45,
      "author": {
        "id": 5167
      },
      "writtenOn": "2018-07-26T18:02:34Z",
      "side": 1,
      "message": "This could be more succinct. E.g., \"compileCallback: callback must have type func(...) uintptr\"\n\nI worry that saying \"args\" for the arguments makes it look like it has to be a single argument. \"...\" could be confused for a variadic function, but I think is clearer on balance.",
      "revId": "e2466592be2c4fb030668f7e14dc72a6cf736dbb",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "39665692_7a3fffcd",
        "filename": "src/runtime/syscall_windows.go",
        "patchSetId": 3
      },
      "lineNbr": 45,
      "author": {
        "id": 24716
      },
      "writtenOn": "2018-07-27T02:47:59Z",
      "side": 1,
      "message": "I tried to make it clear that the argument passed must be a function of type func(args) uintptr.\n\nIMO, \"compileCallback: callback must have type func(...) uintptr\" would make someone think \"this might be an internal error\". I agree with you about \"...\" being confused for a variadic function.\n\nHow about something like \"compileCallback: expected function of type func(argument(s)) uintptr\"?",
      "parentUuid": "fb3ac2df_a7825844",
      "revId": "e2466592be2c4fb030668f7e14dc72a6cf736dbb",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1317bc56_415781ca",
        "filename": "src/runtime/syscall_windows.go",
        "patchSetId": 3
      },
      "lineNbr": 45,
      "author": {
        "id": 24716
      },
      "writtenOn": "2018-07-27T02:56:56Z",
      "side": 1,
      "message": "Also, I just remembered that some callback functions return an int. So we definitely can\u0027t say \"expected func(argument(s)) uintptr\".\n\nWe could mention the requirements clearly in the doc. We could also create a proper panic message for the second and third case. But we need to think of something for the first case.",
      "parentUuid": "39665692_7a3fffcd",
      "revId": "e2466592be2c4fb030668f7e14dc72a6cf736dbb",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f33312af_8dafe5c4",
        "filename": "src/runtime/syscall_windows.go",
        "patchSetId": 3
      },
      "lineNbr": 45,
      "author": {
        "id": 5167
      },
      "writtenOn": "2018-07-27T14:40:13Z",
      "side": 1,
      "message": "\"func(argument(s))\" seems like an odd mix of Go syntax and prose. Like my internal type-checker wants the meaning of the parens to be the same, but the outer parens are Go parens and the inner ones are English parens. :)\n\n\u003e Also, I just remembered that some callback functions return an int. So we definitely can\u0027t say \"expected func(argument(s)) uintptr\".\n\nHmm. I see what you\u0027re getting at; we only check the size of the result, not its specific type. It isn\u0027t guaranteed that returning int will work, though. Go\u0027s int isn\u0027t necessarily the same size as uintptr. But this clearly would accept, for example, \"type T uintptr\" or \"type T struct {uintptr}\".\n\nMaybe we can solve both of these by getting away from Go syntax entirely. \"compileCallback: expected function with one uintptr-sized result\"? Sort of like your current second error message.",
      "parentUuid": "1317bc56_415781ca",
      "revId": "e2466592be2c4fb030668f7e14dc72a6cf736dbb",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "357d0d89_f93d4181",
        "filename": "src/runtime/syscall_windows.go",
        "patchSetId": 3
      },
      "lineNbr": 45,
      "author": {
        "id": 24716
      },
      "writtenOn": "2018-07-27T15:26:37Z",
      "side": 1,
      "message": "\u003e we only check the size of the result, not its specific type. It isn\u0027t guaranteed that returning int will work, though.\n\nI took a quick look at the MSDN docs. I think almost all of their WinAPI variables are of 8-bits or more. Not sure though. Let\u0027s keep it as it is for now.\n\n\u003e \"compileCallback: expected function with one uintptr-sized result\"\n\nLooks good. I\u0027ll make the change.",
      "parentUuid": "f33312af_8dafe5c4",
      "revId": "e2466592be2c4fb030668f7e14dc72a6cf736dbb",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6763953f_6c8ec3ec",
        "filename": "src/runtime/syscall_windows.go",
        "patchSetId": 3
      },
      "lineNbr": 53,
      "author": {
        "id": 5167
      },
      "writtenOn": "2018-07-26T18:02:34Z",
      "side": 1,
      "message": "I like that your first message mentions a specific form of type for the function. That says what the problem is specifically and succinctly and guides the developer toward a solution. The fact that there are three cases here seems like just an implementation artifact. I suggest just using the same message for all three cases.",
      "revId": "e2466592be2c4fb030668f7e14dc72a6cf736dbb",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7a6749ff_39445100",
        "filename": "src/runtime/syscall_windows.go",
        "patchSetId": 3
      },
      "lineNbr": 53,
      "author": {
        "id": 24716
      },
      "writtenOn": "2018-07-27T02:47:59Z",
      "side": 1,
      "message": "The third panic message would have to be different. The first two cases checks the expected function type.\n\nBut the third message informs about the input argument size being more than the size of uintptr. I don\u0027t think we can mention that in the message of the first two cases.",
      "parentUuid": "6763953f_6c8ec3ec",
      "revId": "e2466592be2c4fb030668f7e14dc72a6cf736dbb",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6402a102_b38d4259",
        "filename": "src/runtime/syscall_windows.go",
        "patchSetId": 3
      },
      "lineNbr": 53,
      "author": {
        "id": 5167
      },
      "writtenOn": "2018-07-27T14:40:13Z",
      "side": 1,
      "message": "By my count, the first three are about the return type and the fourth is about the input arguments. Either way, I agree that the panic on line 58 shouldn\u0027t be the same as the others. I think the current message is fine.",
      "parentUuid": "7a6749ff_39445100",
      "revId": "e2466592be2c4fb030668f7e14dc72a6cf736dbb",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2bf69ba8_99095f46",
        "filename": "src/runtime/syscall_windows.go",
        "patchSetId": 3
      },
      "lineNbr": 53,
      "author": {
        "id": 24716
      },
      "writtenOn": "2018-07-27T15:26:37Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "6402a102_b38d4259",
      "revId": "e2466592be2c4fb030668f7e14dc72a6cf736dbb",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "567be403_b7e18bc0",
        "filename": "src/syscall/syscall_windows.go",
        "patchSetId": 3
      },
      "lineNbr": 125,
      "author": {
        "id": 5167
      },
      "writtenOn": "2018-07-26T18:02:34Z",
      "side": 1,
      "message": "Remove the hyphen.",
      "range": {
        "startLine": 125,
        "startChar": 60,
        "endLine": 125,
        "endChar": 61
      },
      "revId": "e2466592be2c4fb030668f7e14dc72a6cf736dbb",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4ff91477_e14aa8d9",
        "filename": "src/syscall/syscall_windows.go",
        "patchSetId": 3
      },
      "lineNbr": 125,
      "author": {
        "id": 5167
      },
      "writtenOn": "2018-07-26T18:02:34Z",
      "side": 1,
      "message": "The body isn\u0027t part of a function\u0027s signature, so I would just remove the \"{ ... }\".",
      "range": {
        "startLine": 125,
        "startChar": 80,
        "endLine": 125,
        "endChar": 88
      },
      "revId": "e2466592be2c4fb030668f7e14dc72a6cf736dbb",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "517675f3_7ca93e6e",
        "filename": "src/syscall/syscall_windows.go",
        "patchSetId": 3
      },
      "lineNbr": 125,
      "author": {
        "id": 5167
      },
      "writtenOn": "2018-07-26T18:02:34Z",
      "side": 1,
      "message": "Same thought about using \"args\" vs something like \"...\"",
      "range": {
        "startLine": 125,
        "startChar": 67,
        "endLine": 125,
        "endChar": 71
      },
      "revId": "e2466592be2c4fb030668f7e14dc72a6cf736dbb",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7988f3bb_8f1f5a93",
        "filename": "src/syscall/syscall_windows.go",
        "patchSetId": 3
      },
      "lineNbr": 125,
      "author": {
        "id": 24716
      },
      "writtenOn": "2018-07-27T02:47:59Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "4ff91477_e14aa8d9",
      "range": {
        "startLine": 125,
        "startChar": 80,
        "endLine": 125,
        "endChar": 88
      },
      "revId": "e2466592be2c4fb030668f7e14dc72a6cf736dbb",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "43d113c3_76a6f50c",
        "filename": "src/syscall/syscall_windows.go",
        "patchSetId": 3
      },
      "lineNbr": 125,
      "author": {
        "id": 24716
      },
      "writtenOn": "2018-07-27T02:47:59Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "517675f3_7ca93e6e",
      "range": {
        "startLine": 125,
        "startChar": 67,
        "endLine": 125,
        "endChar": 71
      },
      "revId": "e2466592be2c4fb030668f7e14dc72a6cf736dbb",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "74992a79_1c736463",
        "filename": "src/syscall/syscall_windows.go",
        "patchSetId": 3
      },
      "lineNbr": 125,
      "author": {
        "id": 24716
      },
      "writtenOn": "2018-07-27T02:47:59Z",
      "side": 1,
      "message": "Will change to \"The argument is expected to be of type func(argument(s)) uintptr\". Or something similar. We need to decide that.",
      "parentUuid": "567be403_b7e18bc0",
      "range": {
        "startLine": 125,
        "startChar": 60,
        "endLine": 125,
        "endChar": 61
      },
      "revId": "e2466592be2c4fb030668f7e14dc72a6cf736dbb",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "64cfb107_12424827",
        "filename": "src/syscall/syscall_windows.go",
        "patchSetId": 3
      },
      "lineNbr": 132,
      "author": {
        "id": 5167
      },
      "writtenOn": "2018-07-26T18:02:34Z",
      "side": 1,
      "message": "Same.",
      "revId": "e2466592be2c4fb030668f7e14dc72a6cf736dbb",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6c1b7641_2de0cb37",
        "filename": "src/syscall/syscall_windows.go",
        "patchSetId": 3
      },
      "lineNbr": 132,
      "author": {
        "id": 24716
      },
      "writtenOn": "2018-07-27T02:47:59Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "64cfb107_12424827",
      "revId": "e2466592be2c4fb030668f7e14dc72a6cf736dbb",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705",
      "unresolved": false
    }
  ]
}