{
  "comments": [
    {
      "key": {
        "uuid": "33c90d6f_725441b2",
        "filename": "src/cmd/compile/internal/gc/align.go",
        "patchSetId": 5
      },
      "lineNbr": 178,
      "author": {
        "id": 5440
      },
      "writtenOn": "2020-09-25T20:35:06Z",
      "side": 1,
      "message": "Rename to \"reportInvalidRecursiveType\".",
      "range": {
        "startLine": 178,
        "startChar": 5,
        "endLine": 178,
        "endChar": 21
      },
      "revId": "11ca96c3f09e9a1f50e340fbbf87394c304fb5a1",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "db8f4cdf_44c58731",
        "filename": "src/cmd/compile/internal/gc/align.go",
        "patchSetId": 5
      },
      "lineNbr": 178,
      "author": {
        "id": 14665
      },
      "writtenOn": "2020-09-26T01:07:44Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "33c90d6f_725441b2",
      "range": {
        "startLine": 178,
        "startChar": 5,
        "endLine": 178,
        "endChar": 21
      },
      "revId": "11ca96c3f09e9a1f50e340fbbf87394c304fb5a1",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ae6584f7_f6d84768",
        "filename": "src/cmd/compile/internal/gc/align.go",
        "patchSetId": 5
      },
      "lineNbr": 189,
      "author": {
        "id": 5440
      },
      "writtenOn": "2020-09-25T20:35:06Z",
      "side": 1,
      "message": "Are there test cases that make sure this is working as expected? E.g., I mentioned on Slack\n\n    type (a b; b c; c d; d c)\n\nbut I don\u0027t see anything like that in the test cases you had to update. (I didn\u0027t look too closely though, so maybe I missed one.)",
      "range": {
        "startLine": 187,
        "startChar": 0,
        "endLine": 189,
        "endChar": 3
      },
      "revId": "11ca96c3f09e9a1f50e340fbbf87394c304fb5a1",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0f76798f_328cd6cf",
        "filename": "src/cmd/compile/internal/gc/align.go",
        "patchSetId": 5
      },
      "lineNbr": 189,
      "author": {
        "id": 14665
      },
      "writtenOn": "2020-09-26T01:07:44Z",
      "side": 1,
      "message": "Added this test case.",
      "parentUuid": "ae6584f7_f6d84768",
      "range": {
        "startLine": 187,
        "startChar": 0,
        "endLine": 189,
        "endChar": 3
      },
      "revId": "11ca96c3f09e9a1f50e340fbbf87394c304fb5a1",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7cd4fb2f_d9cf0fe9",
        "filename": "src/cmd/compile/internal/gc/align.go",
        "patchSetId": 5
      },
      "lineNbr": 228,
      "author": {
        "id": 5440
      },
      "writtenOn": "2020-09-25T20:35:06Z",
      "side": 1,
      "message": "Push these into errRecursiveType.",
      "range": {
        "startLine": 227,
        "startChar": 0,
        "endLine": 228,
        "endChar": 63
      },
      "revId": "11ca96c3f09e9a1f50e340fbbf87394c304fb5a1",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ac682452_f2017b80",
        "filename": "src/cmd/compile/internal/gc/align.go",
        "patchSetId": 5
      },
      "lineNbr": 228,
      "author": {
        "id": 14665
      },
      "writtenOn": "2020-09-26T01:07:44Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "7cd4fb2f_d9cf0fe9",
      "range": {
        "startLine": 227,
        "startChar": 0,
        "endLine": 228,
        "endChar": 63
      },
      "revId": "11ca96c3f09e9a1f50e340fbbf87394c304fb5a1",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a512aa8f_bfd0f7f9",
        "filename": "src/cmd/compile/internal/gc/align.go",
        "patchSetId": 5
      },
      "lineNbr": 228,
      "author": {
        "id": 5440
      },
      "writtenOn": "2020-09-26T02:19:57Z",
      "side": 1,
      "message": "By these I also meant thte skipDowidthForErrRecursive assignments.\n\nAnd now I\u0027m thinking the t.Broke() and t.SetBroke() calls belong there too.",
      "parentUuid": "ac682452_f2017b80",
      "range": {
        "startLine": 227,
        "startChar": 0,
        "endLine": 228,
        "endChar": 63
      },
      "revId": "11ca96c3f09e9a1f50e340fbbf87394c304fb5a1",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "cc9d24fd_3ccbb48d",
        "filename": "src/cmd/compile/internal/gc/align.go",
        "patchSetId": 5
      },
      "lineNbr": 348,
      "author": {
        "id": 5440
      },
      "writtenOn": "2020-09-25T20:35:06Z",
      "side": 1,
      "message": "I don\u0027t understand what\u0027s going on here. This needs a comment.\n\nAlso, justify why this case always needs to print the full stack. That seems suspicious to me.",
      "range": {
        "startLine": 348,
        "startChar": 12,
        "endLine": 348,
        "endChar": 42
      },
      "revId": "11ca96c3f09e9a1f50e340fbbf87394c304fb5a1",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bf4be15b_6c268550",
        "filename": "src/cmd/compile/internal/gc/align.go",
        "patchSetId": 5
      },
      "lineNbr": 348,
      "author": {
        "id": 14665
      },
      "writtenOn": "2020-09-26T01:07:44Z",
      "side": 1,
      "message": "This is exactly for handling your test case above: type (a b; b c; c d; d c)\n\nWhen we reach d the second time in the last \"d c\", we report the error, but this time, the stack only contains \"d\". That\u0027s why there\u0027s a check that `if nt :\u003d asNode(t.Nod).Name.Param.Ntype; nt.Type.Broke()`, otherwise, we will report invalid recursive type for all type \"a\", \"b\", \"c\", and \"d\".\n\nCurrently, go1.15 also reports 4 errors this case.",
      "parentUuid": "cc9d24fd_3ccbb48d",
      "range": {
        "startLine": 348,
        "startChar": 12,
        "endLine": 348,
        "endChar": 42
      },
      "revId": "11ca96c3f09e9a1f50e340fbbf87394c304fb5a1",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "57510855_153cb72f",
        "filename": "src/cmd/compile/internal/gc/align.go",
        "patchSetId": 5
      },
      "lineNbr": 348,
      "author": {
        "id": 5440
      },
      "writtenOn": "2020-09-26T02:19:57Z",
      "side": 1,
      "message": "Okay, I can believe this is necessary to suppress the duplicate error messages. It still needs a comment to that effect.\n\nAlso, do you have test cases that exercise each of these cases?\n\n1. !nt.Type.Broke()\n2. nt.Type.Broke() \u0026\u0026 nt.Type \u003d\u003d t\n3. nt.Type.Broke() \u0026\u0026 nt.Type !\u003d t\n\nIt\u0027s not immediately obvious to me when these cases happen.\n\nIt\u0027s also odd to me that we\u0027re printing errors here when nt.Type is already broken, but not when it\u0027s okay? Usually we only skip printing errors when we know an error has already been printed, so this seems backwards.",
      "parentUuid": "bf4be15b_6c268550",
      "range": {
        "startLine": 348,
        "startChar": 12,
        "endLine": 348,
        "endChar": 42
      },
      "revId": "11ca96c3f09e9a1f50e340fbbf87394c304fb5a1",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "76a758f2_cdc2ed44",
        "filename": "test/fixedbugs/issue23823.go",
        "patchSetId": 5
      },
      "lineNbr": 13,
      "author": {
        "id": 5440
      },
      "writtenOn": "2020-09-25T20:35:06Z",
      "side": 1,
      "message": "This seems bad, IMO.\n\nIt looks like go/types just omits this mention (\"I2 refers to I2\"). I\u0027d rather be consistent with that behavior than print a misleading type. (\"interface {}\" is a different type than \"I1\" or \"interface { I2 }\").",
      "revId": "11ca96c3f09e9a1f50e340fbbf87394c304fb5a1",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "17e75e35_463710bf",
        "filename": "test/fixedbugs/issue23823.go",
        "patchSetId": 5
      },
      "lineNbr": 13,
      "author": {
        "id": 14665
      },
      "writtenOn": "2020-09-26T01:07:44Z",
      "side": 1,
      "message": "gotype reports that:\n\n../test/fixedbugs/issue23823.go:14:6: illegal cycle in declaration of I2\n../test/fixedbugs/issue23823.go:14:6: \tI2 refers to\n../test/fixedbugs/issue23823.go:9:6: \tI1 refers to\n../test/fixedbugs/issue23823.go:14:6: \tI2\n\nThe issue with us is we don\u0027t create new type for alias (I1), so the underlying type is used. That the same issue that we can\u0027t use alias name in error reports involved alias type in current implementation.",
      "parentUuid": "76a758f2_cdc2ed44",
      "revId": "11ca96c3f09e9a1f50e340fbbf87394c304fb5a1",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5a1f6094_1da11003",
        "filename": "test/fixedbugs/issue23823.go",
        "patchSetId": 5
      },
      "lineNbr": 13,
      "author": {
        "id": 5440
      },
      "writtenOn": "2020-09-26T02:19:57Z",
      "side": 1,
      "message": "Odd, that\u0027s not what I see:\n\n```\n$ gotype test/fixedbugs/issue23823.go\ntest/fixedbugs/issue23823.go:13:6: illegal cycle in declaration of I2\ntest/fixedbugs/issue23823.go:13:6: \tI2 refers to\ntest/fixedbugs/issue23823.go:13:6: \tI2\n```\n\nIt\u0027s certainly preferable to include I1, but I\u0027m wondering why we\u0027re getting different behavior here.",
      "parentUuid": "17e75e35_463710bf",
      "revId": "11ca96c3f09e9a1f50e340fbbf87394c304fb5a1",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705",
      "unresolved": true
    }
  ]
}