{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "5fec1e90_fc543e82",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 5206
      },
      "writtenOn": "2024-08-21T23:21:06Z",
      "side": 1,
      "message": "I\u0027m puzzled by this.  The implementations of syscall.Getwd don\u0027t work in deep directory trees.  But I have to admit that this code seems to be a correct translation of the existing code.  How is this working in general?  Is it just relying on the PWD environment variable?",
      "revId": "cf178f58a5846142d78a3b9ea11bf23a1f30d99b",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "56936b23_8961ba87",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 34895
      },
      "writtenOn": "2024-08-21T23:53:18Z",
      "side": 1,
      "message": "Looking at the comments on the other CL, I think a good intermediate step is to fall back to the existing general algorithm if syscall.Getwd fails because the name is too long.",
      "parentUuid": "5fec1e90_fc543e82",
      "revId": "cf178f58a5846142d78a3b9ea11bf23a1f30d99b",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "82c1cf4a_deaba970",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 26451
      },
      "writtenOn": "2024-08-22T02:32:57Z",
      "side": 1,
      "message": "Currently the code being removed is not used at all:\n - all platforms have `syscall.ImplementsGetwd \u003d true`;\n - if `PWD` env var is used and it\u0027s longed than PATH_MAX, ENAMETOOLONG is returned from the stat call and it falls back to using `syscall.Getwd`;\n - if an error is returned from syscall.Getwd, it is returned (i.e. there\u0027s no fallback to the code being removed).\n\nIf such a fallback is to be implemented, the path returned is hardly usable for anything but logging, since all syscalls will return ENAMETOOLONG.\n\n(Not really related to this, but getcwd syscall on Linux can never return any path longer than PATH_MAX no matter what the buffer provided is).\n\nThe above is true for at least Linux, but I _think_ most other platforms work in a similar way, i.e. it doesn\u0027t make sense to return a longer path from os.Getwd which can\u0027t be used anyway.",
      "parentUuid": "56936b23_8961ba87",
      "revId": "cf178f58a5846142d78a3b9ea11bf23a1f30d99b",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    }
  ]
}