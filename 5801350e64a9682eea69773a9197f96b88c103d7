{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "a9e9e4ca_711038b8",
        "filename": "src/runtime/cgo/abi_mips64x.h",
        "patchSetId": 31
      },
      "lineNbr": 46,
      "author": {
        "id": 13315
      },
      "writtenOn": "2022-06-17T21:20:42Z",
      "side": 1,
      "message": "You may need to define empty macros for softfloat mode?",
      "revId": "5801350e64a9682eea69773a9197f96b88c103d7",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b45db3a9_9389d544",
        "filename": "src/runtime/cgo/abi_mips64x.h",
        "patchSetId": 31
      },
      "lineNbr": 46,
      "author": {
        "id": 45165
      },
      "writtenOn": "2022-06-25T08:17:04Z",
      "side": 1,
      "message": "Yes, I fixed it.",
      "parentUuid": "a9e9e4ca_711038b8",
      "revId": "5801350e64a9682eea69773a9197f96b88c103d7",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b7fa243a_75a3cfb7",
        "filename": "src/runtime/cgo/gcc_mips64x.S",
        "patchSetId": 31
      },
      "lineNbr": 52,
      "author": {
        "id": 13315
      },
      "writtenOn": "2022-06-17T21:20:42Z",
      "side": 1,
      "message": "Just say R25.",
      "range": {
        "startLine": 52,
        "startChar": 60,
        "endLine": 52,
        "endChar": 72
      },
      "revId": "5801350e64a9682eea69773a9197f96b88c103d7",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "954c90a8_a3a9483b",
        "filename": "src/runtime/cgo/gcc_mips64x.S",
        "patchSetId": 31
      },
      "lineNbr": 52,
      "author": {
        "id": 45165
      },
      "writtenOn": "2022-06-25T08:17:04Z",
      "side": 1,
      "message": "Yes, I fixed it.",
      "parentUuid": "b7fa243a_75a3cfb7",
      "range": {
        "startLine": 52,
        "startChar": 60,
        "endLine": 52,
        "endChar": 72
      },
      "revId": "5801350e64a9682eea69773a9197f96b88c103d7",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "80533aad_cf537424",
        "filename": "src/runtime/cgo/gcc_mips64x.S",
        "patchSetId": 31
      },
      "lineNbr": 53,
      "author": {
        "id": 13315
      },
      "writtenOn": "2022-06-17T21:20:42Z",
      "side": 1,
      "message": "Why do you need to save R25? This function doesn\u0027t seem necessary to preserve R25.",
      "range": {
        "startLine": 53,
        "startChar": 7,
        "endLine": 53,
        "endChar": 16
      },
      "revId": "5801350e64a9682eea69773a9197f96b88c103d7",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "6a10fdf0_417bb674",
        "filename": "src/runtime/cgo/gcc_mips64x.S",
        "patchSetId": 31
      },
      "lineNbr": 53,
      "author": {
        "id": 45165
      },
      "writtenOn": "2022-06-25T08:17:04Z",
      "side": 1,
      "message": "Yes, we reserved R25 in register allocator, it is not necessary to preserve R25 here.",
      "parentUuid": "80533aad_cf537424",
      "range": {
        "startLine": 53,
        "startChar": 7,
        "endLine": 53,
        "endChar": 16
      },
      "revId": "5801350e64a9682eea69773a9197f96b88c103d7",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "e052a66c_761f8f3f",
        "filename": "src/runtime/cgo/gcc_mips64x.S",
        "patchSetId": 31
      },
      "lineNbr": 53,
      "author": {
        "id": 13315
      },
      "writtenOn": "2022-06-27T14:57:48Z",
      "side": 1,
      "message": "This function is called from C, so the Go register allocator shouldn\u0027t matter. (The code is fine, just FYI.)",
      "parentUuid": "6a10fdf0_417bb674",
      "range": {
        "startLine": 53,
        "startChar": 7,
        "endLine": 53,
        "endChar": 16
      },
      "revId": "5801350e64a9682eea69773a9197f96b88c103d7",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "2cce550b_1a226590",
        "filename": "src/runtime/cgo/gcc_mips64x.S",
        "patchSetId": 31
      },
      "lineNbr": 53,
      "author": {
        "id": 45165
      },
      "writtenOn": "2022-07-15T09:23:36Z",
      "side": 1,
      "message": "Thanks!",
      "parentUuid": "e052a66c_761f8f3f",
      "range": {
        "startLine": 53,
        "startChar": 7,
        "endLine": 53,
        "endChar": 16
      },
      "revId": "5801350e64a9682eea69773a9197f96b88c103d7",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "db75f739_9e984085",
        "filename": "src/runtime/rt0_linux_mips64x.s",
        "patchSetId": 31
      },
      "lineNbr": 70,
      "author": {
        "id": 13315
      },
      "writtenOn": "2022-06-17T21:20:42Z",
      "side": 1,
      "message": "Add a space after \",\".",
      "revId": "5801350e64a9682eea69773a9197f96b88c103d7",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "90bd7a73_b69168d1",
        "filename": "src/runtime/rt0_linux_mips64x.s",
        "patchSetId": 31
      },
      "lineNbr": 70,
      "author": {
        "id": 45165
      },
      "writtenOn": "2022-06-25T08:17:04Z",
      "side": 1,
      "message": "Yes, I fixed it.",
      "parentUuid": "db75f739_9e984085",
      "revId": "5801350e64a9682eea69773a9197f96b88c103d7",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c7a815ad_34ba9945",
        "filename": "src/runtime/sys_linux_mips64x.s",
        "patchSetId": 31
      },
      "lineNbr": 415,
      "author": {
        "id": 13315
      },
      "writtenOn": "2022-06-17T21:20:42Z",
      "side": 1,
      "message": "Instead of checking the instruction, I think we should check the build mode statically. Maybe define a macro like https://cs.opensource.google/go/go/+/master:src/cmd/go/internal/work/gc.go;l\u003d372  and check it with #ifdef.",
      "range": {
        "startLine": 412,
        "startChar": 0,
        "endLine": 415,
        "endChar": 77
      },
      "revId": "5801350e64a9682eea69773a9197f96b88c103d7",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ff33f099_880ee48b",
        "filename": "src/runtime/sys_linux_mips64x.s",
        "patchSetId": 31
      },
      "lineNbr": 415,
      "author": {
        "id": 45165
      },
      "writtenOn": "2022-06-25T08:17:04Z",
      "side": 1,
      "message": "OK, I added \"GOBUILDMODE_shared\" macro in CL https://go-review.googlesource.com/c/go/+/414137/ and the number of instructions was reduced. Thanks!",
      "parentUuid": "c7a815ad_34ba9945",
      "range": {
        "startLine": 412,
        "startChar": 0,
        "endLine": 415,
        "endChar": 77
      },
      "revId": "5801350e64a9682eea69773a9197f96b88c103d7",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "17028b57_21da6a92",
        "filename": "src/runtime/tls_mips64x.s",
        "patchSetId": 31
      },
      "lineNbr": 23,
      "author": {
        "id": 13315
      },
      "writtenOn": "2022-06-17T21:20:42Z",
      "side": 1,
      "message": "I don\u0027t think you need to preserve these registers. Just update the comment above and change the callers to not use them.\n\nAlso below.",
      "range": {
        "startLine": 21,
        "startChar": 0,
        "endLine": 23,
        "endChar": 18
      },
      "revId": "5801350e64a9682eea69773a9197f96b88c103d7",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "90655ff5_2ba2d9c2",
        "filename": "src/runtime/tls_mips64x.s",
        "patchSetId": 31
      },
      "lineNbr": 23,
      "author": {
        "id": 45165
      },
      "writtenOn": "2022-06-25T08:17:04Z",
      "side": 1,
      "message": "Thanks very much. But I think we need to preserve these registers since load/store a TLS variable might clobber these registers under c-shared buildmode.\n\u003e Just update the comment above and change the callers to not use them.\nSince the callers\u0027 code might be changed, I think it is hard to maintain and change that the callers to not use these registers. I prefer that we can save and restore these registers here.\nIn addition, I use \"GOBUILDMODE_shared\" macro to load/store these registers on c-shared buildmode only.",
      "parentUuid": "17028b57_21da6a92",
      "range": {
        "startLine": 21,
        "startChar": 0,
        "endLine": 23,
        "endChar": 18
      },
      "revId": "5801350e64a9682eea69773a9197f96b88c103d7",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "438f7c89_b6085e99",
        "filename": "src/runtime/tls_mips64x.s",
        "patchSetId": 31
      },
      "lineNbr": 23,
      "author": {
        "id": 13315
      },
      "writtenOn": "2022-06-27T14:57:48Z",
      "side": 1,
      "message": "This function and the next one are only called in specific places in the runtime, which don\u0027t change very often, and usually don\u0027t need to use many registers. So I think it\u0027s better to change the caller.\nAlso I think it is better for this function to not use the stack.",
      "parentUuid": "90655ff5_2ba2d9c2",
      "range": {
        "startLine": 21,
        "startChar": 0,
        "endLine": 23,
        "endChar": 18
      },
      "revId": "5801350e64a9682eea69773a9197f96b88c103d7",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8f837765_b349b86f",
        "filename": "src/runtime/tls_mips64x.s",
        "patchSetId": 31
      },
      "lineNbr": 23,
      "author": {
        "id": 45165
      },
      "writtenOn": "2022-07-15T09:23:36Z",
      "side": 1,
      "message": "When I debug the \"runtime.load_g\" function, I find that call C function directly from this:\n`MOVV\truntimeÂ·tls_g(SB), g  // in GD mode, get TLS address through ___tls_get_addr`\nI think it is not right, \"___tls_get_addr\" function should be wrapped. Then call the C funtion by cgo. And I want to hear your thoughts.",
      "parentUuid": "438f7c89_b6085e99",
      "range": {
        "startLine": 21,
        "startChar": 0,
        "endLine": 23,
        "endChar": 18
      },
      "revId": "5801350e64a9682eea69773a9197f96b88c103d7",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    }
  ]
}