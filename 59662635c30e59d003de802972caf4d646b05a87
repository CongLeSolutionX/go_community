{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "9c54fdce_6ea6bb2c",
        "filename": "src/internal/runtime/atomic/atomic_amd64.go",
        "patchSetId": 2
      },
      "lineNbr": 61,
      "author": {
        "id": 63983
      },
      "writtenOn": "2024-08-20T00:23:25Z",
      "side": 1,
      "message": "Wondering if we should add a test/benchmark for this, behind an `amd64` build tag.",
      "revId": "59662635c30e59d003de802972caf4d646b05a87",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9c61dfce_2733bafa",
        "filename": "src/internal/runtime/atomic/atomic_amd64.go",
        "patchSetId": 2
      },
      "lineNbr": 61,
      "author": {
        "id": 63983
      },
      "writtenOn": "2024-08-20T01:29:47Z",
      "side": 1,
      "message": "Additionally, I have the code for Xchg8 ready for arm64. I can work on porting it to other architectures as well. Please let me know if you\u0027re already working on this; otherwise, I\u0027ll chain in a CL. Thanks.",
      "parentUuid": "9c54fdce_6ea6bb2c",
      "revId": "59662635c30e59d003de802972caf4d646b05a87",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9c68c3e0_d87047f4",
        "filename": "src/internal/runtime/atomic/atomic_amd64.go",
        "patchSetId": 2
      },
      "lineNbr": 61,
      "author": {
        "id": 9210
      },
      "writtenOn": "2024-08-20T04:02:52Z",
      "side": 1,
      "message": "I haven\u0027t looked into tests (aside from using it later in this CL stack). I agree that the new functions should end up with as much testing as the existing ones; I haven\u0027t surveyed how thorough those are.\n\nIn the end, arm64 support would be great, thank you! I haven\u0027t done any work on that; my main linux/arm64 test machine these days is a Raspberry Pi 5 (with 4 cores), so doesn\u0027t show the same sort of collapse we get on machines with dozens of cores. (It looks like `gotip-linux-arm64` builders have 8 cores.) But the reason to add Xchg8 is in support of the current implementation of the \"spinbit\" mutex implementation in CL 601597. If we end up with a different approach there, we might not need Xchg8 on any architecture.",
      "parentUuid": "9c61dfce_2733bafa",
      "revId": "59662635c30e59d003de802972caf4d646b05a87",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a60d96da_59a1fd22",
        "filename": "src/internal/runtime/atomic/atomic_amd64.go",
        "patchSetId": 2
      },
      "lineNbr": 61,
      "author": {
        "id": 63983
      },
      "writtenOn": "2024-08-20T07:06:33Z",
      "side": 1,
      "message": "ACK. I\u0027ll hold off on the code until we receive a more definitive answer regarding the \u0027spin bit\u0027 experiment. It would be great to have access to a high-core-count ARM64 instance, such as Graviton, for benchmarking. I have access to an M3 Pro, which has 12 cores. Let me know if you need assistance with benchmark results.",
      "parentUuid": "9c68c3e0_d87047f4",
      "revId": "59662635c30e59d003de802972caf4d646b05a87",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "16b7033b_e552af25",
        "filename": "src/internal/runtime/atomic/atomic_amd64.go",
        "patchSetId": 2
      },
      "lineNbr": 61,
      "author": {
        "id": 9210
      },
      "writtenOn": "2024-10-02T00:32:42Z",
      "side": 1,
      "message": "The CL that adds the first use of Xchg8 has gotten a +2 and is ready to go in. So yes, we\u0027ll want support for the other platforms.\n\nI\u0027ve added a test, gated to GOARCH\u003damd64 (since other platforms don\u0027t have support yet). I\u0027ve opened an issue, #69735, to track adding support for other GOARCHes.\n\nMauri, let\u0027s use the issue to coordinate who\u0027s working on which platforms. Thanks!",
      "parentUuid": "a60d96da_59a1fd22",
      "revId": "59662635c30e59d003de802972caf4d646b05a87",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    }
  ]
}