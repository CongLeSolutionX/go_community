{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "2c3d56aa_a9e29896",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 5976
      },
      "writtenOn": "2022-11-18T17:41:25Z",
      "side": 1,
      "message": "SlowBots beginning. Status page: https://farmer.golang.org/try?commit\u003d7a4bb054\nNote that builder windows-386-2012-newcc has known issues:\n\thttps://go.dev/issue/35006\nNote that builder windows-amd64-2016-newcc has known issues:\n\thttps://go.dev/issue/35006\nNote that builder windows-amd64-newcc-race has known issues:\n\thttps://go.dev/issue/35006\n",
      "tag": "autogenerated:trybots~beginning",
      "revId": "7a4bb0543d35ca6e181716e45b26597ac3cfa13d",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "054ab2d9_3e3bd0f0",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 5976
      },
      "writtenOn": "2022-11-18T18:04:30Z",
      "side": 1,
      "message": "Build is still in progress... Status page: https://farmer.golang.org/try?commit\u003d7a4bb054\nFailed on windows-amd64-2016-newcc: https://storage.googleapis.com/go-build-log/7a4bb054/windows-amd64-2016-newcc_055aca82.log\nOther builds still in progress; subsequent failure notices suppressed until final report.\n\nConsult https://build.golang.org/ to see whether they are new failures. Keep in mind that TryBots currently test *exactly* your git commit, without rebasing. If your commit\u0027s git parent is old, the failure might\u0027ve already been fixed.\n",
      "parentUuid": "2c3d56aa_a9e29896",
      "tag": "autogenerated:trybots~progress",
      "revId": "7a4bb0543d35ca6e181716e45b26597ac3cfa13d",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "d63402da_313335a9",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 14020
      },
      "writtenOn": "2022-11-18T18:09:37Z",
      "side": 1,
      "message": "TRY\u003dwindows-386-2012,windows-amd64-2016,windows-amd64-race,windows-arm64",
      "revId": "7a4bb0543d35ca6e181716e45b26597ac3cfa13d",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "33048c7e_ad9dd9f0",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 5976
      },
      "writtenOn": "2022-11-18T18:09:49Z",
      "side": 1,
      "message": "SlowBots beginning. Status page: https://farmer.golang.org/try?commit\u003d7a4bb054\nNote that builder windows-arm64-11 has known issues:\n\thttps://go.dev/issue/51019\n",
      "tag": "autogenerated:trybots~beginning",
      "revId": "7a4bb0543d35ca6e181716e45b26597ac3cfa13d",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "6ca66939_b4d8d20c",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 5976
      },
      "writtenOn": "2022-11-18T18:09:49Z",
      "side": 1,
      "message": "Superseded.",
      "parentUuid": "2c3d56aa_a9e29896",
      "tag": "autogenerated:trybots~beginning",
      "revId": "7a4bb0543d35ca6e181716e45b26597ac3cfa13d",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "90eddcef_3d4e3c55",
        "filename": "misc/cgo/testcshared/cshared_test.go",
        "patchSetId": 4
      },
      "lineNbr": 352,
      "author": {
        "id": 6365
      },
      "writtenOn": "2022-11-18T18:20:02Z",
      "side": 1,
      "message": "It would be very surprising to have a bash script named `dlltool.exe`.\nAttempting to reproduce this on various gomotes, I see:\n```\n~/go-review/src$ gomote run -system bcmills-windows-arm64-11-0 \u0027C:\\godep\\llvm-mingw-20210423-ucrt-aarch64\\bin\\cc.exe\u0027 \u0027-print-prog-name\u003ddlltool\u0027\nC:\\godep\\llvm-mingw-20210423-ucrt-aarch64\\bin\\aarch64-w64-mingw32-dlltool\n```\n\n```\n~/go-review/src$ gomote run -system bcmills-windows-amd64-2016-0 \u0027C:\\godep\\gcc64\\bin\\gcc.exe\u0027 \u0027-print-prog-name\u003ddlltool\u0027\nC:/godep/gcc64/bin/../lib/gcc/x86_64-w64-mingw32/5.1.0/../../../../x86_64-w64-mingw32/bin/dlltool.exe\n```\n\n```\n~/go-review/src$ gomote run -system -dir \u0027C:\\godep\u0027 bcmills-windows-amd64-2016-newcc-0 \u0027C:\\godep\\gcc64\\bin\\gcc\u0027 -print-prog-name\u003ddlltool\nC:/godep/gcc64/bin/x86_64-w64-mingw32-dlltool\n```\n\n\nThat suggests to me that `exec.LookPath` + `filepath.Ext` is at least robust enough for our builders, and we could swap things around to only even try the script hack if the file really and truly lacks an executable extension:\n\n```\ndlltoolpath :\u003d strings.TrimSpace(string(out))\nif filepath.Ext(dlltoolpath) \u003d\u003d \"\" {\n\t// Some compilers report slash-separated paths without extensions\n\t// instead of ordinary Windows paths.\n\t// Try to find the canonical name for the path.\n\tif lp, err :\u003d exec.LookPath(dlltoolpath); err \u003d\u003d nil {\n\t\tdlltoolpath \u003d lp\n\t}\n}\nargs :\u003d []string{dlltoolpath, \"-D\", args[6], \"-l\", libgoname, \"-d\", \"libgo.def\"}\n\nif filepath.Ext(dlltoolpath) \u003d\u003d \"\" {\n\t// This is an unfortunate workaround …\n\tdlltoolContents, err :\u003d os.ReadFile(dlltoolpath)\n\tif err \u003d\u003d nil \u0026\u0026 bytes.HasPrefix(dlltoolContents, []byte(\"#!/bin/sh\")) \u0026\u0026 bytes.Contains(dlltoolContents, []byte(\"llvm-dlltool\")) {\n\t\t…\n\t}\n}\n```",
      "range": {
        "startLine": 351,
        "startChar": 0,
        "endLine": 352,
        "endChar": 15
      },
      "revId": "7a4bb0543d35ca6e181716e45b26597ac3cfa13d",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "6d50f112_0bf505a2",
        "filename": "misc/cgo/testcshared/cshared_test.go",
        "patchSetId": 4
      },
      "lineNbr": 352,
      "author": {
        "id": 14020
      },
      "writtenOn": "2022-11-18T18:56:19Z",
      "side": 1,
      "message": "OK, that sounds reasonable. I\u0027ve switched to using lookpath + filepath.Ext.",
      "parentUuid": "90eddcef_3d4e3c55",
      "range": {
        "startLine": 351,
        "startChar": 0,
        "endLine": 352,
        "endChar": 15
      },
      "revId": "7a4bb0543d35ca6e181716e45b26597ac3cfa13d",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    }
  ]
}