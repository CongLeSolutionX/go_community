{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "6b1bb2bd_45ae3073",
        "filename": "src/internal/syscall/unix/fcntl_unix.go",
        "patchSetId": 10
      },
      "lineNbr": 21,
      "author": {
        "id": 6365
      },
      "writtenOn": "2023-05-18T13:16:02Z",
      "side": 1,
      "message": "I don\u0027t think this is correct in general. POSIX `fnctl`¹ allows any value other than -1 on success for most `fcntl` calls.\n\nIf certain platforms are more restrictive, this should be build-constrained to only those platforms. (Or, if there is some other reason this is ok, a detailed doc comment or code comment would be helpful.)\n\n¹https://pubs.opengroup.org/onlinepubs/9699919799/functions/fcntl.html",
      "revId": "27906bb74a0bb7a684b89b92d813e52be8608991",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "2d111851_2e34afc4",
        "filename": "src/internal/syscall/unix/fcntl_unix.go",
        "patchSetId": 10
      },
      "lineNbr": 21,
      "author": {
        "id": 5206
      },
      "writtenOn": "2023-05-19T01:01:47Z",
      "side": 1,
      "message": "It may not be true in general but it\u0027s the best we can do right now.  The runtime.fcntl function returns either a non-negative value on success or a negative errno value on failure.  I think the upshot is that runtime.fcntl, and this function, may only be called with fcntl codes that do not return negative values on success.  That\u0027s OK because these are internal functions.\n\nThe alternative is to rewrite all the runtime.fcntl implementations to return two values.  Maybe someday.",
      "parentUuid": "6b1bb2bd_45ae3073",
      "revId": "27906bb74a0bb7a684b89b92d813e52be8608991",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6da6dfc3_cb12a2a1",
        "filename": "src/internal/syscall/unix/fcntl_unix.go",
        "patchSetId": 10
      },
      "lineNbr": 21,
      "author": {
        "id": 6365
      },
      "writtenOn": "2023-05-19T02:32:42Z",
      "side": 1,
      "message": "\u003e runtime.fcntl, and this function, may only be called with fcntl codes that do not return negative values on success. That\u0027s OK because these are internal functions.\n\nThey are internal, yes, but that difference between POSIX `fcntl` and this `unix.Fcntl` needs to be clearly documented — both to avoid someone adding a future use of this `Fcntl` for cases that may return negative values, and to avoid having someone later come along and copy this `go:linkname` pattern for something that _isn\u0027t_ internal (such as `x/sys/unix.fcntl`).\n\nAt the moment, this `Fcntl` isn\u0027t documented at all, let alone documented as different in any meaningful way from POSIX `fcntl`.",
      "parentUuid": "2d111851_2e34afc4",
      "revId": "27906bb74a0bb7a684b89b92d813e52be8608991",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "eb03e430_aec46573",
        "filename": "src/internal/syscall/unix/fcntl_unix.go",
        "patchSetId": 10
      },
      "lineNbr": 21,
      "author": {
        "id": 5206
      },
      "writtenOn": "2023-05-19T03:01:01Z",
      "side": 1,
      "message": "According to \"man fcntl\" on Linux, the only way you can get a negative value on a successful call is if one of the flags returned by F_GETFD or F_GETFL has a negative value.  Or, if somebody uses F_ADD_SEALS to add a negative seal, it can be returned by F_GET_SEALS.  But the flags and valid seals are all defined by the kernel, and none of them are negative.  At least not on Linux.",
      "parentUuid": "6da6dfc3_cb12a2a1",
      "revId": "27906bb74a0bb7a684b89b92d813e52be8608991",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "fd69c6fc_49bf287c",
        "filename": "src/internal/syscall/unix/fcntl_unix.go",
        "patchSetId": 10
      },
      "lineNbr": 21,
      "author": {
        "id": 6365
      },
      "writtenOn": "2023-05-19T03:05:02Z",
      "side": 1,
      "message": "This file is build-constrained to `unix`, not `linux`.\n\nPOSIX specifies only “Value other than -1” for most `fcntl` commands.",
      "parentUuid": "eb03e430_aec46573",
      "revId": "27906bb74a0bb7a684b89b92d813e52be8608991",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "29832d87_26590ff5",
        "filename": "src/internal/syscall/unix/fcntl_unix.go",
        "patchSetId": 10
      },
      "lineNbr": 21,
      "author": {
        "id": 5206
      },
      "writtenOn": "2023-05-19T03:12:59Z",
      "side": 1,
      "message": "I promise that it\u0027s not a problem.\n\nBut, OK, I\u0027ll work on it.  You will have to review it.",
      "parentUuid": "fd69c6fc_49bf287c",
      "revId": "27906bb74a0bb7a684b89b92d813e52be8608991",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "f10f21a9_fb50a6d1",
        "filename": "src/internal/syscall/unix/fcntl_unix.go",
        "patchSetId": 10
      },
      "lineNbr": 21,
      "author": {
        "id": 19560
      },
      "writtenOn": "2023-05-23T07:59:05Z",
      "side": 1,
      "message": "Acknowledged",
      "parentUuid": "29832d87_26590ff5",
      "revId": "27906bb74a0bb7a684b89b92d813e52be8608991",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    }
  ]
}