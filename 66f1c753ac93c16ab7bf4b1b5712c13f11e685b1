{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "83e481fb_05852c85",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 20556
      },
      "writtenOn": "2024-09-22T18:17:42Z",
      "side": 1,
      "message": "Alright, this should now be something worth looking at for initial comments. I mostly polished up the 3am-looking corners from before, but it\u0027s the same design as last night.\n\nIf you\u0027re curious, here\u0027s the kernel test code I wrote for this:\nhttps://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/tree/tools/testing/selftests/vDSO/vdso_test_getrandom.c\nYou\u0027ll notice that vgetrandom_get_state() is pretty similar.\n\nAlso, for interest, here\u0027s the glibc implementation I\u0027ve submitted there:\nhttps://inbox.sourceware.org/libc-alpha/20240918140500.26365-2-Jason@zx2c4.com/\nIt\u0027s more complex because of glibc concerns that Go doesn\u0027t really have. So I think the kernel test code is the better thing to look at.\n\nOne thing I\u0027d like some feedback on is the TODO I mentioned in the commit message -- making this use ABIInternal instead of ABI0. I might be mistaken in wanting to do that, but the idea I have is that it will let me avoid having to do anything at all with the arguments or the return value, and instead I can just jump directly to the vDSO symbol, and the arguments will be in the correct registers already. Is this correct?\n\nOne I get the ABIInternal vs ABI0 thing sorted, maybe I\u0027ll have a look at enabling the other 5 architectures, as it should be fairly simple to do.",
      "revId": "66f1c753ac93c16ab7bf4b1b5712c13f11e685b1",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    }
  ]
}