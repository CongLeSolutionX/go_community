{
  "comments": [
    {
      "key": {
        "uuid": "b6ae2c92_66f70d7d",
        "filename": "src/database/sql/sql.go",
        "patchSetId": 1
      },
      "lineNbr": 2873,
      "author": {
        "id": 5056
      },
      "writtenOn": "2018-01-25T16:07:41Z",
      "side": 1,
      "message": "I have the same problem as on the other CL: now an additional lock is being held during convertAssign, which calls user code. What is the user code allowed to do? Can it call back into any of the other rows methods?",
      "revId": "22b7f8736c020261d2f9ba51b31c7f9f9bc585d6",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f5bf374f_13de26b9",
        "filename": "src/database/sql/sql.go",
        "patchSetId": 1
      },
      "lineNbr": 2873,
      "author": {
        "id": 5080
      },
      "writtenOn": "2018-01-25T17:01:37Z",
      "side": 1,
      "message": "It can call user code like https://godoc.org/database/sql#NullBool NullBool or custom type scanner. I don\u0027t think these could call back in to the sql interface productively. Maybe if you allowed storing the sql interface within a Scanner type (like NullBool), set it before the scan, then the Scan method referenced that, but I\u0027ve never seen a pattern like that.\n\nThe other option would be to remove the long standing test of mutating the buffer on close (in fakedb_test) and document that drivers shouldn\u0027t do that.",
      "parentUuid": "b6ae2c92_66f70d7d",
      "revId": "22b7f8736c020261d2f9ba51b31c7f9f9bc585d6",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705",
      "unresolved": true
    }
  ]
}