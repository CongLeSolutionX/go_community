{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "de5b39bf_68b2b5b6",
        "filename": "src/cmd/go/internal/load/pkg.go",
        "patchSetId": 2
      },
      "lineNbr": 757,
      "author": {
        "id": 6365
      },
      "writtenOn": "2021-08-10T20:15:25Z",
      "side": 1,
      "message": "I don\u0027t really understand this condition ‚Äî doesn\u0027t p.Internal.Local already imply build.IsLocalImport(path)?\n\nSo perhaps the conditions here should be structured like:\n\n\tif p.Internal.Local {\n\t\t‚Ä¶\n\t\tif cfg.ModulesEnabled {\n\t\t\terr \u003d ImportErrorf(path, \"local import %q not supported in module mode\", path)\n\t\t} else if path !\u003d \".\" {\n\t\t\terr \u003d ‚Ä¶\n\t\t} else {\n\t\t\terr \u003d ‚Ä¶\n\t\t}\n\t\t‚Ä¶\n\t}\n\nThat probably implies that we should also have a similar test in GOPATH mode: the build.IsLocalImport(path) condition looks like it would be a regression in the GOPATH-mode error message.",
      "revId": "b655a0b9d430b2c6024affa53793da443b327307",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ff1e9225_d3bde70e",
        "filename": "src/cmd/go/internal/load/pkg.go",
        "patchSetId": 2
      },
      "lineNbr": 757,
      "author": {
        "id": 53012
      },
      "writtenOn": "2021-08-11T15:38:26Z",
      "side": 1,
      "message": "Thank you! I have updated according to your comments.\nI also tried to add a test for GOPATH-mode\nbut I got `foo/foo.go:3:1: syntax error: non-declaration statement outside function body`\n\n```go\nenv GO111MODULE\u003doff\n\n! go build\nstderr \u0027main.go:4:2: local import \"./foo\" not supported in module mode\u0027\n\n-- foo/foo.go --\npackage foo\n\ngo 1.17\n-- main.go --\npackage main\n\nimport _ \"./foo\"\n\nfunc main() {}\n```\n\nCould you help me about this?\nThank you in advance",
      "parentUuid": "de5b39bf_68b2b5b6",
      "revId": "b655a0b9d430b2c6024affa53793da443b327307",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "28e0ca9f_e1dec3c0",
        "filename": "src/cmd/go/internal/load/pkg.go",
        "patchSetId": 2
      },
      "lineNbr": 757,
      "author": {
        "id": 6365
      },
      "writtenOn": "2021-08-11T17:39:04Z",
      "side": 1,
      "message": "\u003e -- foo/foo.go --\n\u003e package foo\n\u003e \n\u003e go 1.17\n\nThis part is the problem. The `go` directive is in the `go.mod` file, not a `go` source file.\n\nFor a GOPATH-mode test, you can just delete that file. (GOPATH mode mostly ignores go.mod files anyway.)",
      "parentUuid": "ff1e9225_d3bde70e",
      "revId": "b655a0b9d430b2c6024affa53793da443b327307",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3ad86632_3f31f90a",
        "filename": "src/cmd/go/internal/load/pkg.go",
        "patchSetId": 2
      },
      "lineNbr": 757,
      "author": {
        "id": 53012
      },
      "writtenOn": "2021-08-12T13:31:00Z",
      "side": 1,
      "message": "thanks!\nlet me know if this is what you mean üôè",
      "parentUuid": "28e0ca9f_e1dec3c0",
      "revId": "b655a0b9d430b2c6024affa53793da443b327307",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    }
  ]
}