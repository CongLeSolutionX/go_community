{
  "comments": [
    {
      "key": {
        "uuid": "c9668c36_57632e99",
        "filename": "src/cmd/cgo/gcc.go",
        "patchSetId": 1
      },
      "lineNbr": 599,
      "author": {
        "id": 5137
      },
      "writtenOn": "2016-06-19T19:34:13Z",
      "side": 1,
      "message": "Could we instead refactor it, moving the check here for insufficient arguments once and for all ie\n\n       // Avoid a crash if the number of arguments is\n        // less than the number of parameters.\n        // This will be caught when the generated file is compiled.\n        // See Issues 13423 and 16116.\n        if len(call.Call.Args) \u003c len(name.FuncType.Params) {\n                return\n        }\n\n        any :\u003d false\n        for i, param :\u003d range name.FuncType.Params {\n                if p.needsPointerCheck(f, param.Go, call.Call.Args[i]) {\n                        any \u003d true\n                        break\n                }\n        }\n        if !any {\n                return\n        }\n\nand then we won\u0027t have to change the code below since from then on the condition is that sufficient args were passed in. The diff will look something like this\n```\ndiff --git a/src/cmd/cgo/gcc.go b/src/cmd/cgo/gcc.go\nindex 3766ff2..ad15af8 100644\n--- a/src/cmd/cgo/gcc.go\n+++ b/src/cmd/cgo/gcc.go\n@@ -597,13 +597,16 @@ func (p *Package) rewriteCalls(f *File) {\n // rewriteCall rewrites one call to add pointer checks. We replace\n // each pointer argument x with _cgoCheckPointer(x).(T).\n func (p *Package) rewriteCall(f *File, call *Call, name *Name) {\n+\t// Avoid a crash if the number of arguments is\n+\t// less than the number of parameters.\n+\t// This will be caught when the generated file is compiled.\n+\t// See Issues 13423 and 16116.\n+\tif len(call.Call.Args) \u003c len(name.FuncType.Params) {\n+\t\treturn\n+\t}\n+\n \tany :\u003d false\n \tfor i, param :\u003d range name.FuncType.Params {\n-\t\tif len(call.Call.Args) \u003c\u003d i {\n-\t\t\t// Avoid a crash; this will be caught when the\n-\t\t\t// generated file is compiled.\n-\t\t\treturn\n-\t\t}\n \t\tif p.needsPointerCheck(f, param.Go, call.Call.Args[i]) {\n \t\t\tany \u003d true\n \t\t\tbreak\n```",
      "revId": "3a733d9cd8205a400dd8003bac19ca3c60ee3ce7",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c9668c36_775e2acf",
        "filename": "src/cmd/cgo/gcc.go",
        "patchSetId": 1
      },
      "lineNbr": 628,
      "author": {
        "id": 5137
      },
      "writtenOn": "2016-06-19T19:34:13Z",
      "side": 1,
      "message": "Could we instead move this upfront  to the beginning of the function and do it once?",
      "revId": "3a733d9cd8205a400dd8003bac19ca3c60ee3ce7",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705",
      "unresolved": false
    }
  ]
}