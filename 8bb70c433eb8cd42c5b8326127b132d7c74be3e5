{
  "comments": [
    {
      "key": {
        "uuid": "10e2a5a4_4a7b26c3",
        "filename": "/COMMIT_MSG",
        "patchSetId": 5
      },
      "lineNbr": 12,
      "author": {
        "id": 13315
      },
      "writtenOn": "2018-04-19T23:27:21Z",
      "side": 1,
      "message": "R8",
      "range": {
        "startLine": 12,
        "startChar": 51,
        "endLine": 12,
        "endChar": 53
      },
      "revId": "8bb70c433eb8cd42c5b8326127b132d7c74be3e5",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "98d9dbd3_5b36b67b",
        "filename": "/COMMIT_MSG",
        "patchSetId": 5
      },
      "lineNbr": 12,
      "author": {
        "id": 25702
      },
      "writtenOn": "2018-04-20T19:32:46Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "10e2a5a4_4a7b26c3",
      "range": {
        "startLine": 12,
        "startChar": 51,
        "endLine": 12,
        "endChar": 53
      },
      "revId": "8bb70c433eb8cd42c5b8326127b132d7c74be3e5",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9bc145f2_d9354f04",
        "filename": "src/cmd/compile/internal/ssa/gen/ARM64.rules",
        "patchSetId": 5
      },
      "lineNbr": 565,
      "author": {
        "id": 13315
      },
      "writtenOn": "2018-04-19T23:27:21Z",
      "side": 1,
      "message": "Why these don\u0027t have CMPW version?",
      "range": {
        "startLine": 563,
        "startChar": 0,
        "endLine": 565,
        "endChar": 0
      },
      "revId": "8bb70c433eb8cd42c5b8326127b132d7c74be3e5",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ab828195_64b01a52",
        "filename": "src/cmd/compile/internal/ssa/gen/ARM64.rules",
        "patchSetId": 5
      },
      "lineNbr": 565,
      "author": {
        "id": 25702
      },
      "writtenOn": "2018-04-20T19:32:46Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "9bc145f2_d9354f04",
      "range": {
        "startLine": 563,
        "startChar": 0,
        "endLine": 565,
        "endChar": 0
      },
      "revId": "8bb70c433eb8cd42c5b8326127b132d7c74be3e5",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "417e0e16_61743630",
        "filename": "src/cmd/compile/internal/ssa/gen/ARM64.rules",
        "patchSetId": 5
      },
      "lineNbr": 572,
      "author": {
        "id": 13315
      },
      "writtenOn": "2018-04-19T23:27:21Z",
      "side": 1,
      "message": "Also these?",
      "range": {
        "startLine": 568,
        "startChar": 0,
        "endLine": 572,
        "endChar": 0
      },
      "revId": "8bb70c433eb8cd42c5b8326127b132d7c74be3e5",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9d78e872_38b373a3",
        "filename": "src/cmd/compile/internal/ssa/gen/ARM64.rules",
        "patchSetId": 5
      },
      "lineNbr": 572,
      "author": {
        "id": 25702
      },
      "writtenOn": "2018-04-20T19:32:46Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "417e0e16_61743630",
      "range": {
        "startLine": 568,
        "startChar": 0,
        "endLine": 572,
        "endChar": 0
      },
      "revId": "8bb70c433eb8cd42c5b8326127b132d7c74be3e5",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e7f98ea3_e20523f8",
        "filename": "src/cmd/internal/obj/arm64/asm7.go",
        "patchSetId": 5
      },
      "lineNbr": 215,
      "author": {
        "id": 13315
      },
      "writtenOn": "2018-04-19T23:27:21Z",
      "side": 1,
      "message": "This is incorrect. ANDS R1, R2 is equivalent to ANDS R1, R2, R2, and the destination should be in Prog.To.",
      "revId": "8bb70c433eb8cd42c5b8326127b132d7c74be3e5",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "427e6dbc_048505bd",
        "filename": "src/cmd/internal/obj/arm64/asm7.go",
        "patchSetId": 5
      },
      "lineNbr": 215,
      "author": {
        "id": 25702
      },
      "writtenOn": "2018-04-20T19:32:46Z",
      "side": 1,
      "message": "Is it ok to keep the old one as it is and add a new one to handle TST, like below?",
      "parentUuid": "e7f98ea3_e20523f8",
      "revId": "8bb70c433eb8cd42c5b8326127b132d7c74be3e5",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a27c7891_8d9a1203",
        "filename": "src/cmd/internal/obj/arm64/asm7.go",
        "patchSetId": 5
      },
      "lineNbr": 215,
      "author": {
        "id": 13315
      },
      "writtenOn": "2018-04-20T19:54:42Z",
      "side": 1,
      "message": "No. The added one is not correct. If you want to do TST with ANDS, it should be ANDS R1, R2, ZR, where Prog.To is ZR instead of NONE. Or you can add support of TST instruction and use it.",
      "parentUuid": "427e6dbc_048505bd",
      "revId": "8bb70c433eb8cd42c5b8326127b132d7c74be3e5",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "568bc18e_8ecb2bb6",
        "filename": "src/cmd/internal/obj/arm64/asm7.go",
        "patchSetId": 5
      },
      "lineNbr": 215,
      "author": {
        "id": 25702
      },
      "writtenOn": "2018-04-20T20:53:21Z",
      "side": 1,
      "message": "Sorry I\u0027m confused here, I want to do TST with ANDS so my initial implementation was using the register mask gp2flags1 because the out register was ZR. Should I go back to using gp2flags1 register mask for TST?",
      "parentUuid": "a27c7891_8d9a1203",
      "revId": "8bb70c433eb8cd42c5b8326127b132d7c74be3e5",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "31dc149f_013cc81b",
        "filename": "src/cmd/internal/obj/arm64/asm7.go",
        "patchSetId": 5
      },
      "lineNbr": 215,
      "author": {
        "id": 13315
      },
      "writtenOn": "2018-04-23T16:20:35Z",
      "side": 1,
      "message": "There are two different things: the SSA ops, defined in cmd/compile/internal/ssa/gen, and the instructions (aka Progs), defined in this package.\n\nFor the SSA op TST, it takes two SSA Values, and produces a Flags Value, with no value in register (ZR is not an allocatable register), so the register mask should be gp2flags.\n\nFor the instruction ANDS, it can take two registers and produce a value in another register, like ANDS R1, R2, R3, where Prog.To is R3. It can also target ZR which discards the result, in which case Prog.To is ZR. Prog.To should never be NONE.\n\nWhen you translate one to the other (in cmd/compile/internal/arm64/ssa.go), you do whatever mapping you need to do. Like,\n\np.From.Type \u003d obj.TYPE_REG\np.From.Reg \u003d v.Args[0].Reg()\np.Reg \u003d v.Args[1].Reg()\np.To.Type \u003d obj.TYPE_REG\np.To.Reg \u003d arm64.REGZERO\n\nI think a better and clearer way to do it is to add support of TST instruction in this package, and map the TST SSA op to the TST instruction, instead of ANDS (although it works). The TST instruction should have Prog.To be NONE, as it cannot target a register.",
      "parentUuid": "568bc18e_8ecb2bb6",
      "revId": "8bb70c433eb8cd42c5b8326127b132d7c74be3e5",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e67223e9_7028c27b",
        "filename": "src/cmd/internal/obj/arm64/asm7.go",
        "patchSetId": 5
      },
      "lineNbr": 1988,
      "author": {
        "id": 13315
      },
      "writtenOn": "2018-04-19T23:27:21Z",
      "side": 1,
      "message": "Need test in cmd/asm/internal/asm for TST instruction.",
      "revId": "8bb70c433eb8cd42c5b8326127b132d7c74be3e5",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d4796d87_9d3bcc8c",
        "filename": "src/cmd/internal/obj/arm64/asm7.go",
        "patchSetId": 5
      },
      "lineNbr": 1988,
      "author": {
        "id": 25702
      },
      "writtenOn": "2018-04-20T19:32:46Z",
      "side": 1,
      "message": "Sorry, did not intend to change this. It looks like TST instruction was already supported, but the tests in cmd/asm/internal/asm are commented out.",
      "parentUuid": "e67223e9_7028c27b",
      "revId": "8bb70c433eb8cd42c5b8326127b132d7c74be3e5",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7f1a1355_ef654ea8",
        "filename": "src/cmd/internal/obj/arm64/asm7.go",
        "patchSetId": 5
      },
      "lineNbr": 1988,
      "author": {
        "id": 13315
      },
      "writtenOn": "2018-04-20T19:54:42Z",
      "side": 1,
      "message": "No. TST instruction seems not supported. You can add the support and enable the test.",
      "parentUuid": "d4796d87_9d3bcc8c",
      "revId": "8bb70c433eb8cd42c5b8326127b132d7c74be3e5",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705",
      "unresolved": true
    }
  ]
}