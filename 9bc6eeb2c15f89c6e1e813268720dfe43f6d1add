{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "ba2b2c6a_5acbc0a8",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 15
      },
      "lineNbr": 0,
      "author": {
        "id": 5673
      },
      "writtenOn": "2020-11-22T13:24:45Z",
      "side": 1,
      "message": "I don\u0027t have any strong opinions on the code, but I have misgivings about a design that adds a layer of file descriptor caching here. Anecdotally it seems like trying to cache these resources is a risky approach.\n\nPerhaps the TCP path in io.Copy could be changed to only call Splice once X bytes have been sent? That might amortize the cost of the pipe allocation. Alternatively, could the pipe be moved into the FD struct here? That way it\u0027s lifetime could be pinned to the file descriptor of the TCP connection.\n\nI would appreciate more data or reproduction of the problem \u0026 discussion about potential designs in #42740 before proceeding with a solution.",
      "revId": "9bc6eeb2c15f89c6e1e813268720dfe43f6d1add",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    }
  ]
}